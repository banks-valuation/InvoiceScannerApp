function dp(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function fp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var od={exports:{}},qi={},ad={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ns=Symbol.for("react.element"),pp=Symbol.for("react.portal"),mp=Symbol.for("react.fragment"),gp=Symbol.for("react.strict_mode"),vp=Symbol.for("react.profiler"),yp=Symbol.for("react.provider"),wp=Symbol.for("react.context"),xp=Symbol.for("react.forward_ref"),_p=Symbol.for("react.suspense"),kp=Symbol.for("react.memo"),Sp=Symbol.for("react.lazy"),dc=Symbol.iterator;function bp(t){return t===null||typeof t!="object"?null:(t=dc&&t[dc]||t["@@iterator"],typeof t=="function"?t:null)}var ld={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cd=Object.assign,ud={};function wr(t,e,n){this.props=t,this.context=e,this.refs=ud,this.updater=n||ld}wr.prototype.isReactComponent={};wr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dd(){}dd.prototype=wr.prototype;function cl(t,e,n){this.props=t,this.context=e,this.refs=ud,this.updater=n||ld}var ul=cl.prototype=new dd;ul.constructor=cl;cd(ul,wr.prototype);ul.isPureReactComponent=!0;var hc=Array.isArray,hd=Object.prototype.hasOwnProperty,dl={current:null},fd={key:!0,ref:!0,__self:!0,__source:!0};function pd(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)hd.call(e,r)&&!fd.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ns,type:t,key:i,ref:o,props:s,_owner:dl.current}}function Ep(t,e){return{$$typeof:Ns,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ns}function jp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fc=/\/+/g;function wo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jp(""+t.key):e.toString(36)}function ri(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ns:case pp:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+wo(o,0):r,hc(s)?(n="",t!=null&&(n=t.replace(fc,"$&/")+"/"),ri(s,e,n,"",function(c){return c})):s!=null&&(hl(s)&&(s=Ep(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fc,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",hc(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+wo(i,a);o+=ri(i,e,n,l,s)}else if(l=bp(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+wo(i,a++),o+=ri(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ls(t,e,n){if(t==null)return t;var r=[],s=0;return ri(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Tp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $e={current:null},si={transition:null},Cp={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:si,ReactCurrentOwner:dl};function md(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:Ls,forEach:function(t,e,n){Ls(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ls(t,function(){e++}),e},toArray:function(t){return Ls(t,function(e){return e})||[]},only:function(t){if(!hl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};B.Component=wr;B.Fragment=mp;B.Profiler=vp;B.PureComponent=cl;B.StrictMode=gp;B.Suspense=_p;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cp;B.act=md;B.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cd({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=dl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hd.call(e,l)&&!fd.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ns,type:t.type,key:s,ref:i,props:r,_owner:o}};B.createContext=function(t){return t={$$typeof:wp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yp,_context:t},t.Consumer=t};B.createElement=pd;B.createFactory=function(t){var e=pd.bind(null,t);return e.type=t,e};B.createRef=function(){return{current:null}};B.forwardRef=function(t){return{$$typeof:xp,render:t}};B.isValidElement=hl;B.lazy=function(t){return{$$typeof:Sp,_payload:{_status:-1,_result:t},_init:Tp}};B.memo=function(t,e){return{$$typeof:kp,type:t,compare:e===void 0?null:e}};B.startTransition=function(t){var e=si.transition;si.transition={};try{t()}finally{si.transition=e}};B.unstable_act=md;B.useCallback=function(t,e){return $e.current.useCallback(t,e)};B.useContext=function(t){return $e.current.useContext(t)};B.useDebugValue=function(){};B.useDeferredValue=function(t){return $e.current.useDeferredValue(t)};B.useEffect=function(t,e){return $e.current.useEffect(t,e)};B.useId=function(){return $e.current.useId()};B.useImperativeHandle=function(t,e,n){return $e.current.useImperativeHandle(t,e,n)};B.useInsertionEffect=function(t,e){return $e.current.useInsertionEffect(t,e)};B.useLayoutEffect=function(t,e){return $e.current.useLayoutEffect(t,e)};B.useMemo=function(t,e){return $e.current.useMemo(t,e)};B.useReducer=function(t,e,n){return $e.current.useReducer(t,e,n)};B.useRef=function(t){return $e.current.useRef(t)};B.useState=function(t){return $e.current.useState(t)};B.useSyncExternalStore=function(t,e,n){return $e.current.useSyncExternalStore(t,e,n)};B.useTransition=function(){return $e.current.useTransition()};B.version="18.3.1";ad.exports=B;var k=ad.exports;const Wn=hp(k),Np=dp({__proto__:null,default:Wn},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp=k,Op=Symbol.for("react.element"),Ip=Symbol.for("react.fragment"),Rp=Object.prototype.hasOwnProperty,$p=Pp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ap={key:!0,ref:!0,__self:!0,__source:!0};function gd(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Rp.call(e,r)&&!Ap.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Op,type:t,key:i,ref:o,props:s,_owner:$p.current}}qi.Fragment=Ip;qi.jsx=gd;qi.jsxs=gd;od.exports=qi;var u=od.exports,vd={exports:{}},Ke={},yd={exports:{}},wd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,D){var M=P.length;P.push(D);e:for(;0<M;){var J=M-1>>>1,re=P[J];if(0<s(re,D))P[J]=D,P[M]=re,M=J;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var D=P[0],M=P.pop();if(M!==D){P[0]=M;e:for(var J=0,re=P.length,bt=re>>>1;J<bt;){var Je=2*(J+1)-1,Et=P[Je],We=Je+1,vt=P[We];if(0>s(Et,M))We<re&&0>s(vt,Et)?(P[J]=vt,P[We]=M,J=We):(P[J]=Et,P[Je]=M,J=Je);else if(We<re&&0>s(vt,M))P[J]=vt,P[We]=M,J=We;else break e}}return D}function s(P,D){var M=P.sortIndex-D.sortIndex;return M!==0?M:P.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,v=!1,y=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(P){for(var D=n(c);D!==null;){if(D.callback===null)r(c);else if(D.startTime<=P)r(c),D.sortIndex=D.expirationTime,e(l,D);else break;D=n(c)}}function x(P){if(w=!1,m(P),!y)if(n(l)!==null)y=!0,Y(S);else{var D=n(c);D!==null&&Ee(x,D.startTime-P)}}function S(P,D){y=!1,w&&(w=!1,g(N),N=-1),v=!0;var M=f;try{for(m(D),h=n(l);h!==null&&(!(h.expirationTime>D)||P&&!A());){var J=h.callback;if(typeof J=="function"){h.callback=null,f=h.priorityLevel;var re=J(h.expirationTime<=D);D=t.unstable_now(),typeof re=="function"?h.callback=re:h===n(l)&&r(l),m(D)}else r(l);h=n(l)}if(h!==null)var bt=!0;else{var Je=n(c);Je!==null&&Ee(x,Je.startTime-D),bt=!1}return bt}finally{h=null,f=M,v=!1}}var E=!1,b=null,N=-1,F=5,C=-1;function A(){return!(t.unstable_now()-C<F)}function W(){if(b!==null){var P=t.unstable_now();C=P;var D=!0;try{D=b(!0,P)}finally{D?ce():(E=!1,b=null)}}else E=!1}var ce;if(typeof p=="function")ce=function(){p(W)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,$=gt.port2;gt.port1.onmessage=W,ce=function(){$.postMessage(null)}}else ce=function(){_(W,0)};function Y(P){b=P,E||(E=!0,ce())}function Ee(P,D){N=_(function(){P(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,Y(S))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var M=f;f=D;try{return P()}finally{f=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,D){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var M=f;f=P;try{return D()}finally{f=M}},t.unstable_scheduleCallback=function(P,D,M){var J=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?J+M:J):M=J,P){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=M+re,P={id:d++,callback:D,priorityLevel:P,startTime:M,expirationTime:re,sortIndex:-1},M>J?(P.sortIndex=M,e(c,P),n(l)===null&&P===n(c)&&(w?(g(N),N=-1):w=!0,Ee(x,M-J))):(P.sortIndex=re,e(l,P),y||v||(y=!0,Y(S))),P},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(P){var D=f;return function(){var M=f;f=D;try{return P.apply(this,arguments)}finally{f=M}}}})(wd);yd.exports=wd;var Lp=yd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp=k,Ye=Lp;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xd=new Set,as={};function Rn(t,e){ur(t,e),ur(t+"Capture",e)}function ur(t,e){for(as[t]=e,t=0;t<e.length;t++)xd.add(e[t])}var At=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ta=Object.prototype.hasOwnProperty,Mp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pc={},mc={};function Fp(t){return ta.call(mc,t)?!0:ta.call(pc,t)?!1:Mp.test(t)?mc[t]=!0:(pc[t]=!0,!1)}function Up(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zp(t,e,n,r){if(e===null||typeof e>"u"||Up(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ae(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){be[t]=new Ae(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];be[e]=new Ae(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){be[t]=new Ae(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){be[t]=new Ae(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){be[t]=new Ae(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){be[t]=new Ae(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){be[t]=new Ae(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){be[t]=new Ae(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){be[t]=new Ae(t,5,!1,t.toLowerCase(),null,!1,!1)});var fl=/[\-:]([a-z])/g;function pl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fl,pl);be[e]=new Ae(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fl,pl);be[e]=new Ae(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fl,pl);be[e]=new Ae(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){be[t]=new Ae(t,1,!1,t.toLowerCase(),null,!1,!1)});be.xlinkHref=new Ae("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){be[t]=new Ae(t,1,!1,t.toLowerCase(),null,!0,!0)});function ml(t,e,n,r){var s=be.hasOwnProperty(e)?be[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zp(e,n,s,r)&&(n=null),r||s===null?Fp(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ft=Dp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ds=Symbol.for("react.element"),qn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),gl=Symbol.for("react.strict_mode"),na=Symbol.for("react.profiler"),_d=Symbol.for("react.provider"),kd=Symbol.for("react.context"),vl=Symbol.for("react.forward_ref"),ra=Symbol.for("react.suspense"),sa=Symbol.for("react.suspense_list"),yl=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),Sd=Symbol.for("react.offscreen"),gc=Symbol.iterator;function Nr(t){return t===null||typeof t!="object"?null:(t=gc&&t[gc]||t["@@iterator"],typeof t=="function"?t:null)}var oe=Object.assign,xo;function Br(t){if(xo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xo=e&&e[1]||""}return`
`+xo+t}var _o=!1;function ko(t,e){if(!t||_o)return"";_o=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{_o=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Br(t):""}function Bp(t){switch(t.tag){case 5:return Br(t.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 2:case 15:return t=ko(t.type,!1),t;case 11:return t=ko(t.type.render,!1),t;case 1:return t=ko(t.type,!0),t;default:return""}}function ia(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yn:return"Fragment";case qn:return"Portal";case na:return"Profiler";case gl:return"StrictMode";case ra:return"Suspense";case sa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kd:return(t.displayName||"Context")+".Consumer";case _d:return(t._context.displayName||"Context")+".Provider";case vl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yl:return e=t.displayName||null,e!==null?e:ia(t.type)||"Memo";case Vt:e=t._payload,t=t._init;try{return ia(t(e))}catch{}}return null}function Wp(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ia(e);case 8:return e===gl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function an(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vp(t){var e=bd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ms(t){t._valueTracker||(t._valueTracker=Vp(t))}function Ed(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function oa(t,e){var n=e.checked;return oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=an(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jd(t,e){e=e.checked,e!=null&&ml(t,"checked",e,!1)}function aa(t,e){jd(t,e);var n=an(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?la(t,e.type,n):e.hasOwnProperty("defaultValue")&&la(t,e.type,an(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function la(t,e,n){(e!=="number"||mi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wr=Array.isArray;function sr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+an(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ca(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(Wr(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:an(n)}}function Td(t,e){var n=an(e.value),r=an(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ua(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fs,Nd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fs=Fs||document.createElement("div"),Fs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ls(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hp=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(t){Hp.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yr[e]=Yr[t]})});function Pd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yr.hasOwnProperty(t)&&Yr[t]?(""+e).trim():e+"px"}function Od(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Pd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var qp=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function da(t,e){if(e){if(qp[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function ha(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fa=null;function wl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pa=null,ir=null,or=null;function _c(t){if(t=Is(t)){if(typeof pa!="function")throw Error(T(280));var e=t.stateNode;e&&(e=Qi(e),pa(t.stateNode,t.type,e))}}function Id(t){ir?or?or.push(t):or=[t]:ir=t}function Rd(){if(ir){var t=ir,e=or;if(or=ir=null,_c(t),e)for(t=0;t<e.length;t++)_c(e[t])}}function $d(t,e){return t(e)}function Ad(){}var So=!1;function Ld(t,e,n){if(So)return t(e,n);So=!0;try{return $d(t,e,n)}finally{So=!1,(ir!==null||or!==null)&&(Ad(),Rd())}}function cs(t,e){var n=t.stateNode;if(n===null)return null;var r=Qi(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var ma=!1;if(At)try{var Pr={};Object.defineProperty(Pr,"passive",{get:function(){ma=!0}}),window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{ma=!1}function Yp(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Kr=!1,gi=null,vi=!1,ga=null,Kp={onError:function(t){Kr=!0,gi=t}};function Gp(t,e,n,r,s,i,o,a,l){Kr=!1,gi=null,Yp.apply(Kp,arguments)}function Jp(t,e,n,r,s,i,o,a,l){if(Gp.apply(this,arguments),Kr){if(Kr){var c=gi;Kr=!1,gi=null}else throw Error(T(198));vi||(vi=!0,ga=c)}}function $n(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kc(t){if($n(t)!==t)throw Error(T(188))}function Qp(t){var e=t.alternate;if(!e){if(e=$n(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return kc(s),t;if(i===r)return kc(s),e;i=i.sibling}throw Error(T(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function Md(t){return t=Qp(t),t!==null?Fd(t):null}function Fd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fd(t);if(e!==null)return e;t=t.sibling}return null}var Ud=Ye.unstable_scheduleCallback,Sc=Ye.unstable_cancelCallback,Xp=Ye.unstable_shouldYield,Zp=Ye.unstable_requestPaint,ue=Ye.unstable_now,em=Ye.unstable_getCurrentPriorityLevel,xl=Ye.unstable_ImmediatePriority,zd=Ye.unstable_UserBlockingPriority,yi=Ye.unstable_NormalPriority,tm=Ye.unstable_LowPriority,Bd=Ye.unstable_IdlePriority,Yi=null,kt=null;function nm(t){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Yi,t,void 0,(t.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:im,rm=Math.log,sm=Math.LN2;function im(t){return t>>>=0,t===0?32:31-(rm(t)/sm|0)|0}var Us=64,zs=4194304;function Vr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Vr(a):(i&=o,i!==0&&(r=Vr(i)))}else o=n&~s,o!==0?r=Vr(o):i!==0&&(r=Vr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ht(e),s=1<<n,r|=t[n],e&=~s;return r}function om(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function am(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ht(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=om(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function va(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wd(){var t=Us;return Us<<=1,!(Us&4194240)&&(Us=64),t}function bo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ps(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ht(e),t[e]=n}function lm(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ht(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function _l(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ht(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var G=0;function Vd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hd,kl,qd,Yd,Kd,ya=!1,Bs=[],Xt=null,Zt=null,en=null,us=new Map,ds=new Map,qt=[],cm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bc(t,e){switch(t){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":us.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ds.delete(e.pointerId)}}function Or(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Is(e),e!==null&&kl(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function um(t,e,n,r,s){switch(e){case"focusin":return Xt=Or(Xt,t,e,n,r,s),!0;case"dragenter":return Zt=Or(Zt,t,e,n,r,s),!0;case"mouseover":return en=Or(en,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return us.set(i,Or(us.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ds.set(i,Or(ds.get(i)||null,t,e,n,r,s)),!0}return!1}function Gd(t){var e=_n(t.target);if(e!==null){var n=$n(e);if(n!==null){if(e=n.tag,e===13){if(e=Dd(n),e!==null){t.blockedOn=e,Kd(t.priority,function(){qd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ii(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fa=r,n.target.dispatchEvent(r),fa=null}else return e=Is(n),e!==null&&kl(e),t.blockedOn=n,!1;e.shift()}return!0}function Ec(t,e,n){ii(t)&&n.delete(e)}function dm(){ya=!1,Xt!==null&&ii(Xt)&&(Xt=null),Zt!==null&&ii(Zt)&&(Zt=null),en!==null&&ii(en)&&(en=null),us.forEach(Ec),ds.forEach(Ec)}function Ir(t,e){t.blockedOn===e&&(t.blockedOn=null,ya||(ya=!0,Ye.unstable_scheduleCallback(Ye.unstable_NormalPriority,dm)))}function hs(t){function e(s){return Ir(s,t)}if(0<Bs.length){Ir(Bs[0],t);for(var n=1;n<Bs.length;n++){var r=Bs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xt!==null&&Ir(Xt,t),Zt!==null&&Ir(Zt,t),en!==null&&Ir(en,t),us.forEach(e),ds.forEach(e),n=0;n<qt.length;n++)r=qt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qt.length&&(n=qt[0],n.blockedOn===null);)Gd(n),n.blockedOn===null&&qt.shift()}var ar=Ft.ReactCurrentBatchConfig,xi=!0;function hm(t,e,n,r){var s=G,i=ar.transition;ar.transition=null;try{G=1,Sl(t,e,n,r)}finally{G=s,ar.transition=i}}function fm(t,e,n,r){var s=G,i=ar.transition;ar.transition=null;try{G=4,Sl(t,e,n,r)}finally{G=s,ar.transition=i}}function Sl(t,e,n,r){if(xi){var s=wa(t,e,n,r);if(s===null)$o(t,e,r,_i,n),bc(t,r);else if(um(s,t,e,n,r))r.stopPropagation();else if(bc(t,r),e&4&&-1<cm.indexOf(t)){for(;s!==null;){var i=Is(s);if(i!==null&&Hd(i),i=wa(t,e,n,r),i===null&&$o(t,e,r,_i,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else $o(t,e,r,null,n)}}var _i=null;function wa(t,e,n,r){if(_i=null,t=wl(r),t=_n(t),t!==null)if(e=$n(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _i=t,null}function Jd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(em()){case xl:return 1;case zd:return 4;case yi:case tm:return 16;case Bd:return 536870912;default:return 16}default:return 16}}var Gt=null,bl=null,oi=null;function Qd(){if(oi)return oi;var t,e=bl,n=e.length,r,s="value"in Gt?Gt.value:Gt.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return oi=s.slice(t,1<r?1-r:void 0)}function ai(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ws(){return!0}function jc(){return!1}function Ge(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ws:jc,this.isPropagationStopped=jc,this}return oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),e}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},El=Ge(xr),Os=oe({},xr,{view:0,detail:0}),pm=Ge(Os),Eo,jo,Rr,Ki=oe({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rr&&(Rr&&t.type==="mousemove"?(Eo=t.screenX-Rr.screenX,jo=t.screenY-Rr.screenY):jo=Eo=0,Rr=t),Eo)},movementY:function(t){return"movementY"in t?t.movementY:jo}}),Tc=Ge(Ki),mm=oe({},Ki,{dataTransfer:0}),gm=Ge(mm),vm=oe({},Os,{relatedTarget:0}),To=Ge(vm),ym=oe({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),wm=Ge(ym),xm=oe({},xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_m=Ge(xm),km=oe({},xr,{data:0}),Cc=Ge(km),Sm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Em={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Em[t])?!!e[t]:!1}function jl(){return jm}var Tm=oe({},Os,{key:function(t){if(t.key){var e=Sm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ai(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jl,charCode:function(t){return t.type==="keypress"?ai(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ai(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cm=Ge(Tm),Nm=oe({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nc=Ge(Nm),Pm=oe({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jl}),Om=Ge(Pm),Im=oe({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rm=Ge(Im),$m=oe({},Ki,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Am=Ge($m),Lm=[9,13,27,32],Tl=At&&"CompositionEvent"in window,Gr=null;At&&"documentMode"in document&&(Gr=document.documentMode);var Dm=At&&"TextEvent"in window&&!Gr,Xd=At&&(!Tl||Gr&&8<Gr&&11>=Gr),Pc=" ",Oc=!1;function Zd(t,e){switch(t){case"keyup":return Lm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kn=!1;function Mm(t,e){switch(t){case"compositionend":return eh(e);case"keypress":return e.which!==32?null:(Oc=!0,Pc);case"textInput":return t=e.data,t===Pc&&Oc?null:t;default:return null}}function Fm(t,e){if(Kn)return t==="compositionend"||!Tl&&Zd(t,e)?(t=Qd(),oi=bl=Gt=null,Kn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xd&&e.locale!=="ko"?null:e.data;default:return null}}var Um={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ic(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Um[t.type]:e==="textarea"}function th(t,e,n,r){Id(r),e=ki(e,"onChange"),0<e.length&&(n=new El("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jr=null,fs=null;function zm(t){hh(t,0)}function Gi(t){var e=Qn(t);if(Ed(e))return t}function Bm(t,e){if(t==="change")return e}var nh=!1;if(At){var Co;if(At){var No="oninput"in document;if(!No){var Rc=document.createElement("div");Rc.setAttribute("oninput","return;"),No=typeof Rc.oninput=="function"}Co=No}else Co=!1;nh=Co&&(!document.documentMode||9<document.documentMode)}function $c(){Jr&&(Jr.detachEvent("onpropertychange",rh),fs=Jr=null)}function rh(t){if(t.propertyName==="value"&&Gi(fs)){var e=[];th(e,fs,t,wl(t)),Ld(zm,e)}}function Wm(t,e,n){t==="focusin"?($c(),Jr=e,fs=n,Jr.attachEvent("onpropertychange",rh)):t==="focusout"&&$c()}function Vm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gi(fs)}function Hm(t,e){if(t==="click")return Gi(e)}function qm(t,e){if(t==="input"||t==="change")return Gi(e)}function Ym(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pt=typeof Object.is=="function"?Object.is:Ym;function ps(t,e){if(pt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ta.call(e,s)||!pt(t[s],e[s]))return!1}return!0}function Ac(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lc(t,e){var n=Ac(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ac(n)}}function sh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ih(){for(var t=window,e=mi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mi(t.document)}return e}function Cl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Km(t){var e=ih(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sh(n.ownerDocument.documentElement,n)){if(r!==null&&Cl(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Lc(n,i);var o=Lc(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Gm=At&&"documentMode"in document&&11>=document.documentMode,Gn=null,xa=null,Qr=null,_a=!1;function Dc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_a||Gn==null||Gn!==mi(r)||(r=Gn,"selectionStart"in r&&Cl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qr&&ps(Qr,r)||(Qr=r,r=ki(xa,"onSelect"),0<r.length&&(e=new El("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gn)))}function Vs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jn={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionend:Vs("Transition","TransitionEnd")},Po={},oh={};At&&(oh=document.createElement("div").style,"AnimationEvent"in window||(delete Jn.animationend.animation,delete Jn.animationiteration.animation,delete Jn.animationstart.animation),"TransitionEvent"in window||delete Jn.transitionend.transition);function Ji(t){if(Po[t])return Po[t];if(!Jn[t])return t;var e=Jn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oh)return Po[t]=e[n];return t}var ah=Ji("animationend"),lh=Ji("animationiteration"),ch=Ji("animationstart"),uh=Ji("transitionend"),dh=new Map,Mc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function un(t,e){dh.set(t,e),Rn(e,[t])}for(var Oo=0;Oo<Mc.length;Oo++){var Io=Mc[Oo],Jm=Io.toLowerCase(),Qm=Io[0].toUpperCase()+Io.slice(1);un(Jm,"on"+Qm)}un(ah,"onAnimationEnd");un(lh,"onAnimationIteration");un(ch,"onAnimationStart");un("dblclick","onDoubleClick");un("focusin","onFocus");un("focusout","onBlur");un(uh,"onTransitionEnd");ur("onMouseEnter",["mouseout","mouseover"]);ur("onMouseLeave",["mouseout","mouseover"]);ur("onPointerEnter",["pointerout","pointerover"]);ur("onPointerLeave",["pointerout","pointerover"]);Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hr));function Fc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Jp(r,e,void 0,t),t.currentTarget=null}function hh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Fc(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Fc(s,a,c),i=l}}}if(vi)throw t=ga,vi=!1,ga=null,t}function ee(t,e){var n=e[ja];n===void 0&&(n=e[ja]=new Set);var r=t+"__bubble";n.has(r)||(fh(e,t,2,!1),n.add(r))}function Ro(t,e,n){var r=0;e&&(r|=4),fh(n,t,r,e)}var Hs="_reactListening"+Math.random().toString(36).slice(2);function ms(t){if(!t[Hs]){t[Hs]=!0,xd.forEach(function(n){n!=="selectionchange"&&(Xm.has(n)||Ro(n,!1,t),Ro(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hs]||(e[Hs]=!0,Ro("selectionchange",!1,e))}}function fh(t,e,n,r){switch(Jd(e)){case 1:var s=hm;break;case 4:s=fm;break;default:s=Sl}n=s.bind(null,e,n,t),s=void 0,!ma||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $o(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=_n(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Ld(function(){var c=i,d=wl(n),h=[];e:{var f=dh.get(t);if(f!==void 0){var v=El,y=t;switch(t){case"keypress":if(ai(n)===0)break e;case"keydown":case"keyup":v=Cm;break;case"focusin":y="focus",v=To;break;case"focusout":y="blur",v=To;break;case"beforeblur":case"afterblur":v=To;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=gm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Om;break;case ah:case lh:case ch:v=wm;break;case uh:v=Rm;break;case"scroll":v=pm;break;case"wheel":v=Am;break;case"copy":case"cut":case"paste":v=_m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Nc}var w=(e&4)!==0,_=!w&&t==="scroll",g=w?f!==null?f+"Capture":null:f;w=[];for(var p=c,m;p!==null;){m=p;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,g!==null&&(x=cs(p,g),x!=null&&w.push(gs(p,x,m)))),_)break;p=p.return}0<w.length&&(f=new v(f,y,null,n,d),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&n!==fa&&(y=n.relatedTarget||n.fromElement)&&(_n(y)||y[Lt]))break e;if((v||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=c,y=y?_n(y):null,y!==null&&(_=$n(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=c),v!==y)){if(w=Tc,x="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=Nc,x="onPointerLeave",g="onPointerEnter",p="pointer"),_=v==null?f:Qn(v),m=y==null?f:Qn(y),f=new w(x,p+"leave",v,n,d),f.target=_,f.relatedTarget=m,x=null,_n(d)===c&&(w=new w(g,p+"enter",y,n,d),w.target=m,w.relatedTarget=_,x=w),_=x,v&&y)t:{for(w=v,g=y,p=0,m=w;m;m=Ln(m))p++;for(m=0,x=g;x;x=Ln(x))m++;for(;0<p-m;)w=Ln(w),p--;for(;0<m-p;)g=Ln(g),m--;for(;p--;){if(w===g||g!==null&&w===g.alternate)break t;w=Ln(w),g=Ln(g)}w=null}else w=null;v!==null&&Uc(h,f,v,w,!1),y!==null&&_!==null&&Uc(h,_,y,w,!0)}}e:{if(f=c?Qn(c):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var S=Bm;else if(Ic(f))if(nh)S=qm;else{S=Vm;var E=Wm}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Hm);if(S&&(S=S(t,c))){th(h,S,n,d);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&la(f,"number",f.value)}switch(E=c?Qn(c):window,t){case"focusin":(Ic(E)||E.contentEditable==="true")&&(Gn=E,xa=c,Qr=null);break;case"focusout":Qr=xa=Gn=null;break;case"mousedown":_a=!0;break;case"contextmenu":case"mouseup":case"dragend":_a=!1,Dc(h,n,d);break;case"selectionchange":if(Gm)break;case"keydown":case"keyup":Dc(h,n,d)}var b;if(Tl)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Kn?Zd(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Xd&&n.locale!=="ko"&&(Kn||N!=="onCompositionStart"?N==="onCompositionEnd"&&Kn&&(b=Qd()):(Gt=d,bl="value"in Gt?Gt.value:Gt.textContent,Kn=!0)),E=ki(c,N),0<E.length&&(N=new Cc(N,t,null,n,d),h.push({event:N,listeners:E}),b?N.data=b:(b=eh(n),b!==null&&(N.data=b)))),(b=Dm?Mm(t,n):Fm(t,n))&&(c=ki(c,"onBeforeInput"),0<c.length&&(d=new Cc("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=b))}hh(h,e)})}function gs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ki(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=cs(t,n),i!=null&&r.unshift(gs(t,i,s)),i=cs(t,e),i!=null&&r.push(gs(t,i,s))),t=t.return}return r}function Ln(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Uc(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=cs(n,i),l!=null&&o.unshift(gs(n,l,a))):s||(l=cs(n,i),l!=null&&o.push(gs(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Zm=/\r\n?/g,eg=/\u0000|\uFFFD/g;function zc(t){return(typeof t=="string"?t:""+t).replace(Zm,`
`).replace(eg,"")}function qs(t,e,n){if(e=zc(e),zc(t)!==e&&n)throw Error(T(425))}function Si(){}var ka=null,Sa=null;function ba(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ea=typeof setTimeout=="function"?setTimeout:void 0,tg=typeof clearTimeout=="function"?clearTimeout:void 0,Bc=typeof Promise=="function"?Promise:void 0,ng=typeof queueMicrotask=="function"?queueMicrotask:typeof Bc<"u"?function(t){return Bc.resolve(null).then(t).catch(rg)}:Ea;function rg(t){setTimeout(function(){throw t})}function Ao(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),hs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);hs(e)}function tn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _r=Math.random().toString(36).slice(2),_t="__reactFiber$"+_r,vs="__reactProps$"+_r,Lt="__reactContainer$"+_r,ja="__reactEvents$"+_r,sg="__reactListeners$"+_r,ig="__reactHandles$"+_r;function _n(t){var e=t[_t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lt]||n[_t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wc(t);t!==null;){if(n=t[_t])return n;t=Wc(t)}return e}t=n,n=t.parentNode}return null}function Is(t){return t=t[_t]||t[Lt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function Qi(t){return t[vs]||null}var Ta=[],Xn=-1;function dn(t){return{current:t}}function te(t){0>Xn||(t.current=Ta[Xn],Ta[Xn]=null,Xn--)}function Z(t,e){Xn++,Ta[Xn]=t.current,t.current=e}var ln={},Ne=dn(ln),Ue=dn(!1),Tn=ln;function dr(t,e){var n=t.type.contextTypes;if(!n)return ln;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ze(t){return t=t.childContextTypes,t!=null}function bi(){te(Ue),te(Ne)}function Vc(t,e,n){if(Ne.current!==ln)throw Error(T(168));Z(Ne,e),Z(Ue,n)}function ph(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(T(108,Wp(t)||"Unknown",s));return oe({},n,r)}function Ei(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ln,Tn=Ne.current,Z(Ne,t),Z(Ue,Ue.current),!0}function Hc(t,e,n){var r=t.stateNode;if(!r)throw Error(T(169));n?(t=ph(t,e,Tn),r.__reactInternalMemoizedMergedChildContext=t,te(Ue),te(Ne),Z(Ne,t)):te(Ue),Z(Ue,n)}var Pt=null,Xi=!1,Lo=!1;function mh(t){Pt===null?Pt=[t]:Pt.push(t)}function og(t){Xi=!0,mh(t)}function hn(){if(!Lo&&Pt!==null){Lo=!0;var t=0,e=G;try{var n=Pt;for(G=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pt=null,Xi=!1}catch(s){throw Pt!==null&&(Pt=Pt.slice(t+1)),Ud(xl,hn),s}finally{G=e,Lo=!1}}return null}var Zn=[],er=0,ji=null,Ti=0,Xe=[],Ze=0,Cn=null,Ot=1,It="";function gn(t,e){Zn[er++]=Ti,Zn[er++]=ji,ji=t,Ti=e}function gh(t,e,n){Xe[Ze++]=Ot,Xe[Ze++]=It,Xe[Ze++]=Cn,Cn=t;var r=Ot;t=It;var s=32-ht(r)-1;r&=~(1<<s),n+=1;var i=32-ht(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ot=1<<32-ht(e)+s|n<<s|r,It=i+t}else Ot=1<<i|n<<s|r,It=t}function Nl(t){t.return!==null&&(gn(t,1),gh(t,1,0))}function Pl(t){for(;t===ji;)ji=Zn[--er],Zn[er]=null,Ti=Zn[--er],Zn[er]=null;for(;t===Cn;)Cn=Xe[--Ze],Xe[Ze]=null,It=Xe[--Ze],Xe[Ze]=null,Ot=Xe[--Ze],Xe[Ze]=null}var qe=null,He=null,ne=!1,dt=null;function vh(t,e){var n=et(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qe=t,He=tn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qe=t,He=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cn!==null?{id:Ot,overflow:It}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=et(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qe=t,He=null,!0):!1;default:return!1}}function Ca(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Na(t){if(ne){var e=He;if(e){var n=e;if(!qc(t,e)){if(Ca(t))throw Error(T(418));e=tn(n.nextSibling);var r=qe;e&&qc(t,e)?vh(r,n):(t.flags=t.flags&-4097|2,ne=!1,qe=t)}}else{if(Ca(t))throw Error(T(418));t.flags=t.flags&-4097|2,ne=!1,qe=t}}}function Yc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qe=t}function Ys(t){if(t!==qe)return!1;if(!ne)return Yc(t),ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ba(t.type,t.memoizedProps)),e&&(e=He)){if(Ca(t))throw yh(),Error(T(418));for(;e;)vh(t,e),e=tn(e.nextSibling)}if(Yc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){He=tn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}He=null}}else He=qe?tn(t.stateNode.nextSibling):null;return!0}function yh(){for(var t=He;t;)t=tn(t.nextSibling)}function hr(){He=qe=null,ne=!1}function Ol(t){dt===null?dt=[t]:dt.push(t)}var ag=Ft.ReactCurrentBatchConfig;function $r(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function Ks(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kc(t){var e=t._init;return e(t._payload)}function wh(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=on(g,p),g.index=0,g.sibling=null,g}function i(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,m,x){return p===null||p.tag!==6?(p=Wo(m,g.mode,x),p.return=g,p):(p=s(p,m),p.return=g,p)}function l(g,p,m,x){var S=m.type;return S===Yn?d(g,p,m.props.children,x,m.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Vt&&Kc(S)===p.type)?(x=s(p,m.props),x.ref=$r(g,p,m),x.return=g,x):(x=pi(m.type,m.key,m.props,null,g.mode,x),x.ref=$r(g,p,m),x.return=g,x)}function c(g,p,m,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=Vo(m,g.mode,x),p.return=g,p):(p=s(p,m.children||[]),p.return=g,p)}function d(g,p,m,x,S){return p===null||p.tag!==7?(p=En(m,g.mode,x,S),p.return=g,p):(p=s(p,m),p.return=g,p)}function h(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Wo(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ds:return m=pi(p.type,p.key,p.props,null,g.mode,m),m.ref=$r(g,null,p),m.return=g,m;case qn:return p=Vo(p,g.mode,m),p.return=g,p;case Vt:var x=p._init;return h(g,x(p._payload),m)}if(Wr(p)||Nr(p))return p=En(p,g.mode,m,null),p.return=g,p;Ks(g,p)}return null}function f(g,p,m,x){var S=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:a(g,p,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ds:return m.key===S?l(g,p,m,x):null;case qn:return m.key===S?c(g,p,m,x):null;case Vt:return S=m._init,f(g,p,S(m._payload),x)}if(Wr(m)||Nr(m))return S!==null?null:d(g,p,m,x,null);Ks(g,m)}return null}function v(g,p,m,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(m)||null,a(p,g,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ds:return g=g.get(x.key===null?m:x.key)||null,l(p,g,x,S);case qn:return g=g.get(x.key===null?m:x.key)||null,c(p,g,x,S);case Vt:var E=x._init;return v(g,p,m,E(x._payload),S)}if(Wr(x)||Nr(x))return g=g.get(m)||null,d(p,g,x,S,null);Ks(p,x)}return null}function y(g,p,m,x){for(var S=null,E=null,b=p,N=p=0,F=null;b!==null&&N<m.length;N++){b.index>N?(F=b,b=null):F=b.sibling;var C=f(g,b,m[N],x);if(C===null){b===null&&(b=F);break}t&&b&&C.alternate===null&&e(g,b),p=i(C,p,N),E===null?S=C:E.sibling=C,E=C,b=F}if(N===m.length)return n(g,b),ne&&gn(g,N),S;if(b===null){for(;N<m.length;N++)b=h(g,m[N],x),b!==null&&(p=i(b,p,N),E===null?S=b:E.sibling=b,E=b);return ne&&gn(g,N),S}for(b=r(g,b);N<m.length;N++)F=v(b,g,N,m[N],x),F!==null&&(t&&F.alternate!==null&&b.delete(F.key===null?N:F.key),p=i(F,p,N),E===null?S=F:E.sibling=F,E=F);return t&&b.forEach(function(A){return e(g,A)}),ne&&gn(g,N),S}function w(g,p,m,x){var S=Nr(m);if(typeof S!="function")throw Error(T(150));if(m=S.call(m),m==null)throw Error(T(151));for(var E=S=null,b=p,N=p=0,F=null,C=m.next();b!==null&&!C.done;N++,C=m.next()){b.index>N?(F=b,b=null):F=b.sibling;var A=f(g,b,C.value,x);if(A===null){b===null&&(b=F);break}t&&b&&A.alternate===null&&e(g,b),p=i(A,p,N),E===null?S=A:E.sibling=A,E=A,b=F}if(C.done)return n(g,b),ne&&gn(g,N),S;if(b===null){for(;!C.done;N++,C=m.next())C=h(g,C.value,x),C!==null&&(p=i(C,p,N),E===null?S=C:E.sibling=C,E=C);return ne&&gn(g,N),S}for(b=r(g,b);!C.done;N++,C=m.next())C=v(b,g,N,C.value,x),C!==null&&(t&&C.alternate!==null&&b.delete(C.key===null?N:C.key),p=i(C,p,N),E===null?S=C:E.sibling=C,E=C);return t&&b.forEach(function(W){return e(g,W)}),ne&&gn(g,N),S}function _(g,p,m,x){if(typeof m=="object"&&m!==null&&m.type===Yn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ds:e:{for(var S=m.key,E=p;E!==null;){if(E.key===S){if(S=m.type,S===Yn){if(E.tag===7){n(g,E.sibling),p=s(E,m.props.children),p.return=g,g=p;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Vt&&Kc(S)===E.type){n(g,E.sibling),p=s(E,m.props),p.ref=$r(g,E,m),p.return=g,g=p;break e}n(g,E);break}else e(g,E);E=E.sibling}m.type===Yn?(p=En(m.props.children,g.mode,x,m.key),p.return=g,g=p):(x=pi(m.type,m.key,m.props,null,g.mode,x),x.ref=$r(g,p,m),x.return=g,g=x)}return o(g);case qn:e:{for(E=m.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=s(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=Vo(m,g.mode,x),p.return=g,g=p}return o(g);case Vt:return E=m._init,_(g,p,E(m._payload),x)}if(Wr(m))return y(g,p,m,x);if(Nr(m))return w(g,p,m,x);Ks(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=s(p,m),p.return=g,g=p):(n(g,p),p=Wo(m,g.mode,x),p.return=g,g=p),o(g)):n(g,p)}return _}var fr=wh(!0),xh=wh(!1),Ci=dn(null),Ni=null,tr=null,Il=null;function Rl(){Il=tr=Ni=null}function $l(t){var e=Ci.current;te(Ci),t._currentValue=e}function Pa(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function lr(t,e){Ni=t,Il=tr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fe=!0),t.firstContext=null)}function st(t){var e=t._currentValue;if(Il!==t)if(t={context:t,memoizedValue:e,next:null},tr===null){if(Ni===null)throw Error(T(308));tr=t,Ni.dependencies={lanes:0,firstContext:t}}else tr=tr.next=t;return e}var kn=null;function Al(t){kn===null?kn=[t]:kn.push(t)}function _h(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Al(e)):(n.next=s.next,s.next=n),e.interleaved=n,Dt(t,r)}function Dt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ht=!1;function Ll(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Dt(t,n)}return s=r.interleaved,s===null?(e.next=e,Al(r)):(e.next=s.next,s.next=e),r.interleaved=e,Dt(t,n)}function li(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_l(t,n)}}function Gc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pi(t,e,n,r){var s=t.updateQueue;Ht=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,v=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,w=a;switch(f=e,v=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){h=y.call(v,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(v,h,f):y,f==null)break e;h=oe({},h,f);break e;case 2:Ht=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else v={eventTime:v,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=v,l=h):d=d.next=v,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Pn|=o,t.lanes=o,t.memoizedState=h}}function Jc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(T(191,s));s.call(r)}}}var Rs={},St=dn(Rs),ys=dn(Rs),ws=dn(Rs);function Sn(t){if(t===Rs)throw Error(T(174));return t}function Dl(t,e){switch(Z(ws,e),Z(ys,t),Z(St,Rs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ua(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ua(e,t)}te(St),Z(St,e)}function pr(){te(St),te(ys),te(ws)}function Sh(t){Sn(ws.current);var e=Sn(St.current),n=ua(e,t.type);e!==n&&(Z(ys,t),Z(St,n))}function Ml(t){ys.current===t&&(te(St),te(ys))}var se=dn(0);function Oi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Do=[];function Fl(){for(var t=0;t<Do.length;t++)Do[t]._workInProgressVersionPrimary=null;Do.length=0}var ci=Ft.ReactCurrentDispatcher,Mo=Ft.ReactCurrentBatchConfig,Nn=0,ie=null,me=null,we=null,Ii=!1,Xr=!1,xs=0,lg=0;function je(){throw Error(T(321))}function Ul(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pt(t[n],e[n]))return!1;return!0}function zl(t,e,n,r,s,i){if(Nn=i,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ci.current=t===null||t.memoizedState===null?hg:fg,t=n(r,s),Xr){i=0;do{if(Xr=!1,xs=0,25<=i)throw Error(T(301));i+=1,we=me=null,e.updateQueue=null,ci.current=pg,t=n(r,s)}while(Xr)}if(ci.current=Ri,e=me!==null&&me.next!==null,Nn=0,we=me=ie=null,Ii=!1,e)throw Error(T(300));return t}function Bl(){var t=xs!==0;return xs=0,t}function wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?ie.memoizedState=we=t:we=we.next=t,we}function it(){if(me===null){var t=ie.alternate;t=t!==null?t.memoizedState:null}else t=me.next;var e=we===null?ie.memoizedState:we.next;if(e!==null)we=e,me=t;else{if(t===null)throw Error(T(310));me=t,t={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},we===null?ie.memoizedState=we=t:we=we.next=t}return we}function _s(t,e){return typeof e=="function"?e(t):e}function Fo(t){var e=it(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=me,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Nn&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ie.lanes|=d,Pn|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,pt(r,e.memoizedState)||(Fe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ie.lanes|=i,Pn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Uo(t){var e=it(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);pt(i,e.memoizedState)||(Fe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function bh(){}function Eh(t,e){var n=ie,r=it(),s=e(),i=!pt(r.memoizedState,s);if(i&&(r.memoizedState=s,Fe=!0),r=r.queue,Wl(Ch.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||we!==null&&we.memoizedState.tag&1){if(n.flags|=2048,ks(9,Th.bind(null,n,r,s,e),void 0,null),_e===null)throw Error(T(349));Nn&30||jh(n,e,s)}return s}function jh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Th(t,e,n,r){e.value=n,e.getSnapshot=r,Nh(e)&&Ph(t)}function Ch(t,e,n){return n(function(){Nh(e)&&Ph(t)})}function Nh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pt(t,n)}catch{return!0}}function Ph(t){var e=Dt(t,1);e!==null&&ft(e,t,1,-1)}function Qc(t){var e=wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:t},e.queue=t,t=t.dispatch=dg.bind(null,ie,t),[e.memoizedState,t]}function ks(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Oh(){return it().memoizedState}function ui(t,e,n,r){var s=wt();ie.flags|=t,s.memoizedState=ks(1|e,n,void 0,r===void 0?null:r)}function Zi(t,e,n,r){var s=it();r=r===void 0?null:r;var i=void 0;if(me!==null){var o=me.memoizedState;if(i=o.destroy,r!==null&&Ul(r,o.deps)){s.memoizedState=ks(e,n,i,r);return}}ie.flags|=t,s.memoizedState=ks(1|e,n,i,r)}function Xc(t,e){return ui(8390656,8,t,e)}function Wl(t,e){return Zi(2048,8,t,e)}function Ih(t,e){return Zi(4,2,t,e)}function Rh(t,e){return Zi(4,4,t,e)}function $h(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ah(t,e,n){return n=n!=null?n.concat([t]):null,Zi(4,4,$h.bind(null,e,t),n)}function Vl(){}function Lh(t,e){var n=it();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ul(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Dh(t,e){var n=it();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ul(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mh(t,e,n){return Nn&21?(pt(n,e)||(n=Wd(),ie.lanes|=n,Pn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fe=!0),t.memoizedState=n)}function cg(t,e){var n=G;G=n!==0&&4>n?n:4,t(!0);var r=Mo.transition;Mo.transition={};try{t(!1),e()}finally{G=n,Mo.transition=r}}function Fh(){return it().memoizedState}function ug(t,e,n){var r=sn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uh(t))zh(e,n);else if(n=_h(t,e,n,r),n!==null){var s=Re();ft(n,t,r,s),Bh(n,e,r)}}function dg(t,e,n){var r=sn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uh(t))zh(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,pt(a,o)){var l=e.interleaved;l===null?(s.next=s,Al(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=_h(t,e,s,r),n!==null&&(s=Re(),ft(n,t,r,s),Bh(n,e,r))}}function Uh(t){var e=t.alternate;return t===ie||e!==null&&e===ie}function zh(t,e){Xr=Ii=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_l(t,n)}}var Ri={readContext:st,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},hg={readContext:st,useCallback:function(t,e){return wt().memoizedState=[t,e===void 0?null:e],t},useContext:st,useEffect:Xc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ui(4194308,4,$h.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ui(4194308,4,t,e)},useInsertionEffect:function(t,e){return ui(4,2,t,e)},useMemo:function(t,e){var n=wt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ug.bind(null,ie,t),[r.memoizedState,t]},useRef:function(t){var e=wt();return t={current:t},e.memoizedState=t},useState:Qc,useDebugValue:Vl,useDeferredValue:function(t){return wt().memoizedState=t},useTransition:function(){var t=Qc(!1),e=t[0];return t=cg.bind(null,t[1]),wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ie,s=wt();if(ne){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),_e===null)throw Error(T(349));Nn&30||jh(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Xc(Ch.bind(null,r,i,t),[t]),r.flags|=2048,ks(9,Th.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=wt(),e=_e.identifierPrefix;if(ne){var n=It,r=Ot;n=(r&~(1<<32-ht(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lg++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fg={readContext:st,useCallback:Lh,useContext:st,useEffect:Wl,useImperativeHandle:Ah,useInsertionEffect:Ih,useLayoutEffect:Rh,useMemo:Dh,useReducer:Fo,useRef:Oh,useState:function(){return Fo(_s)},useDebugValue:Vl,useDeferredValue:function(t){var e=it();return Mh(e,me.memoizedState,t)},useTransition:function(){var t=Fo(_s)[0],e=it().memoizedState;return[t,e]},useMutableSource:bh,useSyncExternalStore:Eh,useId:Fh,unstable_isNewReconciler:!1},pg={readContext:st,useCallback:Lh,useContext:st,useEffect:Wl,useImperativeHandle:Ah,useInsertionEffect:Ih,useLayoutEffect:Rh,useMemo:Dh,useReducer:Uo,useRef:Oh,useState:function(){return Uo(_s)},useDebugValue:Vl,useDeferredValue:function(t){var e=it();return me===null?e.memoizedState=t:Mh(e,me.memoizedState,t)},useTransition:function(){var t=Uo(_s)[0],e=it().memoizedState;return[t,e]},useMutableSource:bh,useSyncExternalStore:Eh,useId:Fh,unstable_isNewReconciler:!1};function lt(t,e){if(t&&t.defaultProps){e=oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Oa(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eo={isMounted:function(t){return(t=t._reactInternals)?$n(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Re(),s=sn(t),i=Rt(r,s);i.payload=e,n!=null&&(i.callback=n),e=nn(t,i,s),e!==null&&(ft(e,t,s,r),li(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Re(),s=sn(t),i=Rt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=nn(t,i,s),e!==null&&(ft(e,t,s,r),li(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Re(),r=sn(t),s=Rt(n,r);s.tag=2,e!=null&&(s.callback=e),e=nn(t,s,r),e!==null&&(ft(e,t,r,n),li(e,t,r))}};function Zc(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ps(n,r)||!ps(s,i):!0}function Wh(t,e,n){var r=!1,s=ln,i=e.contextType;return typeof i=="object"&&i!==null?i=st(i):(s=ze(e)?Tn:Ne.current,r=e.contextTypes,i=(r=r!=null)?dr(t,s):ln),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function eu(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&eo.enqueueReplaceState(e,e.state,null)}function Ia(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ll(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=st(i):(i=ze(e)?Tn:Ne.current,s.context=dr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Oa(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&eo.enqueueReplaceState(s,s.state,null),Pi(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mr(t,e){try{var n="",r=e;do n+=Bp(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function zo(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ra(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mg=typeof WeakMap=="function"?WeakMap:Map;function Vh(t,e,n){n=Rt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ai||(Ai=!0,Wa=r),Ra(t,e)},n}function Hh(t,e,n){n=Rt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ra(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ra(t,e),typeof r!="function"&&(rn===null?rn=new Set([this]):rn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function tu(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mg;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ng.bind(null,t,e,n),e.then(t,t))}function nu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ru(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rt(-1,1),e.tag=2,nn(n,e,1))),n.lanes|=1),t)}var gg=Ft.ReactCurrentOwner,Fe=!1;function Ie(t,e,n,r){e.child=t===null?xh(e,null,n,r):fr(e,t.child,n,r)}function su(t,e,n,r,s){n=n.render;var i=e.ref;return lr(e,s),r=zl(t,e,n,r,i,s),n=Bl(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mt(t,e,s)):(ne&&n&&Nl(e),e.flags|=1,Ie(t,e,r,s),e.child)}function iu(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Xl(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,qh(t,e,i,r,s)):(t=pi(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ps,n(o,r)&&t.ref===e.ref)return Mt(t,e,s)}return e.flags|=1,t=on(i,r),t.ref=e.ref,t.return=e,e.child=t}function qh(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ps(i,r)&&t.ref===e.ref)if(Fe=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Fe=!0);else return e.lanes=t.lanes,Mt(t,e,s)}return $a(t,e,n,r,s)}function Yh(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Z(rr,Ve),Ve|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Z(rr,Ve),Ve|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Z(rr,Ve),Ve|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Z(rr,Ve),Ve|=r;return Ie(t,e,s,n),e.child}function Kh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $a(t,e,n,r,s){var i=ze(n)?Tn:Ne.current;return i=dr(e,i),lr(e,s),n=zl(t,e,n,r,i,s),r=Bl(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mt(t,e,s)):(ne&&r&&Nl(e),e.flags|=1,Ie(t,e,n,s),e.child)}function ou(t,e,n,r,s){if(ze(n)){var i=!0;Ei(e)}else i=!1;if(lr(e,s),e.stateNode===null)di(t,e),Wh(e,n,r),Ia(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=st(c):(c=ze(n)?Tn:Ne.current,c=dr(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&eu(e,o,r,c),Ht=!1;var f=e.memoizedState;o.state=f,Pi(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Ue.current||Ht?(typeof d=="function"&&(Oa(e,n,d,r),l=e.memoizedState),(a=Ht||Zc(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kh(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:lt(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=st(l):(l=ze(n)?Tn:Ne.current,l=dr(e,l));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&eu(e,o,r,l),Ht=!1,f=e.memoizedState,o.state=f,Pi(e,r,o,s);var y=e.memoizedState;a!==h||f!==y||Ue.current||Ht?(typeof v=="function"&&(Oa(e,n,v,r),y=e.memoizedState),(c=Ht||Zc(e,n,c,r,f,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Aa(t,e,n,r,i,s)}function Aa(t,e,n,r,s,i){Kh(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Hc(e,n,!1),Mt(t,e,i);r=e.stateNode,gg.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fr(e,t.child,null,i),e.child=fr(e,null,a,i)):Ie(t,e,a,i),e.memoizedState=r.state,s&&Hc(e,n,!0),e.child}function Gh(t){var e=t.stateNode;e.pendingContext?Vc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Vc(t,e.context,!1),Dl(t,e.containerInfo)}function au(t,e,n,r,s){return hr(),Ol(s),e.flags|=256,Ie(t,e,n,r),e.child}var La={dehydrated:null,treeContext:null,retryLane:0};function Da(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jh(t,e,n){var r=e.pendingProps,s=se.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Z(se,s&1),t===null)return Na(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ro(o,r,0,null),t=En(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Da(n),e.memoizedState=La,t):Hl(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return vg(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=on(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=on(a,i):(i=En(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Da(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=La,r}return i=t.child,t=i.sibling,r=on(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hl(t,e){return e=ro({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gs(t,e,n,r){return r!==null&&Ol(r),fr(e,t.child,null,n),t=Hl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vg(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=zo(Error(T(422))),Gs(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ro({mode:"visible",children:r.children},s,0,null),i=En(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&fr(e,t.child,null,o),e.child.memoizedState=Da(o),e.memoizedState=La,i);if(!(e.mode&1))return Gs(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(T(419)),r=zo(i,r,void 0),Gs(t,e,o,r)}if(a=(o&t.childLanes)!==0,Fe||a){if(r=_e,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Dt(t,s),ft(r,t,s,-1))}return Ql(),r=zo(Error(T(421))),Gs(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Pg.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,He=tn(s.nextSibling),qe=e,ne=!0,dt=null,t!==null&&(Xe[Ze++]=Ot,Xe[Ze++]=It,Xe[Ze++]=Cn,Ot=t.id,It=t.overflow,Cn=e),e=Hl(e,r.children),e.flags|=4096,e)}function lu(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pa(t.return,e,n)}function Bo(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Qh(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ie(t,e,r.children,n),r=se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lu(t,n,e);else if(t.tag===19)lu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Z(se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Oi(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bo(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Oi(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bo(e,!0,n,null,i);break;case"together":Bo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function di(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=on(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=on(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yg(t,e,n){switch(e.tag){case 3:Gh(e),hr();break;case 5:Sh(e);break;case 1:ze(e.type)&&Ei(e);break;case 4:Dl(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Z(Ci,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Z(se,se.current&1),e.flags|=128,null):n&e.child.childLanes?Jh(t,e,n):(Z(se,se.current&1),t=Mt(t,e,n),t!==null?t.sibling:null);Z(se,se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qh(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Z(se,se.current),r)break;return null;case 22:case 23:return e.lanes=0,Yh(t,e,n)}return Mt(t,e,n)}var Xh,Ma,Zh,ef;Xh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ma=function(){};Zh=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Sn(St.current);var i=null;switch(n){case"input":s=oa(t,s),r=oa(t,r),i=[];break;case"select":s=oe({},s,{value:void 0}),r=oe({},r,{value:void 0}),i=[];break;case"textarea":s=ca(t,s),r=ca(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Si)}da(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(as.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(as.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ee("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};ef=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ar(t,e){if(!ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Te(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wg(t,e,n){var r=e.pendingProps;switch(Pl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(e),null;case 1:return ze(e.type)&&bi(),Te(e),null;case 3:return r=e.stateNode,pr(),te(Ue),te(Ne),Fl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ys(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dt!==null&&(qa(dt),dt=null))),Ma(t,e),Te(e),null;case 5:Ml(e);var s=Sn(ws.current);if(n=e.type,t!==null&&e.stateNode!=null)Zh(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(T(166));return Te(e),null}if(t=Sn(St.current),Ys(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_t]=e,r[vs]=i,t=(e.mode&1)!==0,n){case"dialog":ee("cancel",r),ee("close",r);break;case"iframe":case"object":case"embed":ee("load",r);break;case"video":case"audio":for(s=0;s<Hr.length;s++)ee(Hr[s],r);break;case"source":ee("error",r);break;case"img":case"image":case"link":ee("error",r),ee("load",r);break;case"details":ee("toggle",r);break;case"input":vc(r,i),ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ee("invalid",r);break;case"textarea":wc(r,i),ee("invalid",r)}da(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&qs(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&qs(r.textContent,a,t),s=["children",""+a]):as.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ee("scroll",r)}switch(n){case"input":Ms(r),yc(r,i,!0);break;case"textarea":Ms(r),xc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Si)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_t]=e,t[vs]=r,Xh(t,e,!1,!1),e.stateNode=t;e:{switch(o=ha(n,r),n){case"dialog":ee("cancel",t),ee("close",t),s=r;break;case"iframe":case"object":case"embed":ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<Hr.length;s++)ee(Hr[s],t);s=r;break;case"source":ee("error",t),s=r;break;case"img":case"image":case"link":ee("error",t),ee("load",t),s=r;break;case"details":ee("toggle",t),s=r;break;case"input":vc(t,r),s=oa(t,r),ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=oe({},r,{value:void 0}),ee("invalid",t);break;case"textarea":wc(t,r),s=ca(t,r),ee("invalid",t);break;default:s=r}da(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Od(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Nd(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ls(t,l):typeof l=="number"&&ls(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(as.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ee("scroll",t):l!=null&&ml(t,i,l,o))}switch(n){case"input":Ms(t),yc(t,r,!1);break;case"textarea":Ms(t),xc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+an(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?sr(t,!!r.multiple,i,!1):r.defaultValue!=null&&sr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Si)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Te(e),null;case 6:if(t&&e.stateNode!=null)ef(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(T(166));if(n=Sn(ws.current),Sn(St.current),Ys(e)){if(r=e.stateNode,n=e.memoizedProps,r[_t]=e,(i=r.nodeValue!==n)&&(t=qe,t!==null))switch(t.tag){case 3:qs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qs(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_t]=e,e.stateNode=r}return Te(e),null;case 13:if(te(se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ne&&He!==null&&e.mode&1&&!(e.flags&128))yh(),hr(),e.flags|=98560,i=!1;else if(i=Ys(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(T(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[_t]=e}else hr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Te(e),i=!1}else dt!==null&&(qa(dt),dt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||se.current&1?ge===0&&(ge=3):Ql())),e.updateQueue!==null&&(e.flags|=4),Te(e),null);case 4:return pr(),Ma(t,e),t===null&&ms(e.stateNode.containerInfo),Te(e),null;case 10:return $l(e.type._context),Te(e),null;case 17:return ze(e.type)&&bi(),Te(e),null;case 19:if(te(se),i=e.memoizedState,i===null)return Te(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ar(i,!1);else{if(ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Oi(t),o!==null){for(e.flags|=128,Ar(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Z(se,se.current&1|2),e.child}t=t.sibling}i.tail!==null&&ue()>gr&&(e.flags|=128,r=!0,Ar(i,!1),e.lanes=4194304)}else{if(!r)if(t=Oi(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ar(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ne)return Te(e),null}else 2*ue()-i.renderingStartTime>gr&&n!==1073741824&&(e.flags|=128,r=!0,Ar(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ue(),e.sibling=null,n=se.current,Z(se,r?n&1|2:n&1),e):(Te(e),null);case 22:case 23:return Jl(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ve&1073741824&&(Te(e),e.subtreeFlags&6&&(e.flags|=8192)):Te(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function xg(t,e){switch(Pl(e),e.tag){case 1:return ze(e.type)&&bi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pr(),te(Ue),te(Ne),Fl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ml(e),null;case 13:if(te(se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));hr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return te(se),null;case 4:return pr(),null;case 10:return $l(e.type._context),null;case 22:case 23:return Jl(),null;case 24:return null;default:return null}}var Js=!1,Ce=!1,_g=typeof WeakSet=="function"?WeakSet:Set,O=null;function nr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){le(t,e,r)}else n.current=null}function Fa(t,e,n){try{n()}catch(r){le(t,e,r)}}var cu=!1;function kg(t,e){if(ka=xi,t=ih(),Cl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var v;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)f=h,h=v;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(v=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sa={focusedElem:t,selectionRange:n},xi=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,_=y.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:lt(e.type,w),_);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(x){le(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return y=cu,cu=!1,y}function Zr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fa(e,n,i)}s=s.next}while(s!==r)}}function to(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ua(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tf(t){var e=t.alternate;e!==null&&(t.alternate=null,tf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_t],delete e[vs],delete e[ja],delete e[sg],delete e[ig])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nf(t){return t.tag===5||t.tag===3||t.tag===4}function uu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function za(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Si));else if(r!==4&&(t=t.child,t!==null))for(za(t,e,n),t=t.sibling;t!==null;)za(t,e,n),t=t.sibling}function Ba(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ba(t,e,n),t=t.sibling;t!==null;)Ba(t,e,n),t=t.sibling}var ke=null,ct=!1;function Ut(t,e,n){for(n=n.child;n!==null;)rf(t,e,n),n=n.sibling}function rf(t,e,n){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Yi,n)}catch{}switch(n.tag){case 5:Ce||nr(n,e);case 6:var r=ke,s=ct;ke=null,Ut(t,e,n),ke=r,ct=s,ke!==null&&(ct?(t=ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ke.removeChild(n.stateNode));break;case 18:ke!==null&&(ct?(t=ke,n=n.stateNode,t.nodeType===8?Ao(t.parentNode,n):t.nodeType===1&&Ao(t,n),hs(t)):Ao(ke,n.stateNode));break;case 4:r=ke,s=ct,ke=n.stateNode.containerInfo,ct=!0,Ut(t,e,n),ke=r,ct=s;break;case 0:case 11:case 14:case 15:if(!Ce&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fa(n,e,o),s=s.next}while(s!==r)}Ut(t,e,n);break;case 1:if(!Ce&&(nr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){le(n,e,a)}Ut(t,e,n);break;case 21:Ut(t,e,n);break;case 22:n.mode&1?(Ce=(r=Ce)||n.memoizedState!==null,Ut(t,e,n),Ce=r):Ut(t,e,n);break;default:Ut(t,e,n)}}function du(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _g),e.forEach(function(r){var s=Og.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ot(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ke=a.stateNode,ct=!1;break e;case 3:ke=a.stateNode.containerInfo,ct=!0;break e;case 4:ke=a.stateNode.containerInfo,ct=!0;break e}a=a.return}if(ke===null)throw Error(T(160));rf(i,o,s),ke=null,ct=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){le(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sf(e,t),e=e.sibling}function sf(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ot(e,t),yt(t),r&4){try{Zr(3,t,t.return),to(3,t)}catch(w){le(t,t.return,w)}try{Zr(5,t,t.return)}catch(w){le(t,t.return,w)}}break;case 1:ot(e,t),yt(t),r&512&&n!==null&&nr(n,n.return);break;case 5:if(ot(e,t),yt(t),r&512&&n!==null&&nr(n,n.return),t.flags&32){var s=t.stateNode;try{ls(s,"")}catch(w){le(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&jd(s,i),ha(a,o);var c=ha(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Od(s,h):d==="dangerouslySetInnerHTML"?Nd(s,h):d==="children"?ls(s,h):ml(s,d,h,c)}switch(a){case"input":aa(s,i);break;case"textarea":Td(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?sr(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?sr(s,!!i.multiple,i.defaultValue,!0):sr(s,!!i.multiple,i.multiple?[]:"",!1))}s[vs]=i}catch(w){le(t,t.return,w)}}break;case 6:if(ot(e,t),yt(t),r&4){if(t.stateNode===null)throw Error(T(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){le(t,t.return,w)}}break;case 3:if(ot(e,t),yt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hs(e.containerInfo)}catch(w){le(t,t.return,w)}break;case 4:ot(e,t),yt(t);break;case 13:ot(e,t),yt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Kl=ue())),r&4&&du(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ce=(c=Ce)||d,ot(e,t),Ce=c):ot(e,t),yt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(O=t,d=t.child;d!==null;){for(h=O=d;O!==null;){switch(f=O,v=f.child,f.tag){case 0:case 11:case 14:case 15:Zr(4,f,f.return);break;case 1:nr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){le(r,n,w)}}break;case 5:nr(f,f.return);break;case 22:if(f.memoizedState!==null){fu(h);continue}}v!==null?(v.return=f,O=v):fu(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Pd("display",o))}catch(w){le(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){le(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ot(e,t),yt(t),r&4&&du(t);break;case 21:break;default:ot(e,t),yt(t)}}function yt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nf(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ls(s,""),r.flags&=-33);var i=uu(t);Ba(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=uu(t);za(t,a,o);break;default:throw Error(T(161))}}catch(l){le(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Sg(t,e,n){O=t,of(t)}function of(t,e,n){for(var r=(t.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Js;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ce;a=Js;var c=Ce;if(Js=o,(Ce=l)&&!c)for(O=s;O!==null;)o=O,l=o.child,o.tag===22&&o.memoizedState!==null?pu(s):l!==null?(l.return=o,O=l):pu(s);for(;i!==null;)O=i,of(i),i=i.sibling;O=s,Js=a,Ce=c}hu(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):hu(t)}}function hu(t){for(;O!==null;){var e=O;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ce||to(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ce)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:lt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Jc(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Jc(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&hs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Ce||e.flags&512&&Ua(e)}catch(f){le(e,e.return,f)}}if(e===t){O=null;break}if(n=e.sibling,n!==null){n.return=e.return,O=n;break}O=e.return}}function fu(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var n=e.sibling;if(n!==null){n.return=e.return,O=n;break}O=e.return}}function pu(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{to(4,e)}catch(l){le(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){le(e,s,l)}}var i=e.return;try{Ua(e)}catch(l){le(e,i,l)}break;case 5:var o=e.return;try{Ua(e)}catch(l){le(e,o,l)}}}catch(l){le(e,e.return,l)}if(e===t){O=null;break}var a=e.sibling;if(a!==null){a.return=e.return,O=a;break}O=e.return}}var bg=Math.ceil,$i=Ft.ReactCurrentDispatcher,ql=Ft.ReactCurrentOwner,nt=Ft.ReactCurrentBatchConfig,q=0,_e=null,he=null,Se=0,Ve=0,rr=dn(0),ge=0,Ss=null,Pn=0,no=0,Yl=0,es=null,De=null,Kl=0,gr=1/0,Tt=null,Ai=!1,Wa=null,rn=null,Qs=!1,Jt=null,Li=0,ts=0,Va=null,hi=-1,fi=0;function Re(){return q&6?ue():hi!==-1?hi:hi=ue()}function sn(t){return t.mode&1?q&2&&Se!==0?Se&-Se:ag.transition!==null?(fi===0&&(fi=Wd()),fi):(t=G,t!==0||(t=window.event,t=t===void 0?16:Jd(t.type)),t):1}function ft(t,e,n,r){if(50<ts)throw ts=0,Va=null,Error(T(185));Ps(t,n,r),(!(q&2)||t!==_e)&&(t===_e&&(!(q&2)&&(no|=n),ge===4&&Yt(t,Se)),Be(t,r),n===1&&q===0&&!(e.mode&1)&&(gr=ue()+500,Xi&&hn()))}function Be(t,e){var n=t.callbackNode;am(t,e);var r=wi(t,t===_e?Se:0);if(r===0)n!==null&&Sc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Sc(n),e===1)t.tag===0?og(mu.bind(null,t)):mh(mu.bind(null,t)),ng(function(){!(q&6)&&hn()}),n=null;else{switch(Vd(r)){case 1:n=xl;break;case 4:n=zd;break;case 16:n=yi;break;case 536870912:n=Bd;break;default:n=yi}n=pf(n,af.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function af(t,e){if(hi=-1,fi=0,q&6)throw Error(T(327));var n=t.callbackNode;if(cr()&&t.callbackNode!==n)return null;var r=wi(t,t===_e?Se:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Di(t,r);else{e=r;var s=q;q|=2;var i=cf();(_e!==t||Se!==e)&&(Tt=null,gr=ue()+500,bn(t,e));do try{Tg();break}catch(a){lf(t,a)}while(!0);Rl(),$i.current=i,q=s,he!==null?e=0:(_e=null,Se=0,e=ge)}if(e!==0){if(e===2&&(s=va(t),s!==0&&(r=s,e=Ha(t,s))),e===1)throw n=Ss,bn(t,0),Yt(t,r),Be(t,ue()),n;if(e===6)Yt(t,r);else{if(s=t.current.alternate,!(r&30)&&!Eg(s)&&(e=Di(t,r),e===2&&(i=va(t),i!==0&&(r=i,e=Ha(t,i))),e===1))throw n=Ss,bn(t,0),Yt(t,r),Be(t,ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(T(345));case 2:vn(t,De,Tt);break;case 3:if(Yt(t,r),(r&130023424)===r&&(e=Kl+500-ue(),10<e)){if(wi(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Re(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ea(vn.bind(null,t,De,Tt),e);break}vn(t,De,Tt);break;case 4:if(Yt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ht(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bg(r/1960))-r,10<r){t.timeoutHandle=Ea(vn.bind(null,t,De,Tt),r);break}vn(t,De,Tt);break;case 5:vn(t,De,Tt);break;default:throw Error(T(329))}}}return Be(t,ue()),t.callbackNode===n?af.bind(null,t):null}function Ha(t,e){var n=es;return t.current.memoizedState.isDehydrated&&(bn(t,e).flags|=256),t=Di(t,e),t!==2&&(e=De,De=n,e!==null&&qa(e)),t}function qa(t){De===null?De=t:De.push.apply(De,t)}function Eg(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!pt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yt(t,e){for(e&=~Yl,e&=~no,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ht(e),r=1<<n;t[n]=-1,e&=~r}}function mu(t){if(q&6)throw Error(T(327));cr();var e=wi(t,0);if(!(e&1))return Be(t,ue()),null;var n=Di(t,e);if(t.tag!==0&&n===2){var r=va(t);r!==0&&(e=r,n=Ha(t,r))}if(n===1)throw n=Ss,bn(t,0),Yt(t,e),Be(t,ue()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vn(t,De,Tt),Be(t,ue()),null}function Gl(t,e){var n=q;q|=1;try{return t(e)}finally{q=n,q===0&&(gr=ue()+500,Xi&&hn())}}function On(t){Jt!==null&&Jt.tag===0&&!(q&6)&&cr();var e=q;q|=1;var n=nt.transition,r=G;try{if(nt.transition=null,G=1,t)return t()}finally{G=r,nt.transition=n,q=e,!(q&6)&&hn()}}function Jl(){Ve=rr.current,te(rr)}function bn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tg(n)),he!==null)for(n=he.return;n!==null;){var r=n;switch(Pl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bi();break;case 3:pr(),te(Ue),te(Ne),Fl();break;case 5:Ml(r);break;case 4:pr();break;case 13:te(se);break;case 19:te(se);break;case 10:$l(r.type._context);break;case 22:case 23:Jl()}n=n.return}if(_e=t,he=t=on(t.current,null),Se=Ve=e,ge=0,Ss=null,Yl=no=Pn=0,De=es=null,kn!==null){for(e=0;e<kn.length;e++)if(n=kn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}kn=null}return t}function lf(t,e){do{var n=he;try{if(Rl(),ci.current=Ri,Ii){for(var r=ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ii=!1}if(Nn=0,we=me=ie=null,Xr=!1,xs=0,ql.current=null,n===null||n.return===null){ge=1,Ss=e,he=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Se,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=nu(o);if(v!==null){v.flags&=-257,ru(v,o,a,i,e),v.mode&1&&tu(i,c,e),e=v,l=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){tu(i,c,e),Ql();break e}l=Error(T(426))}}else if(ne&&a.mode&1){var _=nu(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),ru(_,o,a,i,e),Ol(mr(l,a));break e}}i=l=mr(l,a),ge!==4&&(ge=2),es===null?es=[i]:es.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Vh(i,l,e);Gc(i,g);break e;case 1:a=l;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(rn===null||!rn.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Hh(i,a,e);Gc(i,x);break e}}i=i.return}while(i!==null)}df(n)}catch(S){e=S,he===n&&n!==null&&(he=n=n.return);continue}break}while(!0)}function cf(){var t=$i.current;return $i.current=Ri,t===null?Ri:t}function Ql(){(ge===0||ge===3||ge===2)&&(ge=4),_e===null||!(Pn&268435455)&&!(no&268435455)||Yt(_e,Se)}function Di(t,e){var n=q;q|=2;var r=cf();(_e!==t||Se!==e)&&(Tt=null,bn(t,e));do try{jg();break}catch(s){lf(t,s)}while(!0);if(Rl(),q=n,$i.current=r,he!==null)throw Error(T(261));return _e=null,Se=0,ge}function jg(){for(;he!==null;)uf(he)}function Tg(){for(;he!==null&&!Xp();)uf(he)}function uf(t){var e=ff(t.alternate,t,Ve);t.memoizedProps=t.pendingProps,e===null?df(t):he=e,ql.current=null}function df(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xg(n,e),n!==null){n.flags&=32767,he=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ge=6,he=null;return}}else if(n=wg(n,e,Ve),n!==null){he=n;return}if(e=e.sibling,e!==null){he=e;return}he=e=t}while(e!==null);ge===0&&(ge=5)}function vn(t,e,n){var r=G,s=nt.transition;try{nt.transition=null,G=1,Cg(t,e,n,r)}finally{nt.transition=s,G=r}return null}function Cg(t,e,n,r){do cr();while(Jt!==null);if(q&6)throw Error(T(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(lm(t,i),t===_e&&(he=_e=null,Se=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qs||(Qs=!0,pf(yi,function(){return cr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nt.transition,nt.transition=null;var o=G;G=1;var a=q;q|=4,ql.current=null,kg(t,n),sf(n,t),Km(Sa),xi=!!ka,Sa=ka=null,t.current=n,Sg(n),Zp(),q=a,G=o,nt.transition=i}else t.current=n;if(Qs&&(Qs=!1,Jt=t,Li=s),i=t.pendingLanes,i===0&&(rn=null),nm(n.stateNode),Be(t,ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ai)throw Ai=!1,t=Wa,Wa=null,t;return Li&1&&t.tag!==0&&cr(),i=t.pendingLanes,i&1?t===Va?ts++:(ts=0,Va=t):ts=0,hn(),null}function cr(){if(Jt!==null){var t=Vd(Li),e=nt.transition,n=G;try{if(nt.transition=null,G=16>t?16:t,Jt===null)var r=!1;else{if(t=Jt,Jt=null,Li=0,q&6)throw Error(T(331));var s=q;for(q|=4,O=t.current;O!==null;){var i=O,o=i.child;if(O.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(O=c;O!==null;){var d=O;switch(d.tag){case 0:case 11:case 15:Zr(8,d,i)}var h=d.child;if(h!==null)h.return=d,O=h;else for(;O!==null;){d=O;var f=d.sibling,v=d.return;if(tf(d),d===c){O=null;break}if(f!==null){f.return=v,O=f;break}O=v}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}O=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,O=o;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zr(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,O=g;break e}O=i.return}}var p=t.current;for(O=p;O!==null;){o=O;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,O=m;else e:for(o=p;O!==null;){if(a=O,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:to(9,a)}}catch(S){le(a,a.return,S)}if(a===o){O=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,O=x;break e}O=a.return}}if(q=s,hn(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Yi,t)}catch{}r=!0}return r}finally{G=n,nt.transition=e}}return!1}function gu(t,e,n){e=mr(n,e),e=Vh(t,e,1),t=nn(t,e,1),e=Re(),t!==null&&(Ps(t,1,e),Be(t,e))}function le(t,e,n){if(t.tag===3)gu(t,t,n);else for(;e!==null;){if(e.tag===3){gu(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rn===null||!rn.has(r))){t=mr(n,t),t=Hh(e,t,1),e=nn(e,t,1),t=Re(),e!==null&&(Ps(e,1,t),Be(e,t));break}}e=e.return}}function Ng(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Re(),t.pingedLanes|=t.suspendedLanes&n,_e===t&&(Se&n)===n&&(ge===4||ge===3&&(Se&130023424)===Se&&500>ue()-Kl?bn(t,0):Yl|=n),Be(t,e)}function hf(t,e){e===0&&(t.mode&1?(e=zs,zs<<=1,!(zs&130023424)&&(zs=4194304)):e=1);var n=Re();t=Dt(t,e),t!==null&&(Ps(t,e,n),Be(t,n))}function Pg(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hf(t,n)}function Og(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(e),hf(t,n)}var ff;ff=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ue.current)Fe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fe=!1,yg(t,e,n);Fe=!!(t.flags&131072)}else Fe=!1,ne&&e.flags&1048576&&gh(e,Ti,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;di(t,e),t=e.pendingProps;var s=dr(e,Ne.current);lr(e,n),s=zl(null,e,r,t,s,n);var i=Bl();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ze(r)?(i=!0,Ei(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ll(e),s.updater=eo,e.stateNode=s,s._reactInternals=e,Ia(e,r,t,n),e=Aa(null,e,r,!0,i,n)):(e.tag=0,ne&&i&&Nl(e),Ie(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(di(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Rg(r),t=lt(r,t),s){case 0:e=$a(null,e,r,t,n);break e;case 1:e=ou(null,e,r,t,n);break e;case 11:e=su(null,e,r,t,n);break e;case 14:e=iu(null,e,r,lt(r.type,t),n);break e}throw Error(T(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),$a(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),ou(t,e,r,s,n);case 3:e:{if(Gh(e),t===null)throw Error(T(387));r=e.pendingProps,i=e.memoizedState,s=i.element,kh(t,e),Pi(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=mr(Error(T(423)),e),e=au(t,e,r,n,s);break e}else if(r!==s){s=mr(Error(T(424)),e),e=au(t,e,r,n,s);break e}else for(He=tn(e.stateNode.containerInfo.firstChild),qe=e,ne=!0,dt=null,n=xh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hr(),r===s){e=Mt(t,e,n);break e}Ie(t,e,r,n)}e=e.child}return e;case 5:return Sh(e),t===null&&Na(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ba(r,s)?o=null:i!==null&&ba(r,i)&&(e.flags|=32),Kh(t,e),Ie(t,e,o,n),e.child;case 6:return t===null&&Na(e),null;case 13:return Jh(t,e,n);case 4:return Dl(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fr(e,null,r,n):Ie(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),su(t,e,r,s,n);case 7:return Ie(t,e,e.pendingProps,n),e.child;case 8:return Ie(t,e,e.pendingProps.children,n),e.child;case 12:return Ie(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Z(Ci,r._currentValue),r._currentValue=o,i!==null)if(pt(i.value,o)){if(i.children===s.children&&!Ue.current){e=Mt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Rt(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Pa(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(T(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Pa(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ie(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,lr(e,n),s=st(s),r=r(s),e.flags|=1,Ie(t,e,r,n),e.child;case 14:return r=e.type,s=lt(r,e.pendingProps),s=lt(r.type,s),iu(t,e,r,s,n);case 15:return qh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),di(t,e),e.tag=1,ze(r)?(t=!0,Ei(e)):t=!1,lr(e,n),Wh(e,r,s),Ia(e,r,s,n),Aa(null,e,r,!0,t,n);case 19:return Qh(t,e,n);case 22:return Yh(t,e,n)}throw Error(T(156,e.tag))};function pf(t,e){return Ud(t,e)}function Ig(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function et(t,e,n,r){return new Ig(t,e,n,r)}function Xl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rg(t){if(typeof t=="function")return Xl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vl)return 11;if(t===yl)return 14}return 2}function on(t,e){var n=t.alternate;return n===null?(n=et(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pi(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Xl(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yn:return En(n.children,s,i,e);case gl:o=8,s|=8;break;case na:return t=et(12,n,e,s|2),t.elementType=na,t.lanes=i,t;case ra:return t=et(13,n,e,s),t.elementType=ra,t.lanes=i,t;case sa:return t=et(19,n,e,s),t.elementType=sa,t.lanes=i,t;case Sd:return ro(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _d:o=10;break e;case kd:o=9;break e;case vl:o=11;break e;case yl:o=14;break e;case Vt:o=16,r=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=et(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function En(t,e,n,r){return t=et(7,t,r,e),t.lanes=n,t}function ro(t,e,n,r){return t=et(22,t,r,e),t.elementType=Sd,t.lanes=n,t.stateNode={isHidden:!1},t}function Wo(t,e,n){return t=et(6,t,null,e),t.lanes=n,t}function Vo(t,e,n){return e=et(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $g(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bo(0),this.expirationTimes=bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Zl(t,e,n,r,s,i,o,a,l){return t=new $g(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=et(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ll(i),t}function Ag(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mf(t){if(!t)return ln;t=t._reactInternals;e:{if($n(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ze(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(ze(n))return ph(t,n,e)}return e}function gf(t,e,n,r,s,i,o,a,l){return t=Zl(n,r,!0,t,s,i,o,a,l),t.context=mf(null),n=t.current,r=Re(),s=sn(n),i=Rt(r,s),i.callback=e??null,nn(n,i,s),t.current.lanes=s,Ps(t,s,r),Be(t,r),t}function so(t,e,n,r){var s=e.current,i=Re(),o=sn(s);return n=mf(n),e.context===null?e.context=n:e.pendingContext=n,e=Rt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nn(s,e,o),t!==null&&(ft(t,s,o,i),li(t,s,o)),o}function Mi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ec(t,e){vu(t,e),(t=t.alternate)&&vu(t,e)}function Lg(){return null}var vf=typeof reportError=="function"?reportError:function(t){console.error(t)};function tc(t){this._internalRoot=t}io.prototype.render=tc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));so(t,e,null,null)};io.prototype.unmount=tc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;On(function(){so(null,t,null,null)}),e[Lt]=null}};function io(t){this._internalRoot=t}io.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qt.length&&e!==0&&e<qt[n].priority;n++);qt.splice(n,0,t),n===0&&Gd(t)}};function nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function oo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yu(){}function Dg(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Mi(o);i.call(c)}}var o=gf(e,r,t,0,null,!1,!1,"",yu);return t._reactRootContainer=o,t[Lt]=o.current,ms(t.nodeType===8?t.parentNode:t),On(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Mi(l);a.call(c)}}var l=Zl(t,0,!1,null,null,!1,!1,"",yu);return t._reactRootContainer=l,t[Lt]=l.current,ms(t.nodeType===8?t.parentNode:t),On(function(){so(e,l,n,r)}),l}function ao(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Mi(o);a.call(l)}}so(e,o,t,s)}else o=Dg(n,e,t,s,r);return Mi(o)}Hd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vr(e.pendingLanes);n!==0&&(_l(e,n|1),Be(e,ue()),!(q&6)&&(gr=ue()+500,hn()))}break;case 13:On(function(){var r=Dt(t,1);if(r!==null){var s=Re();ft(r,t,1,s)}}),ec(t,1)}};kl=function(t){if(t.tag===13){var e=Dt(t,134217728);if(e!==null){var n=Re();ft(e,t,134217728,n)}ec(t,134217728)}};qd=function(t){if(t.tag===13){var e=sn(t),n=Dt(t,e);if(n!==null){var r=Re();ft(n,t,e,r)}ec(t,e)}};Yd=function(){return G};Kd=function(t,e){var n=G;try{return G=t,e()}finally{G=n}};pa=function(t,e,n){switch(e){case"input":if(aa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Qi(r);if(!s)throw Error(T(90));Ed(r),aa(r,s)}}}break;case"textarea":Td(t,n);break;case"select":e=n.value,e!=null&&sr(t,!!n.multiple,e,!1)}};$d=Gl;Ad=On;var Mg={usingClientEntryPoint:!1,Events:[Is,Qn,Qi,Id,Rd,Gl]},Lr={findFiberByHostInstance:_n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fg={bundleType:Lr.bundleType,version:Lr.version,rendererPackageName:Lr.rendererPackageName,rendererConfig:Lr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ft.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Md(t),t===null?null:t.stateNode},findFiberByHostInstance:Lr.findFiberByHostInstance||Lg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xs.isDisabled&&Xs.supportsFiber)try{Yi=Xs.inject(Fg),kt=Xs}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mg;Ke.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nc(e))throw Error(T(200));return Ag(t,e,null,n)};Ke.createRoot=function(t,e){if(!nc(t))throw Error(T(299));var n=!1,r="",s=vf;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Zl(t,1,!1,null,null,n,!1,r,s),t[Lt]=e.current,ms(t.nodeType===8?t.parentNode:t),new tc(e)};Ke.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Md(e),t=t===null?null:t.stateNode,t};Ke.flushSync=function(t){return On(t)};Ke.hydrate=function(t,e,n){if(!oo(e))throw Error(T(200));return ao(null,t,e,!0,n)};Ke.hydrateRoot=function(t,e,n){if(!nc(t))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=vf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gf(e,null,t,1,n??null,s,!1,i,o),t[Lt]=e.current,ms(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new io(e)};Ke.render=function(t,e,n){if(!oo(e))throw Error(T(200));return ao(null,t,e,!1,n)};Ke.unmountComponentAtNode=function(t){if(!oo(t))throw Error(T(40));return t._reactRootContainer?(On(function(){ao(null,null,t,!1,function(){t._reactRootContainer=null,t[Lt]=null})}),!0):!1};Ke.unstable_batchedUpdates=Gl;Ke.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!oo(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return ao(t,e,n,!1,r)};Ke.version="18.3.1-next-f1338f8080-20240426";function yf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yf)}catch(t){console.error(t)}}yf(),vd.exports=Ke;var Ug=vd.exports,wf,wu=Ug;wf=wu.createRoot,wu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bs(){return bs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bs.apply(this,arguments)}var Qt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qt||(Qt={}));const xu="popstate";function zg(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Ya("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:_f(s)}return Wg(e,n,null,t)}function ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Bg(){return Math.random().toString(36).substr(2,8)}function _u(t,e){return{usr:t.state,key:t.key,idx:e}}function Ya(t,e,n,r){return n===void 0&&(n=null),bs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?kr(e):e,{state:n,key:e&&e.key||r||Bg()})}function _f(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function kr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Wg(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Qt.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(bs({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Qt.Pop;let _=d(),g=_==null?null:_-c;c=_,l&&l({action:a,location:w.location,delta:g})}function f(_,g){a=Qt.Push;let p=Ya(w.location,_,g);c=d()+1;let m=_u(p,c),x=w.createHref(p);try{o.pushState(m,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(x)}i&&l&&l({action:a,location:w.location,delta:1})}function v(_,g){a=Qt.Replace;let p=Ya(w.location,_,g);c=d();let m=_u(p,c),x=w.createHref(p);o.replaceState(m,"",x),i&&l&&l({action:a,location:w.location,delta:0})}function y(_){let g=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof _=="string"?_:_f(_);return p=p.replace(/ $/,"%20"),ve(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let w={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(xu,h),l=_,()=>{s.removeEventListener(xu,h),l=null}},createHref(_){return e(s,_)},createURL:y,encodeLocation(_){let g=y(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:v,go(_){return o.go(_)}};return w}var ku;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ku||(ku={}));function Vg(t,e,n){return n===void 0&&(n="/"),Hg(t,e,n,!1)}function Hg(t,e,n,r){let s=typeof e=="string"?kr(e):e,i=bf(s.pathname||"/",n);if(i==null)return null;let o=kf(t);qg(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=r0(i);a=t0(o[l],c,r)}return a}function kf(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ve(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=jn([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),kf(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Zg(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Sf(i.path))s(i,o,l)}),e}function Sf(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Sf(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function qg(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:e0(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Yg=/^:[\w-]+$/,Kg=3,Gg=2,Jg=1,Qg=10,Xg=-2,Su=t=>t==="*";function Zg(t,e){let n=t.split("/"),r=n.length;return n.some(Su)&&(r+=Xg),e&&(r+=Gg),n.filter(s=>!Su(s)).reduce((s,i)=>s+(Yg.test(i)?Kg:i===""?Jg:Qg),r)}function e0(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function t0(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=bu({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=bu({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:jn([i,h.pathname]),pathnameBase:c0(jn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=jn([i,h.pathnameBase]))}return o}function bu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=n0(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:v}=d;if(f==="*"){let w=a[h]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=a[h];return v&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function n0(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function r0(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function s0(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?kr(t):t;return{pathname:n?n.startsWith("/")?n:i0(n,e):e,search:u0(r),hash:d0(s)}}function i0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ho(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function o0(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function a0(t,e){let n=o0(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function l0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=kr(t):(s=bs({},t),ve(!s.pathname||!s.pathname.includes("?"),Ho("?","pathname","search",s)),ve(!s.pathname||!s.pathname.includes("#"),Ho("#","pathname","hash",s)),ve(!s.search||!s.search.includes("#"),Ho("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=s0(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const jn=t=>t.join("/").replace(/\/\/+/g,"/"),c0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),u0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,d0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function h0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ef=["post","put","patch","delete"];new Set(Ef);const f0=["get",...Ef];new Set(f0);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Es(){return Es=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Es.apply(this,arguments)}const rc=k.createContext(null),p0=k.createContext(null),lo=k.createContext(null),co=k.createContext(null),Sr=k.createContext({outlet:null,matches:[],isDataRoute:!1}),jf=k.createContext(null);function uo(){return k.useContext(co)!=null}function Tf(){return uo()||ve(!1),k.useContext(co).location}function Cf(t){k.useContext(lo).static||k.useLayoutEffect(t)}function m0(){let{isDataRoute:t}=k.useContext(Sr);return t?C0():g0()}function g0(){uo()||ve(!1);let t=k.useContext(rc),{basename:e,future:n,navigator:r}=k.useContext(lo),{matches:s}=k.useContext(Sr),{pathname:i}=Tf(),o=JSON.stringify(a0(s,n.v7_relativeSplatPath)),a=k.useRef(!1);return Cf(()=>{a.current=!0}),k.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=l0(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:jn([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function v0(t,e){return y0(t,e)}function y0(t,e,n,r){uo()||ve(!1);let{navigator:s}=k.useContext(lo),{matches:i}=k.useContext(Sr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Tf(),d;if(e){var h;let _=typeof e=="string"?kr(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||ve(!1),d=_}else d=c;let f=d.pathname||"/",v=f;if(l!=="/"){let _=l.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=Vg(t,{pathname:v}),w=S0(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:jn([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:jn([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&w?k.createElement(co.Provider,{value:{location:Es({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Qt.Pop}},w):w}function w0(){let t=T0(),e=h0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const x0=k.createElement(w0,null);class _0 extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Sr.Provider,{value:this.props.routeContext},k.createElement(jf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function k0(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(rc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Sr.Provider,{value:e},r)}function S0(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||ve(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:v}=n,y=h.route.loader&&f[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let v,y=!1,w=null,_=null;n&&(v=a&&h.route.id?a[h.route.id]:void 0,w=h.route.errorElement||x0,l&&(c<0&&f===0?(y=!0,_=null):c===f&&(y=!0,_=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),p=()=>{let m;return v?m=w:y?m=_:h.route.Component?m=k.createElement(h.route.Component,null):h.route.element?m=h.route.element:m=d,k.createElement(k0,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:m})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(_0,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var Nf=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Nf||{}),Fi=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Fi||{});function b0(t){let e=k.useContext(rc);return e||ve(!1),e}function E0(t){let e=k.useContext(p0);return e||ve(!1),e}function j0(t){let e=k.useContext(Sr);return e||ve(!1),e}function Pf(t){let e=j0(),n=e.matches[e.matches.length-1];return n.route.id||ve(!1),n.route.id}function T0(){var t;let e=k.useContext(jf),n=E0(Fi.UseRouteError),r=Pf(Fi.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function C0(){let{router:t}=b0(Nf.UseNavigateStable),e=Pf(Fi.UseNavigateStable),n=k.useRef(!1);return Cf(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Es({fromRouteId:e},i)))},[t,e])}function N0(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ka(t){ve(!1)}function P0(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Qt.Pop,navigator:i,static:o=!1,future:a}=t;uo()&&ve(!1);let l=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:i,static:o,future:Es({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=kr(r));let{pathname:d="/",search:h="",hash:f="",state:v=null,key:y="default"}=r,w=k.useMemo(()=>{let _=bf(d,l);return _==null?null:{location:{pathname:_,search:h,hash:f,state:v,key:y},navigationType:s}},[l,d,h,f,v,y,s]);return w==null?null:k.createElement(lo.Provider,{value:c},k.createElement(co.Provider,{children:n,value:w}))}function O0(t){let{children:e,location:n}=t;return v0(Ga(e),n)}new Promise(()=>{});function Ga(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,Ga(r.props.children,i));return}r.type!==Ka&&ve(!1),!r.props.index||!r.props.children||ve(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ga(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const I0="6";try{window.__reactRouterVersion=I0}catch{}const R0="startTransition",Eu=Np[R0];function $0(t){let{basename:e,children:n,future:r,window:s}=t,i=k.useRef();i.current==null&&(i.current=zg({window:s,v5Compat:!0}));let o=i.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=k.useCallback(h=>{c&&Eu?Eu(()=>l(h)):l(h)},[l,c]);return k.useLayoutEffect(()=>o.listen(d),[o,d]),k.useEffect(()=>N0(r),[r]),k.createElement(P0,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var ju;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ju||(ju={}));var Tu;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Tu||(Tu={}));const A0="modulepreload",L0=function(t){return"/"+t},Cu={},In=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=L0(l),l in Cu)return;Cu[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":A0,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,v)=>{h.addEventListener("load",f),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},is=class is{static configure(e){this.config=e,this.loadStoredTokens()}static loadStoredTokens(){this.accessToken=localStorage.getItem("ms_access_token"),this.refreshToken=localStorage.getItem("ms_refresh_token")}static initiateLogin(){if(!this.config)throw new Error("Microsoft service not configured. Call configure() first.");console.log("Initiating Microsoft login with config:",{clientId:this.config.clientId,tenantId:this.config.tenantId,redirectUri:this.config.redirectUri});const e=new URL(`https://login.microsoftonline.com/${this.config.tenantId}/oauth2/v2.0/authorize`);e.searchParams.set("client_id",this.config.clientId),e.searchParams.set("response_type","token"),e.searchParams.set("redirect_uri",this.config.redirectUri),e.searchParams.set("scope",this.config.scopes.join(" ")),e.searchParams.set("response_mode","fragment"),e.searchParams.set("state",Math.random().toString(36).substring(2,15)),console.log("Redirecting to Microsoft authentication:",e.toString()),window.location.href=e.toString()}static handleImplicitCallback(e,n){console.log("Processing implicit flow callback");const r=n.get("error"),s=n.get("error_description");if(r)throw new Error(`Authentication failed: ${r} - ${s}`);if(!e)throw new Error("No access token received");this.accessToken=e;const i=n.get("expires_in"),o=n.get("scope");if(console.log("Token information:",{hasAccessToken:!!e,expiresIn:i,scope:o}),localStorage.setItem("ms_access_token",e),i){const a=Date.now()+parseInt(i)*1e3;localStorage.setItem("ms_token_expires",a.toString()),console.log("Token expires at:",new Date(a).toISOString())}else{const a=Date.now()+36e5;localStorage.setItem("ms_token_expires",a.toString()),console.log("No expiration provided, setting default expiration at:",new Date(a).toISOString())}console.log("Tokens stored successfully")}static async refreshAccessToken(){if(!this.config||!this.refreshToken)return!1;try{const e=`https://login.microsoftonline.com/${this.config.tenantId}/oauth2/v2.0/token`,n=new URLSearchParams({client_id:this.config.clientId,scope:this.config.scopes.join(" "),refresh_token:this.refreshToken,grant_type:"refresh_token"}),r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!r.ok)return console.error("Token refresh failed:",r.statusText),!1;const s=await r.json();return this.accessToken=s.access_token,s.refresh_token&&(this.refreshToken=s.refresh_token),localStorage.setItem("ms_access_token",s.access_token),s.refresh_token&&localStorage.setItem("ms_refresh_token",s.refresh_token),localStorage.setItem("ms_token_expires",(Date.now()+s.expires_in*1e3).toString()),!0}catch(e){return console.error("Token refresh error:",e),!1}}static isAuthenticated(){if(this.loadStoredTokens(),this.accessToken){const e=localStorage.getItem("ms_token_expires");return!e||Date.now()<parseInt(e)?!0:(console.log("Token expired, clearing stored tokens"),this.logout(),!1)}return!1}static async ensureValidToken(){if(!this.config)throw new Error("Microsoft service not configured.");return!!(this.isAuthenticated()||this.refreshToken&&await this.refreshAccessToken())}static async uploadInvoiceToOneDrive(e,n){try{console.log("Starting OneDrive upload for invoice:",e.id),console.log("Current authentication status:",this.isAuthenticated()),console.log("Access token present:",!!this.accessToken);const r=await this.ensureValidToken();if(console.log("Valid token check result:",r),!r)return console.error("Authentication failed - no valid token"),{success:!1,error:"Authentication required. Please connect to Microsoft OneDrive first."};const{SettingsService:s}=await In(async()=>{const{SettingsService:y}=await Promise.resolve().then(()=>Xu);return{SettingsService:y}},void 0),o=(await s.getSettings()).onedrive.invoiceDirectory,a=e.customer_name.replace(/[^a-zA-Z0-9]/g,""),l=e.file_type==="pdf"?"pdf":"jpg",c=`${a}-Receipt-${e.invoice_date}.${l}`;await this.ensureInvoicesFolderExists(o);const d=await fetch(`https://graph.microsoft.com/v1.0/me/drive/root:/${o}/${c}:/content`,{method:"PUT",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":e.file_type==="pdf"?"application/pdf":"image/jpeg"},body:n});if(!d.ok)throw d.status===401?(this.accessToken=null,this.refreshToken=null,localStorage.removeItem("ms_access_token"),localStorage.removeItem("ms_refresh_token"),localStorage.removeItem("ms_token_expires"),new Error("Authentication expired. Please log in again.")):new Error(`Failed to upload to OneDrive: ${d.statusText}`);const h=await d.json(),f=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${h.id}/createLink`,{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({type:"view",scope:"anonymous"})});let v=h.webUrl;return f.ok&&(v=(await f.json()).link.webUrl),await this.appendToExcel({...e,onedrive_file_url:v}),{success:!0,fileUrl:v}}catch(r){return console.error("OneDrive upload failed:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async ensureInvoicesFolderExists(e="Invoices"){try{(await fetch(`https://graph.microsoft.com/v1.0/me/drive/root:/${e}`,{headers:{Authorization:`Bearer ${this.accessToken}`}})).status===404&&await this.createFolderPath(e)}catch(n){console.warn(`Could not ensure folder ${e} exists:`,n)}}static async createFolderPath(e){const n=e.split("/").filter(s=>s.length>0);let r="";for(const s of n){const i=r||"root";r=r?`${r}/${s}`:s;try{if((await fetch(`https://graph.microsoft.com/v1.0/me/drive/root:/${r}`,{headers:{Authorization:`Bearer ${this.accessToken}`}})).status===404){const a=i==="root"?"https://graph.microsoft.com/v1.0/me/drive/root/children":`https://graph.microsoft.com/v1.0/me/drive/root:/${i.replace(s,"")}:/children`;await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({name:s,folder:{},"@microsoft.graph.conflictBehavior":"rename"})})}}catch(o){console.warn(`Failed to create folder part ${s}:`,o)}}}static async appendToExcel(e){return this.syncToExcel(e,"append")}static async updateInExcel(e){return this.syncToExcel(e,"update")}static async syncToExcel(e,n){var o;if(!await this.ensureValidToken())throw new Error("Authentication required. Please connect to Microsoft OneDrive first.");const i=((o=JSON.parse(localStorage.getItem("app_settings")||"{}").onedrive)==null?void 0:o.excelFileName)||"Invoice_Tracker.xlsx";try{const a=await this.ensureExcelFileExists(i);console.log("excelFileId: "+a),await this.ensureExcelTableExists(a);const l=this.createDisplayFileName(e),c=[e.sequence_id||0,e.customer_name,e.invoice_date,e.description_category==="Other"?e.description_other:e.description_category,e.invoice_amount,"",l,e.onedrive_file_url||""];if(n==="update")if(console.log("Update operation: checking for existing row"),await this.findExistingRow(a,e)){if(console.log("Found existing row, updating it"),!await this.updateExistingRow(a,e,c))throw console.log("Update failed, but row exists - not appending to avoid duplicates"),new Error("Failed to update existing Excel row")}else console.log("No existing row found for update operation, appending as new row instead"),await this.appendRowToExcel(a,c);else{if(console.log("Append operation: checking for duplicates"),await this.findExistingRow(a,e))throw console.log("Duplicate found, not appending"),new Error("Invoice already exists in Excel");console.log("No duplicate found, appending new row"),await this.appendRowToExcel(a,c)}}catch(a){throw console.error("Excel append failed:",a),a}}static createDisplayFileName(e){const n=e.customer_name.replace(/[^a-zA-Z0-9]/g,""),r=e.file_type==="pdf"?"pdf":"jpg";return`${n}-Receipt-${e.invoice_date}.${r}`}static async appendRowToExcel(e,n){var i;let s=0;for(;s<3;)try{console.log("Attempting to append Excel row for invoice:",e,n);const o=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/tables/Table1/rows`,{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({values:[n]})});if(o.ok){console.log("Successfully appended to Excel table"),await this.addHyperlinkFormula(e,n);return}const a=await o.text();if(((i=JSON.parse(a).error)==null?void 0:i.code)==="ItemNotFound")throw new Error(`Table not found, retrying: ${a}`);console.error("Table append failed, trying direct worksheet append:",a),await this.appendToWorksheetDirectly(e,n),await this.addHyperlinkFormula(e,n);return}catch(o){if(s++,console.error(`Table append attempt ${s} failed:`,o),s>=3){console.log("All table append attempts failed, using fallback method"),await this.appendToWorksheetDirectly(e,n);return}const a=Math.pow(2,s-1)*1e3;console.log(`Retrying table append in ${a}ms...`),await new Promise(l=>setTimeout(l,a))}}static async findExistingRow(e,n){try{const r=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/tables/Table1/rows`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!r.ok)return console.log("Could not fetch table rows for duplicate check"),!1;const i=(await r.json()).value;for(let o=0;o<i.length;o++){const l=i[o].values[0],c=n.sequence_id&&l[0]===n.sequence_id,d=!n.sequence_id&&l[1]===n.customer_name&&l[2]===n.invoice_date&&parseFloat(l[4])===n.invoice_amount&&l[3]===(n.description_category==="Other"?n.description_other:n.description_category);if(c||d)return console.log("Found existing row at index:",o),!0}return console.log("No existing row found"),!1}catch(r){return console.error("Error checking for existing row:",r),!1}}static async updateExistingRow(e,n,r){try{console.log("Attempting to update existing Excel row for invoice:",n.id,r);const s=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/tables/Table1/rows`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!s.ok)return console.log("Could not fetch table rows, falling back to append"),!1;const o=(await s.json()).value;let a=-1;for(let c=0;c<o.length;c++){const h=o[c].values[0],f=n.sequence_id&&h[0]===n.sequence_id,v=!n.sequence_id&&h[1]===n.customer_name&&h[2]===n.invoice_date&&parseFloat(h[4])===n.invoice_amount&&h[3]===(n.description_category==="Other"?n.description_other:n.description_category);if(f||v){a=c,console.log("Found matching row at index:",c);break}}if(a===-1)return console.log("No matching row found, will append new row"),!1;const l=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/tables/Table1/rows/itemAt(index=${a})`,{method:"PATCH",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({values:[r]})});if(l.ok)return console.log("Successfully updated existing Excel row"),!0;{const c=await l.text();return console.error("Failed to update Excel row:",c),!1}}catch(s){return console.error("Error updating Excel row:",s),!1}}static async ensureExcelFileExists(e="Invoice_Tracker.xlsx"){try{const n=await fetch(`https://graph.microsoft.com/v1.0/me/drive/root/search(q='${e}')`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(n.ok){const r=await n.json();if(r.value&&r.value.length>0)return r.value[0].id}return await this.createExcelFile(e)}catch(n){throw console.error("Error ensuring Excel file exists:",n),n}}static async createExcelFile(e="Invoice_Tracker.xlsx"){console.log("Creating new Excel file:",e);const n=await fetch("https://graph.microsoft.com/v1.0/me/drive/root/children",{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({name:e,file:{},"@microsoft.graph.conflictBehavior":"rename"})});if(!n.ok){const i=await n.text();throw new Error(`Failed to create Excel file: ${i}`)}const s=(await n.json()).id;return console.log("Excel file created with ID:",s),await new Promise(i=>setTimeout(i,3e3)),await this.ensureExcelTableExists(s),s}static async ensureExcelTableExists(e){var a;const n=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/worksheets`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error(`Failed to get worksheets: ${n.statusText}`);const r=await n.json();if(!r.value||r.value.length===0)throw new Error("No worksheets found in Excel file");const s=((a=r.value[0])==null?void 0:a.name)||"Sheet1",i=3;let o=0;for(;o<i;)try{console.log(`Table creation attempt ${o+1}`);const l=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/tables`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(l.status===200){const h=await l.json();if(console.log("tablesData:",JSON.stringify(h,null,2)),h.value.find(v=>v.name==="Table1")){console.log("Table1 already exists");return}}else if(l.status!==404)throw new Error(`Unexpected status ${l.status} when checking tables`);console.log("Creating Table1 in Excel file");const c=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/worksheets/${s}/tables/add`,{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({address:"A1:H1",hasHeaders:!0,name:"Table1"})});if(!c.ok){const h=await c.text();throw new Error(`Failed to create Excel table: ${h}`)}const d=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/tables/Table1/headerRowRange`,{method:"PATCH",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({values:[["ID","Customer Name","Invoice Date","Description","Amount","File Link","Filename","URL"]]})});if(!d.ok){const h=await d.text();throw new Error(`Failed to set Excel table headers: ${h}`)}console.log("Table1 created successfully");return}catch(l){if(o++,console.error(`Table creation attempt ${o} failed:`,l),o>=i)throw l;const c=Math.pow(2,o)*1e3;console.log(`Retrying table creation in ${c}ms...`),await new Promise(d=>setTimeout(d,c))}}static async appendToWorksheetDirectly(e,n){let s=0;for(;s<3;)try{await this.attemptWorksheetAppend(e,n);return}catch(i){if(s++,console.warn(`Worksheet append attempt ${s} failed:`,i),s>=3)throw i;const o=Math.pow(2,s-1)*1e3;console.log(`Retrying in ${o}ms...`),await new Promise(a=>setTimeout(a,o))}}static async attemptWorksheetAppend(e,n){var r;try{console.log("Attempting direct worksheet append as fallback");const s=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/worksheets`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!s.ok)throw new Error(`Failed to get worksheets: ${s.statusText}`);const o=((r=(await s.json()).value[0])==null?void 0:r.name)||"Sheet1",a=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/worksheets/${o}/usedRange`,{headers:{Authorization:`Bearer ${this.accessToken}`}});let l=2;a.ok&&(l=(await a.json()).rowCount+1);const c=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/worksheets/${o}/range(address='A${l}:H${l}')`,{method:"PATCH",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({values:[n]})});if(c.ok)console.log("Successfully appended data directly to worksheet");else{const d=await c.text();throw new Error(`Direct worksheet append failed: ${d}`)}}catch(s){throw s}}static async addHyperlinkFormula(e,n){try{const r=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/tables/Table1/rows`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!r.ok){console.warn("Could not get table size for HYPERLINK formula");return}const o=(await r.json()).value.length+1,a=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/worksheets/Sheet1/range(address='F${o}')`,{method:"PATCH",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({formulas:[[`=HYPERLINK(H${o},G${o})`]]})});if(a.ok)console.log("Successfully added HYPERLINK formula to column F");else{const l=await a.text();console.warn("Failed to add HYPERLINK formula:",l)}}catch(r){console.warn("Error adding HYPERLINK formula:",r)}}static async deleteFileFromOneDrive(e){try{return await this.ensureValidToken()?(console.log("Attempting to delete OneDrive file:",e),console.log("OneDrive file deletion not implemented for sharing URLs"),{success:!0}):{success:!1,error:"Authentication required. Please connect to Microsoft OneDrive first."}}catch(n){return console.error("OneDrive file deletion failed:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async removeFromExcel(e){try{if(!await this.ensureValidToken())return{success:!1,error:"Authentication required"};const{SettingsService:r}=await In(async()=>{const{SettingsService:l}=await Promise.resolve().then(()=>Xu);return{SettingsService:l}},void 0),i=(await r.getSettings()).onedrive.excelFileName,o=await this.findExcelFile(i);if(!o)return{success:!0};const a=await this.deleteExcelRow(o,e);return{success:a,error:a?void 0:"Failed to find or delete Excel row"}}catch(n){return console.error("Excel row deletion failed:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async findExcelFile(e){try{const n=await fetch(`https://graph.microsoft.com/v1.0/me/drive/root/search(q='${e}')`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(n.ok){const r=await n.json();if(r.value&&r.value.length>0)return r.value[0].id}return null}catch(n){return console.error("Error finding Excel file:",n),null}}static async deleteExcelRow(e,n){try{const r=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/tables/Table1/rows`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!r.ok)return console.log("Could not fetch table rows for deletion"),!1;const i=(await r.json()).value;let o=-1;for(let l=0;l<i.length;l++){const d=i[l].values[0],h=n.sequence_id&&d[0]===n.sequence_id,f=!n.sequence_id&&d[1]===n.customer_name&&d[2]===n.invoice_date&&parseFloat(d[4])===n.invoice_amount&&d[3]===(n.description_category==="Other"?n.description_other:n.description_category);if(h||f){o=l,console.log("Found matching row for deletion at index:",l);break}}if(o===-1)return console.log("No matching row found for deletion"),!0;const a=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/workbook/tables/Table1/rows/itemAt(index=${o})`,{method:"DELETE",headers:{Authorization:`Bearer ${this.accessToken}`}});if(a.ok)return console.log("Successfully deleted Excel row"),!0;{const l=await a.text();return console.error("Failed to delete Excel row:",l),!1}}catch(r){return console.error("Error deleting Excel row:",r),!1}}static async simulateOneDriveUpload(e){return await new Promise(r=>setTimeout(r,2e3)),Math.random()>.1?{success:!0,fileUrl:`https://1drv.ms/i/s!${`invoice_${e.customer_name.replace(/\s+/g,"_")}_${e.invoice_date}`}_${Date.now()}`}:{success:!1,error:"Simulated upload failure - please try again"}}static checkTokenValidity(){if(this.loadStoredTokens(),!this.accessToken)return{isValid:!1};const e=localStorage.getItem("ms_token_expires");if(!e)return{isValid:!0};const n=parseInt(e),r=Date.now(),s=n-r;return{isValid:s>0,expiresAt:new Date(n),timeRemaining:Math.max(0,s)}}static logout(){this.accessToken=null,this.refreshToken=null,localStorage.removeItem("ms_access_token"),localStorage.removeItem("ms_refresh_token"),localStorage.removeItem("ms_token_expires"),console.log("Microsoft authentication cleared")}static async listFolders(e=""){if(console.log("listFolders called with path:",e),!await this.ensureValidToken())throw console.error("No valid token for listFolders"),new Error("Authentication required");console.log("Using access token:",this.accessToken?"present":"missing");try{const r=e?`https://graph.microsoft.com/v1.0/me/drive/root:/${e}:/children`:"https://graph.microsoft.com/v1.0/me/drive/root/children";console.log("Making request to endpoint:",r);const s=await fetch(r,{headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}});if(console.log("Response status:",s.status),console.log("Response headers:",Object.fromEntries(s.headers.entries())),!s.ok){const o=await s.text();throw console.error("API Error Response:",o),new Error(`Failed to list folders: ${s.statusText}`)}const i=await s.json();return console.log("API Response data:",i),i.value.filter(o=>o.folder).map(o=>({name:o.name,path:e?`${e}/${o.name}`:o.name,isFolder:!0}))}catch(r){throw console.error("Failed to list folders:",r),r}}static async listExcelFiles(){if(!await this.ensureValidToken())throw new Error("Authentication required");try{const n=await fetch("https://graph.microsoft.com/v1.0/me/drive/root/search(q='.xlsx')",{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error(`Failed to list Excel files: ${n.statusText}`);return(await n.json()).value.map(s=>{var i;return{name:s.name,path:(i=s.parentReference)!=null&&i.path?`${s.parentReference.path}/${s.name}`:`/${s.name}`}})}catch(n){throw console.error("Failed to list Excel files:",n),n}}static async listExcelFilesInPath(e=""){if(!await this.ensureValidToken())throw new Error("Authentication required");try{const r=e?`https://graph.microsoft.com/v1.0/me/drive/root:/${e}:/children`:"https://graph.microsoft.com/v1.0/me/drive/root/children";console.log("Making request to endpoint for Excel files:",r);const s=await fetch(r,{headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}});if(console.log("Response status:",s.status),!s.ok){const o=await s.text();throw console.error("API Error Response:",o),new Error(`Failed to list Excel files: ${s.statusText}`)}const i=await s.json();return console.log("API Response data for Excel files:",i),i.value.filter(o=>!o.folder&&o.name.toLowerCase().endsWith(".xlsx")).map(o=>({name:o.name,path:e?`${e}/${o.name}`:o.name}))}catch(r){throw console.error("Failed to list Excel files in path:",r),r}}};is.accessToken=null,is.refreshToken=null,is.config=null;let xe=is;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),H=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>k.createElement("svg",{ref:d,...D0,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${M0(t)}`,a].join(" "),...c},[...e.map(([h,f])=>k.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=H("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=H("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=H("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=H("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=H("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=H("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=H("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=H("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=H("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=H("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=H("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=H("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=H("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=H("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=H("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=H("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=H("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=H("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=H("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=H("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=H("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=H("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=H("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=H("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=H("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=H("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=H("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=H("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=H("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=H("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=H("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=H("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=H("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=H("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=H("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function ev({isOpen:t,onClose:e,title:n,children:r,type:s="info",showCloseButton:i=!0}){if(!t)return null;const o=()=>{switch(s){case"success":return u.jsx(vr,{className:"w-6 h-6 text-green-600"});case"warning":return u.jsx(Of,{className:"w-6 h-6 text-amber-600"});case"error":return u.jsx(sc,{className:"w-6 h-6 text-red-600"});default:return u.jsx($f,{className:"w-6 h-6 text-blue-600"})}},a=()=>{switch(s){case"success":return"bg-green-50 border-green-200";case"warning":return"bg-amber-50 border-amber-200";case"error":return"bg-red-50 border-red-200";default:return"bg-blue-50 border-blue-200"}};return u.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden animate-in fade-in duration-200",children:[u.jsx("div",{className:`p-6 border-b ${a()}`,children:u.jsxs("div",{className:"flex items-center gap-3",children:[o(),u.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n}),i&&u.jsx("button",{onClick:e,className:"ml-auto p-1 hover:bg-white hover:bg-opacity-50 rounded-lg transition-colors",children:u.jsx(js,{className:"w-5 h-5 text-gray-500"})})]})}),u.jsx("div",{className:"p-6",children:r})]})})}function tv({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,confirmText:i="Confirm",cancelText:o="Cancel",type:a="warning",isLoading:l=!1}){const c=()=>{switch(a){case"error":return"bg-red-600 hover:bg-red-700";case"warning":return"bg-amber-600 hover:bg-amber-700";case"success":return"bg-green-600 hover:bg-green-700";default:return"bg-blue-600 hover:bg-blue-700"}};return u.jsx(ev,{isOpen:t,onClose:e,title:r,type:a,showCloseButton:!l,children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-gray-600",children:s}),u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx("button",{onClick:e,disabled:l,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o}),u.jsxs("button",{onClick:n,disabled:l,className:`px-4 py-2 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 ${c()}`,children:[l&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),i]})]})]})})}function br({isOpen:t,onClose:e,title:n,message:r,type:s="info",buttonText:i="OK"}){const o=()=>{switch(s){case"error":return"bg-red-600 hover:bg-red-700";case"warning":return"bg-amber-600 hover:bg-amber-700";case"success":return"bg-green-600 hover:bg-green-700";default:return"bg-blue-600 hover:bg-blue-700"}},a=()=>{switch(s){case"error":return"from-red-500 to-red-600";case"warning":return"from-amber-500 to-amber-600";case"success":return"from-green-500 to-green-600";default:return"from-blue-500 to-blue-600"}},l=()=>{switch(s){case"error":return"bg-red-100";case"warning":return"bg-amber-100";case"success":return"bg-green-100";default:return"bg-blue-100"}};return t?u.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in zoom-in-95 duration-200",children:[u.jsxs("div",{className:`bg-gradient-to-r ${a()} px-6 py-8 text-center`,children:[u.jsxs("div",{className:`w-16 h-16 ${l()} rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg`,children:[s==="success"&&u.jsx(vr,{className:"w-8 h-8 text-green-600"}),s==="error"&&u.jsx(sc,{className:"w-8 h-8 text-red-600"}),s==="warning"&&u.jsx(Of,{className:"w-8 h-8 text-amber-600"}),s==="info"&&u.jsx($f,{className:"w-8 h-8 text-blue-600"})]}),u.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:n})]}),u.jsxs("div",{className:"px-6 py-6",children:[u.jsx("p",{className:"text-gray-700 text-center leading-relaxed mb-6 whitespace-pre-line",children:r}),u.jsx("div",{className:"flex justify-center",children:u.jsx("button",{onClick:e,className:`px-8 py-3 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl ${o()}`,children:i})})]})]})}):null}function nv(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),[s,i]=k.useState(!1);return{isOpen:t,config:n,isLoading:s,showConfirm:c=>{r(c),e(!0)},handleConfirm:async()=>{if(n){i(!0);try{await n.onConfirm(),e(!1)}catch(c){console.error("Confirm action failed:",c)}finally{i(!1)}}},handleClose:()=>{s||(e(!1),r(null))}}}function Er(){const[t,e]=k.useState(!1),[n,r]=k.useState(null);return{isOpen:t,config:n,showAlert:o=>{r(o),e(!0)},handleClose:()=>{e(!1),r(null)}}}function rv(){var n,r,s,i;const t=m0(),e=Er();return k.useEffect(()=>{(async()=>{console.log("AuthCallback: Starting callback handling"),console.log("Current URL:",window.location.href);const a=new URLSearchParams(window.location.hash.substring(1)),l=a.get("access_token"),c=a.get("error"),d=a.get("error_description");if(console.log("URL params:",{accessToken:l?"present":"missing",error:c,errorDescription:d}),c){console.error("Authentication error:",c,d),e.showAlert({title:"Authentication Failed",message:`${c}${d?`
${d}`:""}`,type:"error"}),t("/");return}if(l)try{console.log("Processing access token..."),await xe.handleImplicitCallback(l,a),console.log("Authentication successful!"),e.showAlert({title:"Connection Successful",message:"Successfully connected to Microsoft OneDrive! You can now upload invoices to OneDrive and sync them to Excel.",type:"success"}),t("/")}catch(h){console.error("Token processing failed:",h),e.showAlert({title:"Authentication Failed",message:`${h instanceof Error?h.message:"Unknown error"}. Please try again.`,type:"error"}),t("/")}else console.log("No access token or error found, redirecting to home"),t("/")})()},[t]),u.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600 font-medium",children:"Completing Microsoft authentication..."}),u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we connect your account"})]}),u.jsx(br,{isOpen:e.isOpen,onClose:e.handleClose,title:((n=e.config)==null?void 0:n.title)||"",message:((r=e.config)==null?void 0:r.message)||"",type:(s=e.config)==null?void 0:s.type,buttonText:(i=e.config)==null?void 0:i.buttonText})]})}const sv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>In(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ic extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class iv extends ic{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Lu extends ic{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Du extends ic{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qa;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Qa||(Qa={}));var ov=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class av{constructor(e,{headers:n={},customFetch:r,region:s=Qa.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=sv(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return ov(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region);const c=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(w=>{throw new iv(w)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Lu(h);if(!h.ok)throw new Du(h);let v=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return v==="application/json"?y=yield h.json():v==="application/octet-stream"?y=yield h.blob():v==="text/event-stream"?y=h:v==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof Du||s instanceof Lu?s.context:void 0}}})}}var Me={},oc={},ho={},$s={},fo={},po={},lv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yr=lv();const cv=yr.fetch,Lf=yr.fetch.bind(yr),Df=yr.Headers,uv=yr.Request,dv=yr.Response,jr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Df,Request:uv,Response:dv,default:Lf,fetch:cv},Symbol.toStringTag,{value:"Module"})),hv=fp(jr);var mo={};Object.defineProperty(mo,"__esModule",{value:!0});let fv=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};mo.default=fv;var Mf=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(po,"__esModule",{value:!0});const pv=Mf(hv),mv=Mf(mo);let gv=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=pv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,c;let d=null,h=null,f=null,v=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=p:h=JSON.parse(p))}const _=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");_&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,v=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await i.text();try{d=JSON.parse(_),Array.isArray(d)&&i.status===404&&(h=[],d=null,v=200,y="OK")}catch{i.status===404&&_===""?(v=204,y="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,v=200,y="OK"),d&&this.shouldThrowOnError)throw new mv.default(d)}return{error:d,data:h,count:f,status:v,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};po.default=gv;var vv=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fo,"__esModule",{value:!0});const yv=vv(po);let wv=class extends yv.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};fo.default=wv;var xv=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($s,"__esModule",{value:!0});const _v=xv(fo);let kv=class extends _v.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};$s.default=kv;var Sv=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ho,"__esModule",{value:!0});const Fr=Sv($s);let bv=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Fr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Fr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Fr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};ho.default=bv;var Ff=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oc,"__esModule",{value:!0});const Ev=Ff(ho),jv=Ff($s);let Tv=class Uf{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Ev.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Uf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new jv.default({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};oc.default=Tv;var Tr=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Me,"__esModule",{value:!0});Me.PostgrestError=Me.PostgrestBuilder=Me.PostgrestTransformBuilder=Me.PostgrestFilterBuilder=Me.PostgrestQueryBuilder=Me.PostgrestClient=void 0;const zf=Tr(oc);Me.PostgrestClient=zf.default;const Bf=Tr(ho);Me.PostgrestQueryBuilder=Bf.default;const Wf=Tr($s);Me.PostgrestFilterBuilder=Wf.default;const Vf=Tr(fo);Me.PostgrestTransformBuilder=Vf.default;const Hf=Tr(po);Me.PostgrestBuilder=Hf.default;const qf=Tr(mo);Me.PostgrestError=qf.default;var Cv=Me.default={PostgrestClient:zf.default,PostgrestQueryBuilder:Bf.default,PostgrestFilterBuilder:Wf.default,PostgrestTransformBuilder:Vf.default,PostgrestBuilder:Hf.default,PostgrestError:qf.default};const{PostgrestClient:Nv,PostgrestQueryBuilder:Bx,PostgrestFilterBuilder:Wx,PostgrestTransformBuilder:Vx,PostgrestBuilder:Hx,PostgrestError:qx}=Cv;class Pv{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ov="2.15.4",Iv=`realtime-js/${Ov}`,Rv="1.0.0",Xa=1e4,$v=1e3,Av=100;var ns;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ns||(ns={}));var fe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(fe||(fe={}));var ut;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ut||(ut={}));var Za;(function(t){t.websocket="websocket"})(Za||(Za={}));var xn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(xn||(xn={}));class Lv{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Yf{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var X;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(X||(X={}));const Mu=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Dv(o,t,e,s),i),{})},Dv=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Kf(i,o):el(o)},Kf=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return zv(e,n)}switch(t){case X.bool:return Mv(e);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return Fv(e);case X.json:case X.jsonb:return Uv(e);case X.timestamp:return Bv(e);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return el(e);default:return el(e)}},el=t=>t,Mv=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Fv=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Uv=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},zv=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Kf(e,a))}return t},Bv=t=>typeof t=="string"?t.replace(" ","T"):t,Gf=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class qo{constructor(e,n,r={},s=Xa){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Fu||(Fu={}));class rs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=rs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=rs.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const h=i[c];if(h){const f=d.map(_=>_.presence_ref),v=h.map(_=>_.presence_ref),y=d.filter(_=>v.indexOf(_.presence_ref)<0),w=h.filter(_=>f.indexOf(_.presence_ref)<0);y.length>0&&(a[c]=y),w.length>0&&(l[c]=w)}else a[c]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(v=>v.presence_ref),f=d.filter(v=>h.indexOf(v.presence_ref)<0);e[a].unshift(...f)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Uu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Uu||(Uu={}));var ss;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ss||(ss={}));var Ct;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ct||(Ct={}));class ac{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new qo(this,ut.join,this.params,this.timeout),this.rejoinTimer=new Yf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ut.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new rs(this),this.broadcastEndpointURL=Gf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==fe.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[ss.PRESENCE]&&this.bindings[ss.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(Ct.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(Ct.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var y;if(this.socket.setAuth(),v===void 0){e==null||e(Ct.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,g=[];for(let p=0;p<_;p++){const m=w[p],{filter:{event:x,schema:S,table:E,filter:b}}=m,N=v&&v[p];if(N&&N.event===x&&N.schema===S&&N.table===E&&N.filter===b)g.push(Object.assign(Object.assign({},m),{id:N.id}));else{this.unsubscribe(),this.state=fe.errored,e==null||e(Ct.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Ct.SUBSCRIBED);return}}).receive("error",v=>{this.state=fe.errored,e==null||e(Ct.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ct.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===fe.joined&&e===ss.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=fe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ut.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new qo(this,ut.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=fe.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new qo(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Av){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=ut;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var y,w,_;return((y=v.filter)===null||y===void 0?void 0:y.event)==="*"||((_=(w=v.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(v=>v.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var y,w,_,g,p,m;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const x=v.id,S=(y=v.filter)===null||y===void 0?void 0:y.event;return x&&((w=n.ids)===null||w===void 0?void 0:w.includes(x))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const x=(p=(g=v==null?void 0:v.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return x==="*"||x===((m=n==null?void 0:n.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:w,table:_,commit_timestamp:g,type:p,errors:m}=y;f=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:g,eventType:p,new:{},old:{},errors:m}),this._getPayloadRecords(y))}v.callback(f,r)})}_isClosed(){return this.state===fe.closed}_isJoined(){return this.state===fe.joined}_isJoining(){return this.state===fe.joining}_isLeaving(){return this.state===fe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ac.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ut.close,{},e)}_onError(e){this._on(ut.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Mu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Mu(e.columns,e.old_record)),n}}const Yo=()=>{},Zs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Wv=[1e3,2e3,5e3,1e4],Vv=1e4,Hv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qv{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xa,this.transport=null,this.heartbeatIntervalMs=Zs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yo,this.ref=0,this.reconnectTimer=null,this.logger=Yo,this.conn=null,this.sendBuffer=[],this.serializer=new Lv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>In(async()=>{const{default:a}=await Promise.resolve().then(()=>jr);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Za.websocket}`,this.httpEndpoint=Gf(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Pv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Rv}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ns.connecting:return xn.Connecting;case ns.open:return xn.Open;case ns.closing:return xn.Closing;default:return xn.Closed}}isConnected(){return this.connectionState()===xn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new ac(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close($v,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Zs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ut.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Hv],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Iv};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(ut.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Yf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,c,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Xa,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Zs.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Yo,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>Wv[h-1]||Vv,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class lc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Yv extends lc{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tl extends lc{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Kv=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const Jf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>In(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Gv=()=>Kv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield In(()=>Promise.resolve().then(()=>jr),void 0)).Response:Response}),nl=t=>{if(Array.isArray(t))return t.map(n=>nl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=nl(r)}),e},Jv=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var An=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const Ko=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qv=(t,e,n)=>An(void 0,void 0,void 0,function*(){const r=yield Gv();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new Yv(Ko(s),i,o))}).catch(s=>{e(new tl(Ko(s),s))}):e(new tl(Ko(t),t))}),Xv=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(Jv(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function As(t,e,n,r,s,i){return An(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Xv(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Qv(l,a,r))})})}function Bi(t,e,n,r){return An(this,void 0,void 0,function*(){return As(t,"GET",e,n,r)})}function xt(t,e,n,r,s){return An(this,void 0,void 0,function*(){return As(t,"POST",e,r,s,n)})}function rl(t,e,n,r,s){return An(this,void 0,void 0,function*(){return As(t,"PUT",e,r,s,n)})}function Zv(t,e,n,r){return An(this,void 0,void 0,function*(){return As(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Qf(t,e,n,r,s){return An(this,void 0,void 0,function*(){return As(t,"DELETE",e,r,s,n)})}var Oe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const ey={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ty{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Jf(s)}uploadOrUpdate(e,n,r,s){return Oe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},zu),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(e=="PUT"?rl:xt)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(pe(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Oe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:zu.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield rl(this.fetch,a.toString(),l,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(pe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield xt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new lc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}update(e,n,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Oe(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Oe(this,void 0,void 0,function*(){try{return{data:{path:(yield xt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Oe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield xt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Oe(this,void 0,void 0,function*(){try{const s=yield xt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}download(e,n){return Oe(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Bi(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(pe(a))return{data:null,error:a};throw a}})}info(e){return Oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Bi(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:nl(r),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}exists(e){return Oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Zv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(pe(r)&&r instanceof tl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield Qf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}list(e,n,r){return Oe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},ey),n),{prefix:e||""});return{data:yield xt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}listV2(e,n){return Oe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield xt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const ny="2.11.0",ry={"X-Client-Info":`storage-js/${ny}`};var Dn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class sy{constructor(e,n={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},ry),n),this.fetch=Jf(r)}listBuckets(){return Dn(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(pe(e))return{data:null,error:e};throw e}})}getBucket(e){return Dn(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Dn(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Dn(this,void 0,void 0,function*(){try{return{data:yield rl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Dn(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Dn(this,void 0,void 0,function*(){try{return{data:yield Qf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}}class iy extends sy{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new ty(this.url,this.headers,e,this.fetch)}}const oy="2.56.1";let qr="";typeof Deno<"u"?qr="deno":typeof document<"u"?qr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qr="react-native":qr="node";const ay={"X-Client-Info":`supabase-js-${qr}/${oy}`},ly={headers:ay},cy={schema:"public"},uy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dy={};var hy=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const fy=t=>{let e;return t?e=t:typeof fetch>"u"?e=Lf:e=fetch,(...n)=>e(...n)},py=()=>typeof Headers>"u"?Df:Headers,my=(t,e,n)=>{const r=fy(n),s=py();return(i,o)=>hy(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var gy=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function vy(t){return t.endsWith("/")?t:t+"/"}function yy(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>gy(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Xf="2.71.1",Vn=30*1e3,sl=3,Go=sl*Vn,wy="http://localhost:9999",xy="supabase.auth.token",_y={"X-Client-Info":`gotrue-js/${Xf}`},il="X-Supabase-Api-Version",Zf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ky=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sy=10*60*1e3;class cc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function U(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class by extends cc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Ey(t){return U(t)&&t.name==="AuthApiError"}class ep extends cc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class fn extends cc{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Wt extends fn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jy(t){return U(t)&&t.name==="AuthSessionMissingError"}class ei extends fn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ti extends fn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ni extends fn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ty(t){return U(t)&&t.name==="AuthImplicitGrantRedirectError"}class Bu extends fn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ol extends fn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Jo(t){return U(t)&&t.name==="AuthRetryableFetchError"}class Wu extends fn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class al extends fn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vu=` 	
\r=`.split(""),Cy=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Vu.length;e+=1)t[Vu[e].charCodeAt(0)]=-2;for(let e=0;e<Wi.length;e+=1)t[Wi[e].charCodeAt(0)]=e;return t})();function Hu(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Wi[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Wi[r]),e.queuedBits-=6}}function tp(t,e,n){const r=Cy[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function qu(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Oy(o,r,n)};for(let o=0;o<t.length;o+=1)tp(t.charCodeAt(o),s,i);return e.join("")}function Ny(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Py(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Ny(r,e)}}function Oy(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Iy(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)tp(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Ry(t){const e=[];return Py(t,n=>e.push(n)),new Uint8Array(e)}function $y(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Hu(s,n,r)),Hu(null,n,r),e.join("")}function Ay(t){return Math.round(Date.now()/1e3)+t}function Ly(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const at=()=>typeof window<"u"&&typeof document<"u",pn={tested:!1,writable:!1},np=()=>{if(!at())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pn.tested)return pn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),pn.tested=!0,pn.writable=!0}catch{pn.tested=!0,pn.writable=!1}return pn.writable};function Dy(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const rp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>In(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},My=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Hn=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},mn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zt=async(t,e)=>{await t.removeItem(e)};class go{constructor(){this.promise=new go.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}go.promiseConstructor=Promise;function Qo(t){const e=t.split(".");if(e.length!==3)throw new al("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ky.test(e[r]))throw new al("JWT not in base64url format");return{header:JSON.parse(qu(e[0])),payload:JSON.parse(qu(e[1])),signature:Iy(e[2]),raw:{header:e[0],payload:e[1]}}}async function Fy(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Uy(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function zy(t){return("0"+t.toString(16)).substr(-2)}function By(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,zy).join("")}async function Wy(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Vy(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Wy(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mn(t,e,n=!1){const r=By();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Hn(t,`${e}-code-verifier`,s);const i=await Vy(r);return[i,r===i?"plain":"s256"]}const Hy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qy(t){const e=t.headers.get(il);if(!e||!e.match(Hy))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Yy(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Ky(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Gy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fn(t){if(!Gy.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xo(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Yu(t){return JSON.parse(JSON.stringify(t))}var Jy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const yn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qy=[502,503,504];async function Ku(t){var e;if(!My(t))throw new ol(yn(t),0);if(Qy.includes(t.status))throw new ol(yn(t),t.status);let n;try{n=await t.json()}catch(i){throw new ep(yn(i),i)}let r;const s=qy(t);if(s&&s.getTime()>=Zf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Wu(yn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Wt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Wu(yn(n),t.status,n.weak_password.reasons);throw new by(yn(n),t.status||500,r)}const Xy=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function z(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[il]||(i[il]=Zf["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Zy(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Zy(t,e,n,r,s,i){const o=Xy(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new ol(yn(l),0)}if(a.ok||await Ku(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Ku(l)}}function jt(t){var e;let n=null;rw(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Ay(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Gu(t){const e=jt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Kt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function ew(t){return{data:t,error:null}}function tw(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Jy(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function nw(t){return t}function rw(t){return t.access_token&&t.refresh_token&&t.expires_in}const Zo=["global","local","others"];var sw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class iw{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=rp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Zo[0]){if(Zo.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zo.join(", ")}`);try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Kt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=sw(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:tw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(U(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Kt})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:nw});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return v.length>0&&(v.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);c[`${_}Page`]=w}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(U(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Fn(e);try{return await z(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Kt})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Fn(e);try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Kt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Fn(e);try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Kt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Fn(e.userId);try{const{data:n,error:r}=await z(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(U(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Fn(e.userId),Fn(e.id);try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}}function Ju(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function ow(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Un={debug:!!(globalThis&&np()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class aw extends sp{}async function lw(t,e,n){Un.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Un.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Un.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Un.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Un.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new aw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Un.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}ow();const cw={url:wy,storageKey:xy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_y,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Qu(t,e,n){return await n()}const zn={};class Ts{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ts.nextInstanceID,Ts.nextInstanceID+=1,this.instanceID>0&&at()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},cw),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new iw({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=rp(s.fetch),this.lock=s.lock||Qu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:at()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=lw:this.lock=Qu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:np()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ju(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Ju(this.memoryStorage)),at()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=zn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){zn[this.storageKey]=Object.assign(Object.assign({},zn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=zn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){zn[this.storageKey]=Object.assign(Object.assign({},zn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Xf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Dy(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),at()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ty(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return U(n)?{error:n}:{error:new ep("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:jt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Mn(this.storage,this.storageKey)),i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:y},xform:jt})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:jt})}else throw new ti("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Gu})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Gu})}else throw new ti("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ei}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,l,c,d,h,f,v;let y,w;if("message"in e)y=e.message,w=e.signature;else{const{chain:_,wallet:g,statement:p,options:m}=e;let x;if(at())if(typeof g=="object")x=g;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))x=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=g}const S=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const E=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),p?{statement:p}:null));let b;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")b=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)b=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in b&&"signature"in b&&(typeof b.signedMessage=="string"||b.signedMessage instanceof Uint8Array)&&b.signature instanceof Uint8Array)y=typeof b.signedMessage=="string"?b.signedMessage:new TextDecoder().decode(b.signedMessage),w=b.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=m==null?void 0:m.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(d=m==null?void 0:m.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(b=>`- ${b}`)]:[]].join(`
`);const E=await x.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=E}}try{const{data:_,error:g}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:$y(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:jt});if(g)throw g;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new ei}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:g})}catch(_){if(U(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await mn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:jt});if(await zt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ei}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(U(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:jt}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ei}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Mn(this.storage,this.storageKey));const{error:h}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new ti("You must provide either an email or phone number.")}catch(a){if(U(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:jt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Mn(this.storage,this.storageKey)),await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:ew})}catch(i){if(U(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Wt;const{error:s}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(U(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await z(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await z(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ti("You must provide either an email or phone number and a type")}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await mn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Go:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await mn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Xo()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Kt}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wt}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Kt})})}catch(n){if(U(n))return jy(n)&&(await this._removeSession(),await zt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Wt;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Mn(this.storage,this.storageKey));const{data:c,error:d}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Kt});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Wt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Qo(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(U(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Wt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!at())throw new ni("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ni(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Bu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ni("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Bu("No code detected.");const{data:p,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new ni("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const v=f-d;v*1e3<=Vn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:w,error:_}=await this._getUser(i);if(_)throw _;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(U(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await mn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Ey(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await zt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Ly(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Mn(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(U(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,d;const{data:h,error:f}=i;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return at()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(U(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Uy(async s=>(s>0&&await Fy(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:jt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Jo(i)&&Date.now()+o-r<Vn})}catch(r){if(this._debug(n,"error",r),U(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),at()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await mn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await mn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Hn(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Xo()}else if(s&&!s.user&&!s.user){const o=await mn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await zt(this.storage,this.storageKey+"-user"),await Hn(this.storage,this.storageKey,s)):s.user=Xo()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Go;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Go}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Jo(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Wt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new go;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Wt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),U(i)){const o={session:null,error:i};return Jo(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Hn(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Yu(s);await Hn(this.storage,this.storageKey,i)}else{const s=Yu(n);await Hn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await zt(this.storage,this.storageKey),await zt(this.storage,this.storageKey+"-code-verifier"),await zt(this.storage,this.storageKey+"-user"),this.userStorage&&await zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&at()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Vn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Vn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Vn}ms, refresh threshold is ${sl} ticks`),s<=sl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!at()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Mn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await z(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await z(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Qo(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Sy>s)return r;const{data:i,error:o}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:v,error:y}=await this.getSession();if(y||!v.session)return{data:null,error:y};r=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Qo(r);n!=null&&n.allowExpired||Yy(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const d=Ky(s.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Ry(`${a}.${l}`)))throw new al("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}}Ts.nextInstanceID=0;const uw=Ts;class dw extends uw{constructor(e){super(e)}}var hw=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class fw{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=vy(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:cy,realtime:dy,auth:Object.assign(Object.assign({},uy),{storageKey:c}),global:ly},h=yy(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=my(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Nv(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new iy(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new av(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return hw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dw({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new qv(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const pw=(t,e,n)=>new fw(t,e,n);function mw(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}mw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const gw="https://xgowjdlogoeebqmmreyt.supabase.co",vw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhnb3dqZGxvZ29lZWJxbW1yZXl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4NTY4NzMsImV4cCI6MjA3MjQzMjg3M30.hJLevsESQNJ3odCv6wAX4xT60s3HnYOLD4kWLhJHUOM",ae=pw(gw,vw);function yw({isOpen:t,onClose:e}){const[n,r]=k.useState(!1),[s,i]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(""),[d,h]=k.useState(!1),[f,v]=k.useState(!1),[y,w]=k.useState(""),_=async m=>{m.preventDefault(),w(""),v(!0);try{if(n){if(o!==l)throw new Error("Passwords do not match");const{error:x}=await ae.auth.signUp({email:s,password:o});if(x)throw x;e()}else{const{error:x}=await ae.auth.signInWithPassword({email:s,password:o});if(x)throw x;e()}}catch(x){console.error("Auth error:",x),w(x instanceof Error?x.message:"Authentication failed")}finally{v(!1)}},g=()=>{i(""),a(""),c(""),w(""),h(!1)},p=()=>{r(!n),g()};return t?u.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden",children:[u.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx($u,{className:"w-8 h-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:n?"Create Account":"Welcome Back"}),u.jsx("p",{className:"text-blue-100",children:n?"Sign up to start managing your invoices":"Sign in to access your invoices"})]})}),u.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[y&&u.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:u.jsx("p",{className:"text-sm text-red-600",children:y})}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),u.jsxs("div",{className:"relative",children:[u.jsx(H0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"email",id:"email",value:s,onChange:m=>i(m.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(Iu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:d?"text":"password",id:"password",value:o,onChange:m=>a(m.target.value),required:!0,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your password"}),u.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?u.jsx(U0,{className:"w-5 h-5"}):u.jsx(z0,{className:"w-5 h-5"})})]})]}),n&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(Iu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:d?"text":"password",id:"confirmPassword",value:l,onChange:m=>c(m.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Confirm your password"})]})]}),u.jsxs("button",{type:"submit",disabled:f,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:[f?u.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):u.jsx($u,{className:"w-5 h-5"}),f?"Please wait...":n?"Create Account":"Sign In"]}),u.jsx("div",{className:"text-center",children:u.jsx("button",{type:"button",onClick:p,className:"text-sm text-blue-600 hover:text-blue-700 transition-colors",children:n?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})}):null}const Le={onedrive:{invoiceDirectory:"Invoices",excelFileName:"Invoice_Tracker.xlsx",excelFilePath:""},general:{defaultCategory:"Massage Therapy",autoExtractOCR:!0}},Hi=class Hi{static async getSettings(e){if(this.cachedSettings)return this.cachedSettings;try{let n=e;if(!n){const c=ae.auth.getUser().then(f=>({result:f,timeout:!1})),d=new Promise(f=>setTimeout(()=>f({timeout:!0}),1e4)),h=await Promise.race([c,d]);if(h.timeout){console.warn("Authentication check timed out, falling back to localStorage");const f=this.getLocalSettings();return this.cachedSettings=f,f}n=h.result.data.user}if(!n){const c=this.getLocalSettings();return this.cachedSettings=c,c}const r=ae.from("user_settings").select("settings").eq("user_id",n.id).maybeSingle().then(c=>({result:c,timeout:!1})),s=new Promise(c=>setTimeout(()=>c({timeout:!0}),15e3)),i=await Promise.race([r,s]);if(i.timeout){console.warn("Database query timed out, falling back to localStorage");const c=this.getLocalSettings();return this.cachedSettings=c,c}const{data:o,error:a}=i.result;if(a){console.error("Error fetching settings from database:",a);const c=this.getLocalSettings();return this.cachedSettings=c,c}if(o!=null&&o.settings){const c={...Le,...o.settings,onedrive:{...Le.onedrive,...o.settings.onedrive},general:{...Le.general,...o.settings.general}};return this.cachedSettings=c,c}const l=this.getLocalSettings();if(l!==Le){try{await this.saveSettings(l)}catch(c){console.warn("Settings migration failed:",c)}return l}return this.cachedSettings=Le,Le}catch(n){console.error("Error in getSettings:",n);const r=this.getLocalSettings();return this.cachedSettings=r,r}}static async saveSettings(e){try{const{data:{user:n}}=await ae.auth.getUser();if(!n){this.saveLocalSettings(e);return}const{error:r}=await ae.from("user_settings").upsert({user_id:n.id,settings:e},{onConflict:"user_id"});if(r)throw console.error("Error saving settings to database:",r),this.saveLocalSettings(e),new Error("Failed to save settings to database");this.cachedSettings=e,this.saveLocalSettings(e)}catch(n){throw console.error("Error in saveSettings:",n),this.saveLocalSettings(e),n}}static async resetSettings(){try{const{data:{user:e}}=await ae.auth.getUser();if(e){const{error:n}=await ae.from("user_settings").delete().eq("user_id",e.id);n&&console.error("Error deleting settings from database:",n)}this.cachedSettings=null,localStorage.removeItem(this.SETTINGS_KEY)}catch(e){console.error("Error in resetSettings:",e),localStorage.removeItem(this.SETTINGS_KEY)}}static async updateOneDriveSettings(e){const n=await this.getSettings(),r={...n,onedrive:{...n.onedrive,...e}};await this.saveSettings(r)}static async updateGeneralSettings(e){const n=await this.getSettings(),r={...n,general:{...n.general,...e}};await this.saveSettings(r)}static getLocalSettings(){try{const e=localStorage.getItem(this.SETTINGS_KEY);if(e){const n=JSON.parse(e);return{...Le,...n,onedrive:{...Le.onedrive,...n.onedrive},general:{...Le.general,...n.general}}}return Le}catch{return Le}}static saveLocalSettings(e){try{localStorage.setItem(this.SETTINGS_KEY,JSON.stringify(e))}catch(n){console.error("Failed to save settings to localStorage:",n)}}static clearCache(){this.cachedSettings=null}};Hi.SETTINGS_KEY="app_settings",Hi.cachedSettings=null;let $t=Hi;const Xu=Object.freeze(Object.defineProperty({__proto__:null,SettingsService:$t},Symbol.toStringTag,{value:"Module"})),ip=k.createContext(void 0);function ww(){const t=k.useContext(ip);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function xw({children:t}){const[e,n]=k.useState(null),[r,s]=k.useState(null),[i,o]=k.useState(!0),[a,l]=k.useState(!1);k.useEffect(()=>{ae.auth.getSession().then(({data:{session:f}})=>{s(f),n((f==null?void 0:f.user)??null),o(!1),f||l(!0)}).catch(f=>{console.error("Failed to get initial session:",f),s(null),n(null),o(!1),l(!0)});const{data:{subscription:h}}=ae.auth.onAuthStateChange(async(f,v)=>{if(s(v),n((v==null?void 0:v.user)??null),o(!1),f==="SIGNED_IN"&&(v!=null&&v.user)){$t.clearCache();try{await $t.getSettings(v.user)}catch(y){console.error("Failed to reload settings after login:",y)}}l(!v)});return()=>h.unsubscribe()},[]);const d={user:e,session:r,loading:i,signOut:async()=>{var h;$t.clearCache();try{await ae.auth.signOut()}catch(f){if((h=f==null?void 0:f.message)!=null&&h.includes("Session from session_id claim in JWT does not exist"))s(null),n(null),l(!0);else throw f}}};return i?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):u.jsxs(ip.Provider,{value:d,children:[t,u.jsx(yw,{isOpen:a,onClose:()=>l(!1)})]})}const op=6048e5,_w=864e5,Zu=Symbol.for("constructDateFrom");function cn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Zu in t?t[Zu](e):t instanceof Date?new t.constructor(e):new Date(e)}function mt(t,e){return cn(e||t,t)}let kw={};function vo(){return kw}function Cs(t,e){var a,l,c,d;const n=vo(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=mt(t,e==null?void 0:e.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Vi(t,e){return Cs(t,{...e,weekStartsOn:1})}function ap(t,e){const n=mt(t,e==null?void 0:e.in),r=n.getFullYear(),s=cn(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Vi(s),o=cn(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Vi(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function ed(t){const e=mt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Sw(t,...e){const n=cn.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function td(t,e){const n=mt(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function bw(t,e,n){const[r,s]=Sw(n==null?void 0:n.in,t,e),i=td(r),o=td(s),a=+i-ed(i),l=+o-ed(o);return Math.round((a-l)/_w)}function Ew(t,e){const n=ap(t,e),r=cn(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Vi(r)}function jw(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Tw(t){return!(!jw(t)&&typeof t!="number"||isNaN(+mt(t)))}function Cw(t,e){const n=mt(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Nw={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Pw=(t,e,n)=>{let r;const s=Nw[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ea(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Ow={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Iw={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rw={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$w={date:ea({formats:Ow,defaultWidth:"full"}),time:ea({formats:Iw,defaultWidth:"full"}),dateTime:ea({formats:Rw,defaultWidth:"full"})},Aw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Lw=(t,e,n,r)=>Aw[t];function Ur(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Dw={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Mw={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Fw={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Uw={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Bw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ww=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Vw={ordinalNumber:Ww,era:Ur({values:Dw,defaultWidth:"wide"}),quarter:Ur({values:Mw,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ur({values:Fw,defaultWidth:"wide"}),day:Ur({values:Uw,defaultWidth:"wide"}),dayPeriod:Ur({values:zw,defaultWidth:"wide",formattingValues:Bw,defaultFormattingWidth:"wide"})};function zr(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?qw(a,h=>h.test(o)):Hw(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function Hw(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function qw(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Yw(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const Kw=/^(\d+)(th|st|nd|rd)?/i,Gw=/\d+/i,Jw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Qw={any:[/^b/i,/^(a|c)/i]},Xw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Zw={any:[/1/i,/2/i,/3/i,/4/i]},ex={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tx={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nx={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rx={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sx={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ix={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ox={ordinalNumber:Yw({matchPattern:Kw,parsePattern:Gw,valueCallback:t=>parseInt(t,10)}),era:zr({matchPatterns:Jw,defaultMatchWidth:"wide",parsePatterns:Qw,defaultParseWidth:"any"}),quarter:zr({matchPatterns:Xw,defaultMatchWidth:"wide",parsePatterns:Zw,defaultParseWidth:"any",valueCallback:t=>t+1}),month:zr({matchPatterns:ex,defaultMatchWidth:"wide",parsePatterns:tx,defaultParseWidth:"any"}),day:zr({matchPatterns:nx,defaultMatchWidth:"wide",parsePatterns:rx,defaultParseWidth:"any"}),dayPeriod:zr({matchPatterns:sx,defaultMatchWidth:"any",parsePatterns:ix,defaultParseWidth:"any"})},ax={code:"en-US",formatDistance:Pw,formatLong:$w,formatRelative:Lw,localize:Vw,match:ox,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lx(t,e){const n=mt(t,e==null?void 0:e.in);return bw(n,Cw(n))+1}function cx(t,e){const n=mt(t,e==null?void 0:e.in),r=+Vi(n)-+Ew(n);return Math.round(r/op)+1}function lp(t,e){var d,h,f,v;const n=mt(t,e==null?void 0:e.in),r=n.getFullYear(),s=vo(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((v=(f=s.locale)==null?void 0:f.options)==null?void 0:v.firstWeekContainsDate)??1,o=cn((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=Cs(o,e),l=cn((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=Cs(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function ux(t,e){var a,l,c,d;const n=vo(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,s=lp(t,e),i=cn((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Cs(i,e)}function dx(t,e){const n=mt(t,e==null?void 0:e.in),r=+Cs(n,e)-+ux(n,e);return Math.round(r/op)+1}function K(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Bt={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return K(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):K(n+1,2)},d(t,e){return K(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return K(t.getHours()%12||12,e.length)},H(t,e){return K(t.getHours(),e.length)},m(t,e){return K(t.getMinutes(),e.length)},s(t,e){return K(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return K(s,e.length)}},Bn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nd={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Bt.y(t,e)},Y:function(t,e,n,r){const s=lp(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return K(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):K(i,e.length)},R:function(t,e){const n=ap(t);return K(n,e.length)},u:function(t,e){const n=t.getFullYear();return K(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return K(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return K(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Bt.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return K(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=dx(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):K(s,e.length)},I:function(t,e,n){const r=cx(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):K(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Bt.d(t,e)},D:function(t,e,n){const r=lx(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):K(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return K(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return K(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return K(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Bn.noon:r===0?s=Bn.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Bn.evening:r>=12?s=Bn.afternoon:r>=4?s=Bn.morning:s=Bn.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Bt.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Bt.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):K(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):K(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Bt.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Bt.s(t,e)},S:function(t,e){return Bt.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return sd(r);case"XXXX":case"XX":return wn(r);case"XXXXX":case"XXX":default:return wn(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return sd(r);case"xxxx":case"xx":return wn(r);case"xxxxx":case"xxx":default:return wn(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+rd(r,":");case"OOOO":default:return"GMT"+wn(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+rd(r,":");case"zzzz":default:return"GMT"+wn(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return K(r,e.length)},T:function(t,e,n){return K(+t,e.length)}};function rd(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+K(i,2)}function sd(t,e){return t%60===0?(t>0?"-":"+")+K(Math.abs(t)/60,2):wn(t,e)}function wn(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=K(Math.trunc(r/60),2),i=K(r%60,2);return n+s+e+i}const id=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},cp=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},hx=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return id(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",id(r,e)).replace("{{time}}",cp(s,e))},fx={p:cp,P:hx},px=/^D+$/,mx=/^Y+$/,gx=["D","DD","YY","YYYY"];function vx(t){return px.test(t)}function yx(t){return mx.test(t)}function wx(t,e,n){const r=xx(t,e,n);if(console.warn(r),gx.includes(t))throw new RangeError(r)}function xx(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _x=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kx=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sx=/^'([^]*?)'?$/,bx=/''/g,Ex=/[a-zA-Z]/;function jx(t,e,n){var d,h,f,v;const r=vo(),s=r.locale??ax,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((v=(f=r.locale)==null?void 0:f.options)==null?void 0:v.weekStartsOn)??0,a=mt(t,n==null?void 0:n.in);if(!Tw(a))throw new RangeError("Invalid time value");let l=e.match(kx).map(y=>{const w=y[0];if(w==="p"||w==="P"){const _=fx[w];return _(y,s.formatLong)}return y}).join("").match(_x).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const w=y[0];if(w==="'")return{isToken:!1,value:Tx(y)};if(nd[w])return{isToken:!0,value:y};if(w.match(Ex))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(y=>{if(!y.isToken)return y.value;const w=y.value;(yx(w)||vx(w))&&wx(w,e,String(t));const _=nd[w[0]];return _(a,w,s.localize,c)}).join("")}function Tx(t){const e=t.match(Sx);return e?e[1].replace(bx,"'"):t}const uc=class uc{static async createInvoice(e){try{let n="",r="image";e.file&&(n=(await this.uploadFile(e.file)).url,r=e.file.type.includes("pdf")?"pdf":"image");const{data:s,error:i}=await ae.from("invoices").insert([{customer_name:e.customer_name,invoice_date:e.invoice_date,invoice_amount:parseFloat(e.invoice_amount),description_category:e.description_category,description_other:e.description_other,file_url:n,file_type:r}]).select().single();if(i)throw new Error(`Failed to create invoice: ${i.message}`);return s}catch(n){throw console.error("Error creating invoice:",n),n}}static async getInvoices(){try{console.log("Fetching invoices from Supabase...");const{data:{user:e},error:n}=await ae.auth.getUser();if(n){if(n.message==="Auth session missing!")return console.log("No auth session, returning empty array"),[];throw console.error("Auth error when fetching invoices:",n),new Error(`Authentication error: ${n.message}`)}if(!e)return console.log("No authenticated user, returning empty array"),[];const{data:r,error:s}=await ae.from("invoices").select("*").order("created_at",{ascending:!1});if(s)throw console.error("Supabase query error:",s),new Error(`Failed to fetch invoices: ${s.message}`);return console.log("Successfully fetched invoices:",(r==null?void 0:r.length)||0),r||[]}catch(e){throw console.error("Error fetching invoices:",e),e}}static async updateInvoice(e,n){try{const{data:r,error:s}=await ae.from("invoices").select("*").eq("id",e).single();if(s)throw new Error(`Failed to fetch existing invoice: ${s.message}`);let i=r.file_url,o=r.file_type;n.file&&(r.file_url&&await this.deleteFile(r.file_url),i=(await this.uploadFile(n.file)).url,o=n.file.type.includes("pdf")?"pdf":"image");const{data:a,error:l}=await ae.from("invoices").update({customer_name:n.customer_name,invoice_date:n.invoice_date,invoice_amount:parseFloat(n.invoice_amount),description_category:n.description_category,description_other:n.description_other,file_url:i,file_type:o}).eq("id",e).select().single();if(l)throw new Error(`Failed to update invoice: ${l.message}`);return a}catch(r){throw console.error("Error updating invoice:",r),r}}static async deleteInvoice(e){try{const{data:n,error:r}=await ae.from("invoices").select("file_url").eq("id",e).single();r&&console.warn("Could not fetch invoice for file cleanup:",r.message),n!=null&&n.file_url&&await this.deleteFile(n.file_url);const{error:s}=await ae.from("invoices").delete().eq("id",e);if(s)throw new Error(`Failed to delete invoice: ${s.message}`)}catch(n){throw console.error("Error deleting invoice:",n),n}}static async updateInvoiceOneDriveStatus(e,n){try{const{data:r,error:s}=await ae.from("invoices").update(n).eq("id",e).select().single();if(s)throw new Error(`Failed to update OneDrive status: ${s.message}`);return r}catch(r){throw console.error("Error updating OneDrive status:",r),r}}static async uploadFile(e){try{const n=e.name.split(".").pop(),s=`invoices/${`${Date.now()}_${Math.random().toString(36).substring(2)}.${n}`}`,{data:i,error:o}=await ae.storage.from(this.BUCKET_NAME).upload(s,e,{cacheControl:"3600",upsert:!1});if(o)throw new Error(`File upload failed: ${o.message}`);const{data:a}=ae.storage.from(this.BUCKET_NAME).getPublicUrl(i.path);return{url:a.publicUrl}}catch(n){throw console.error("Error uploading file:",n),n}}static async deleteFile(e){try{const s=new URL(e).pathname.split("/").slice(-2).join("/"),{error:i}=await ae.storage.from(this.BUCKET_NAME).remove([s]);i&&console.warn("Failed to delete file from storage:",i.message)}catch(n){console.warn("Error deleting file:",n)}}static getFileUrl(e){return e}};uc.BUCKET_NAME="invoices";let Nt=uc;class tt{static async createInvoice(e){return Nt.createInvoice(e)}static async getInvoices(){return Nt.getInvoices()}static async deleteInvoice(e){const r=(await this.getInvoices()).find(s=>s.id===e);if(r){if(r.onedrive_uploaded&&r.onedrive_file_url)try{console.log("Deleting invoice from OneDrive:",r.onedrive_file_url);const s=await xe.deleteFileFromOneDrive(r.onedrive_file_url);s.success||console.warn("OneDrive deletion failed:",s.error)}catch(s){console.error("OneDrive deletion error:",s)}if(r.excel_synced)try{console.log("Removing invoice from Excel");const s=await xe.removeFromExcel(r);s.success||console.warn("Excel row deletion failed:",s.error)}catch(s){console.error("Excel deletion error:",s)}}return Nt.deleteInvoice(e)}static async updateInvoice(e,n){return Nt.updateInvoice(e,n)}static getFileUrl(e){return Nt.getFileUrl(e)}static async deleteFile(e){return Promise.resolve()}static async uploadToOneDrive(e){try{const n=await this.getFileBlob(e.file_url);if(!n)return{success:!1,error:"Invoice file not found"};const r=await xe.uploadInvoiceToOneDrive(e,n);return r.success&&await Nt.updateInvoiceOneDriveStatus(e.id,{onedrive_uploaded:!0,onedrive_file_url:r.fileUrl,excel_synced:!0}),r}catch(n){return console.error("OneDrive upload failed:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async getFileBlob(e){try{const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch file: ${n.statusText}`);return await n.blob()}catch(n){return console.error("Error fetching file blob:",n),null}}static async resyncToExcel(e){try{if(!e.onedrive_uploaded||!e.onedrive_file_url)return{success:!1,error:"Invoice must be uploaded to OneDrive first"};console.log("Resyncing invoice to Excel:",e.id);try{await xe.updateInExcel({...e,onedrive_file_url:e.onedrive_file_url}),console.log("Excel resync successful")}catch(n){if(console.error("Excel resync failed:",n),n instanceof Error&&n.message.includes("not found in Excel"))console.log("Row not found in Excel, appending instead"),await xe.appendToExcel({...e,onedrive_file_url:e.onedrive_file_url});else throw n}return await Nt.updateInvoiceOneDriveStatus(e.id,{onedrive_uploaded:!0,onedrive_file_url:e.onedrive_file_url,excel_synced:!0}),{success:!0,fileUrl:e.onedrive_file_url}}catch(n){return console.error("Excel resync failed:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}}function Cx({invoice:t,onEdit:e,onDelete:n,onInvoiceUpdate:r}){var S,E,b,N;const[s,i]=Wn.useState(!1),[o,a]=Wn.useState(!1),[l,c]=Wn.useState(xe.isAuthenticated()),[d,h]=Wn.useState(null),f=Er(),v=Wn.useMemo(()=>{try{const[F,C,A]=t.invoice_date.split("-").map(Number),W=new Date(F,C-1,A);return jx(W,"MMM dd, yyyy")}catch(F){return console.error("Date formatting error:",F,"Date value:",t.invoice_date),t.invoice_date}},[t.invoice_date]),y=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.invoice_amount),w=()=>t.description_category==="Other"?t.description_other:t.description_category,_=()=>{const F={"Massage Therapy":"bg-purple-100 text-purple-800","Physio Therapy":"bg-blue-100 text-blue-800",Dentist:"bg-green-100 text-green-800","Prescription Medication":"bg-red-100 text-red-800",Vision:"bg-orange-100 text-orange-800",Other:"bg-gray-100 text-gray-800"};return F[t.description_category]||F.Other},g=async F=>{F.stopPropagation(),console.log("OneDrive upload clicked for invoice:",t.id),console.log("Microsoft service authenticated:",xe.isAuthenticated()),i(!0),h(null);try{const C=await tt.uploadToOneDrive(t);if(console.log("Upload result:",C),C.success){const W=(await tt.getInvoices()).find(ce=>ce.id===t.id);W&&r&&r(W)}else console.error("Upload failed:",C.error),h(C.error||"Upload failed"),f.showAlert({title:"Upload Failed",message:C.error||"Failed to upload to OneDrive. Please try again.",type:"error"})}catch(C){console.error("Upload error:",C),h("Upload failed. Please try again."),f.showAlert({title:"Upload Error",message:"Upload failed. Please try again.",type:"error"})}finally{i(!1)}},p=async F=>{F.stopPropagation(),a(!0),h(null);try{const C=await tt.resyncToExcel(t);if(C.success){const W=(await tt.getInvoices()).find(ce=>ce.id===t.id);W&&r&&r(W)}else h(C.error||"Resync failed"),f.showAlert({title:"Resync Failed",message:C.error||"Failed to resync to Excel. Please try again.",type:"error"})}catch{h("Resync failed. Please try again."),f.showAlert({title:"Resync Error",message:"Resync failed. Please try again.",type:"error"})}finally{a(!1)}},x=t.onedrive_uploaded?{icon:vr,color:"text-green-600",bgColor:"bg-green-50",title:"Uploaded to OneDrive and synced to Excel",text:"Synced"}:null;return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>e(t),children:[u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:t.customer_name}),u.jsx("p",{className:"text-sm text-gray-500",children:v}),x&&u.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium mt-2 ${x.bgColor} ${x.color}`,children:[u.jsx(x.icon,{className:"w-3 h-3"}),x.text]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-xl font-bold text-gray-900",children:y}),u.jsxs("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:[!t.onedrive_uploaded&&u.jsx("button",{onClick:g,disabled:s||!l,className:`p-2 rounded-lg transition-colors ${s||!l?"text-gray-400 bg-gray-50 cursor-not-allowed":"text-blue-500 hover:bg-blue-50"}`,title:l?s?"Uploading to OneDrive...":"Upload to OneDrive":"Please connect to Microsoft OneDrive first",children:s?u.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):u.jsx(Rf,{className:"w-4 h-4"})}),t.onedrive_uploaded&&u.jsx("button",{onClick:p,disabled:o||!l,className:`p-2 rounded-lg transition-colors ${o||!l?"text-gray-400 bg-gray-50 cursor-not-allowed":"text-emerald-500 hover:bg-emerald-50"}`,title:l?o?"Resyncing to Excel...":"Resync to Excel":"Please connect to Microsoft OneDrive first",children:o?u.jsx("div",{className:"w-4 h-4 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"}):u.jsx(Y0,{className:"w-4 h-4"})}),u.jsx("button",{onClick:F=>{F.stopPropagation(),e(t)},className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit invoice",children:u.jsx(q0,{className:"w-4 h-4"})}),u.jsx("button",{onClick:F=>{F.stopPropagation(),n(t.id)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete invoice",children:u.jsx(J0,{className:"w-4 h-4"})})]}),(d||o)&&u.jsx("p",{className:"text-xs text-red-600 mt-1 max-w-32 text-right",children:d})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${_()}`,children:w()}),u.jsx("div",{className:"flex items-center gap-2",children:t.file_type==="pdf"?u.jsx(zi,{className:"w-4 h-4 text-red-600"}):u.jsx(V0,{className:"w-4 h-4 text-blue-600"})})]})]}),u.jsx(br,{isOpen:f.isOpen,onClose:f.handleClose,title:((S=f.config)==null?void 0:S.title)||"",message:((E=f.config)==null?void 0:E.message)||"",type:(b=f.config)==null?void 0:b.type,buttonText:(N=f.config)==null?void 0:N.buttonText})]})}function Nx({onAddInvoice:t,onEditInvoice:e,onShowSettings:n}){var re,bt,Je,Et,We,vt,Cr,R;const{signOut:r,user:s}=ww(),[i,o]=k.useState([]),[a,l]=k.useState([]),[c,d]=k.useState({}),[h,f]=k.useState(new Set),[v,y]=k.useState(new Set),[w,_]=k.useState(""),[g,p]=k.useState("All"),[m,x]=k.useState(!0),[S,E]=k.useState(new Set),b=nv(),N=Er();k.useEffect(()=>{F()},[]),k.useEffect(()=>{const j=setTimeout(()=>{m&&(console.warn("Loading invoices timed out, setting loading to false"),x(!1))},1e4);return()=>clearTimeout(j)},[m]),k.useEffect(()=>{s||(o([]),l([]),d({}),_(""),p("All"))},[s]),k.useEffect(()=>{C()},[i,w,g]),k.useEffect(()=>{A()},[a]);const F=async()=>{x(!0);try{console.log("Starting to load invoices...");const j=await tt.getInvoices();console.log("Loaded invoices:",j.length),o(j)}catch(j){console.error("Error loading invoices:",j),N.showAlert({title:"Loading Failed",message:"Failed to load invoices. Please try refreshing the page.",type:"error"}),o([])}finally{x(!1)}},C=()=>{let j=i;w&&(j=j.filter(L=>L.customer_name.toLowerCase().includes(w.toLowerCase()))),g!=="All"&&(j=j.filter(L=>L.description_category===g)),l(j)},A=()=>{const j={};a.forEach(V=>{try{const[de,ye]=V.invoice_date.split("-"),Pe=de,Qe=`${de}-${ye}`;j[Pe]||(j[Pe]={}),j[Pe][Qe]||(j[Pe][Qe]=[]),j[Pe][Qe].push(V)}catch{console.error("Error parsing date for invoice:",V.id,V.invoice_date)}});const L={};Object.keys(j).sort((V,de)=>parseInt(de)-parseInt(V)).forEach(V=>{L[V]={},Object.keys(j[V]).sort((de,ye)=>ye.localeCompare(de)).forEach(de=>{L[V][de]=j[V][de].sort((ye,Pe)=>ye.invoice_date.localeCompare(Pe.invoice_date))})}),d(L);const I=new Date().getFullYear().toString(),Q=new Date().toISOString().slice(0,7);L[I]&&(f(V=>new Set([...V,I])),L[I][Q]&&y(V=>new Set([...V,Q])))},W=j=>{f(L=>{const I=new Set(L);return I.has(j)?(I.delete(j),Object.keys(c[j]||{}).forEach(Q=>{y(V=>{const de=new Set(V);return de.delete(Q),de})})):I.add(j),I})},ce=j=>{y(L=>{const I=new Set(L);return I.has(j)?I.delete(j):I.add(j),I})},gt=j=>{const[L,I]=j.split("-");return new Date(parseInt(L),parseInt(I)-1).toLocaleDateString("en-US",{month:"short"})},$=j=>j.reduce((L,I)=>L+I.invoice_amount,0),Y=j=>Object.values(j).flat().reduce((L,I)=>L+I.invoice_amount,0),Ee=async j=>{const L=i.find(I=>I.id===j);b.showConfirm({title:"Delete Invoice",message:`Are you sure you want to delete the invoice for ${(L==null?void 0:L.customer_name)||"this customer"}? This action cannot be undone.`,confirmText:"Delete",type:"error",onConfirm:async()=>{try{L!=null&&L.file_url&&await tt.deleteFile(L.file_url),await tt.deleteInvoice(j),o(I=>I.filter(Q=>Q.id!==j))}catch(I){console.error("Error deleting invoice:",I),N.showAlert({title:"Delete Failed",message:"Failed to delete the invoice. Please try again.",type:"error"})}}})},P=j=>{o(L=>L.map(I=>I.id===j.id?j:I)),l(L=>L.map(I=>I.id===j.id?j:I))},D=async(j,L)=>{const I=L.filter(Q=>!Q.onedrive_uploaded);if(I.length===0){N.showAlert({title:"Already Synced",message:"All invoices in this month are already synced to OneDrive.",type:"info"});return}b.showConfirm({title:"Sync to OneDrive",message:`Sync ${I.length} unsynced invoices from ${gt(j)} to OneDrive and Excel?`,confirmText:"Sync All",type:"info",onConfirm:async()=>{E(ye=>new Set([...ye,j]));let Q=0,V=0;const de=[];try{for(const Pe of I){try{const Qe=await tt.uploadToOneDrive(Pe);Qe.success?(Q++,o(up=>up.map(yo=>yo.id===Pe.id?{...yo,onedrive_uploaded:!0,onedrive_file_url:Qe.fileUrl,excel_synced:!0}:yo))):(V++,de.push(`${Pe.customer_name}: ${Qe.error}`))}catch(Qe){V++,de.push(`${Pe.customer_name}: ${Qe instanceof Error?Qe.message:"Unknown error"}`)}await new Promise(Qe=>setTimeout(Qe,500))}let ye=`Successfully synced: ${Q} invoices`;V>0&&(ye+=`
Failed to sync: ${V} invoices`,de.length>0&&(ye+=`

Errors:
${de.slice(0,3).join(`
`)}`,de.length>3&&(ye+=`
... and ${de.length-3} more errors`))),N.showAlert({title:"Sync Complete",message:ye,type:V>0?"warning":"success"})}catch(ye){console.error("Batch sync error:",ye),N.showAlert({title:"Sync Failed",message:`Batch sync failed: ${ye instanceof Error?ye.message:"Unknown error"}`,type:"error"})}finally{E(ye=>{const Pe=new Set(ye);return Pe.delete(j),Pe})}}})},M=()=>a.reduce((j,L)=>j+L.invoice_amount,0),J=["All","Massage Therapy","Physio Therapy","Dentist","Prescription Medication","Vision","Other"];return m?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading invoices..."})]})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white shadow-sm border-b",children:u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoice Manager"}),u.jsxs("p",{className:"text-gray-600 mt-1",children:[a.length," invoices  Total: ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(M())]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:n,className:"p-3 text-gray-600 hover:bg-gray-100 rounded-xl transition-colors",title:"Settings",children:u.jsx(Ja,{className:"w-6 h-6"})}),u.jsx("button",{onClick:r,className:"px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Sign Out",children:"Sign Out"})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(G0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Search by customer name...",value:w,onChange:j=>_(j.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(B0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("select",{value:g,onChange:j=>p(j.target.value),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white",children:J.map(j=>u.jsx("option",{value:j,children:j},j))})]})]})]})}),u.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:a.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(zi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:w||g!=="All"?"No matching invoices":"No invoices yet"}),u.jsx("p",{className:"text-gray-500 mb-6",children:w||g!=="All"?"Try adjusting your search or filter criteria.":"Get started by adding your first invoice."}),!w&&g==="All"&&u.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium",children:[u.jsx(Ru,{className:"w-5 h-5"}),"Add Your First Invoice"]})]}):u.jsx("div",{className:"space-y-6",children:Object.entries(c).map(([j,L])=>u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[u.jsxs("button",{onClick:()=>W(j),className:"w-full flex items-center justify-between p-6 hover:bg-gray-50 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[h.has(j)?u.jsx(Pu,{className:"w-5 h-5 text-gray-500"}):u.jsx(Ui,{className:"w-5 h-5 text-gray-500"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(F0,{className:"w-6 h-6 text-blue-600"}),u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:j})]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-right",children:[u.jsx("span",{className:"text-xl font-bold text-green-600",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Y(L))}),u.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",Object.values(L).flat().length,")"]})]})]}),h.has(j)&&u.jsx("div",{className:"border-t",children:Object.entries(L).map(([I,Q])=>u.jsxs("div",{className:"border-b last:border-b-0",children:[u.jsxs("button",{onClick:()=>ce(I),className:"w-full flex items-center justify-between p-4 pl-16 hover:bg-gray-50 transition-colors group",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[v.has(I)?u.jsx(Pu,{className:"w-4 h-4 text-gray-400"}):u.jsx(Ui,{className:"w-4 h-4 text-gray-400"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate",children:gt(I)}),Q.every(V=>V.onedrive_uploaded)&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[u.jsx(vr,{className:"w-3 h-3"}),"All Synced"]})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-shrink-0",children:[Q.some(V=>!V.onedrive_uploaded)&&u.jsx("button",{onClick:V=>{V.stopPropagation(),D(I,Q)},disabled:S.has(I),className:`flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 rounded-lg text-xs sm:text-sm font-medium transition-colors ${S.has(I)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,title:`Sync all unsynced invoices in ${gt(I)}`,children:S.has(I)?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-3 h-3 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"hidden sm:inline",children:"Syncing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Rf,{className:"w-3 h-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Sync All"}),u.jsx("span",{className:"sm:hidden",children:"Sync"}),u.jsxs("span",{children:["(",Q.filter(V=>!V.onedrive_uploaded).length,")"]})]})}),u.jsxs("div",{className:"text-right flex-shrink-0",children:[u.jsx("span",{className:"text-sm sm:text-lg font-bold text-blue-600",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format($(Q))}),u.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 ml-1",children:["(",Q.length,")"]})]})]})]}),v.has(I)&&u.jsx("div",{className:"p-4 pl-16 bg-gray-50",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map(V=>u.jsx(Cx,{invoice:V,onEdit:e,onDelete:Ee,onInvoiceUpdate:P},V.id))})})]},I))})]},j))})}),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-10",children:u.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:u.jsx("div",{className:"flex items-center justify-center",children:u.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-8 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium shadow-sm",children:[u.jsx(Ru,{className:"w-5 h-5"}),"Add Invoice"]})})})}),u.jsx("div",{className:"h-20"}),u.jsx(tv,{isOpen:b.isOpen,onClose:b.handleClose,onConfirm:b.handleConfirm,title:((re=b.config)==null?void 0:re.title)||"",message:((bt=b.config)==null?void 0:bt.message)||"",confirmText:(Je=b.config)==null?void 0:Je.confirmText,cancelText:(Et=b.config)==null?void 0:Et.cancelText,type:(We=b.config)==null?void 0:We.type,isLoading:b.isLoading}),u.jsx(br,{isOpen:N.isOpen,onClose:N.handleClose,title:((vt=N.config)==null?void 0:vt.title)||"",message:((Cr=N.config)==null?void 0:Cr.message)||"",type:(R=N.config)==null?void 0:R.type})]})}function Px({src:t,alt:e,isPdf:n=!1,isOpen:r,onClose:s}){const[i,o]=k.useState(1),[a,l]=k.useState({x:0,y:0}),[c,d]=k.useState(!1),[h,f]=k.useState({x:0,y:0}),[v,y]=k.useState(0),[w,_]=k.useState({x:0,y:0}),[g,p]=k.useState(!1);k.useEffect(()=>(r?(document.body.style.overflow="hidden",o(1),l({x:0,y:0})):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),k.useEffect(()=>{const $=Y=>{r&&(Y.key==="Escape"?s():Y.key==="+"||Y.key==="="?m():Y.key==="-"?x():Y.key==="0"&&S())};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[r]);const m=()=>{o($=>Math.min($*1.2,5))},x=()=>{o($=>Math.max($/1.2,.1))},S=()=>{o(1),l({x:0,y:0})},E=$=>{if($.length<2)return 0;const Y=$[0],Ee=$[1];return Math.sqrt(Math.pow(Ee.clientX-Y.clientX,2)+Math.pow(Ee.clientY-Y.clientY,2))},b=$=>$.length===1?{x:$[0].clientX,y:$[0].clientY}:$.length>=2?{x:($[0].clientX+$[1].clientX)/2,y:($[0].clientY+$[1].clientY)/2}:{x:0,y:0},N=$=>{if($.preventDefault(),$.touches.length===2)p(!0),d(!1),y(E($.touches)),_(b($.touches));else if($.touches.length===1&&i>1){p(!1),d(!0);const Y=$.touches[0];f({x:Y.clientX-a.x,y:Y.clientY-a.y})}},F=$=>{if($.preventDefault(),$.touches.length===2&&g){const Y=E($.touches),Ee=b($.touches);if(v>0){const P=Y/v,D=Math.min(Math.max(i*P,.1),5);o(D);const M={x:Ee.x-w.x,y:Ee.y-w.y};l(J=>({x:J.x+M.x,y:J.y+M.y}))}y(Y),_(Ee)}else if($.touches.length===1&&c&&i>1){const Y=$.touches[0];l({x:Y.clientX-h.x,y:Y.clientY-h.y})}},C=$=>{if($.preventDefault(),$.touches.length===0)d(!1),p(!1),y(0);else if($.touches.length===1&&g&&(p(!1),i>1)){d(!0);const Y=$.touches[0];f({x:Y.clientX-a.x,y:Y.clientY-a.y})}},A=$=>{i>1&&(d(!0),f({x:$.clientX-a.x,y:$.clientY-a.y}))},W=$=>{c&&i>1&&l({x:$.clientX-h.x,y:$.clientY-h.y})},ce=()=>{d(!1)},gt=$=>{$.preventDefault();const Y=$.deltaY>0?.9:1.1;o(Ee=>Math.min(Math.max(Ee*Y,.1),5))};return r?u.jsxs("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center",children:[u.jsxs("div",{className:"absolute top-4 left-4 right-4 flex items-center justify-between z-10",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:m,className:"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-colors",title:"Zoom In (+)",children:u.jsx(X0,{className:"w-5 h-5"})}),u.jsx("button",{onClick:x,className:"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-colors",title:"Zoom Out (-)",children:u.jsx(Z0,{className:"w-5 h-5"})}),u.jsx("button",{onClick:S,className:"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-colors",title:"Reset (0)",children:u.jsx(K0,{className:"w-5 h-5"})}),u.jsxs("span",{className:"text-white text-sm bg-white bg-opacity-20 px-3 py-2 rounded-lg",children:[Math.round(i*100),"%"]})]}),u.jsx("button",{onClick:s,className:"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-colors",title:"Close (Esc)",children:u.jsx(js,{className:"w-6 h-6"})})]}),u.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden cursor-move",onMouseDown:A,onMouseMove:W,onMouseUp:ce,onMouseLeave:ce,onWheel:gt,onTouchStart:N,onTouchMove:F,onTouchEnd:C,style:{cursor:n?"default":i>1?c?"grabbing":"grab":"default"},children:n?u.jsx("iframe",{src:t,title:e,className:"w-full h-full border-0"}):u.jsx("img",{src:t,alt:e,className:"max-w-none transition-transform duration-200 select-none",style:{transform:`scale(${i}) translate(${a.x/i}px, ${a.y/i}px)`},draggable:!1})}),u.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white text-sm bg-white bg-opacity-20 px-4 py-2 rounded-lg",children:n?"Use browser PDF controls  Press Esc to close":"Pinch to zoom  Drag to pan  Press Esc to close"})]}):null}function Ox({onFileSelect:t,selectedFile:e,onClearFile:n,existingFileUrl:r}){const s=k.useRef(null),i=k.useRef(null),[o,a]=k.useState(""),[l,c]=k.useState(!1),[d,h]=k.useState(!1);k.useEffect(()=>{(async()=>{if(console.log("--- loadPreview ---"),console.log("selectedFile:",e),console.log("existingFileUrl:",r),e)if(c(e.type.includes("pdf")),e.type.startsWith("image/")){const w=new FileReader;w.onload=_=>{var g,p;a((g=_.target)==null?void 0:g.result),console.log("Preview URL for selected file (image):",(p=_.target)==null?void 0:p.result)},w.readAsDataURL(e)}else{const w=URL.createObjectURL(e);a(w),console.log("Preview URL for selected file (pdf):",w)}else r?(a(r),console.log("Using existing file URL:",r),c(r.toLowerCase().includes(".pdf"))):(a(""),c(!1))})()},[e,r]);const f=y=>{console.log("handleFileSelect file:",y),t(y)},v=()=>{console.log("handleClearFile called"),n(),a(""),c(!1),s.current&&(s.current.value=""),i.current&&(i.current.value="")};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("button",{type:"button",onClick:()=>{var y;return(y=i.current)==null?void 0:y.click()},className:"flex items-center justify-center gap-3 p-6 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-400 hover:bg-blue-50 transition-all duration-200",children:[u.jsx(Nu,{className:"w-6 h-6 text-blue-600"}),u.jsx("span",{className:"text-blue-600 font-medium",children:"Take Photo"})]}),u.jsxs("button",{type:"button",onClick:()=>{var y;return(y=s.current)==null?void 0:y.click()},className:"flex items-center justify-center gap-3 p-6 border-2 border-dashed border-emerald-300 rounded-xl hover:border-emerald-400 hover:bg-emerald-50 transition-all duration-200",children:[u.jsx(Q0,{className:"w-6 h-6 text-emerald-600"}),u.jsx("span",{className:"text-emerald-600 font-medium",children:"Upload File"})]})]}),u.jsx("input",{ref:i,type:"file",accept:"image/*",capture:"environment",onChange:y=>{var w;return((w=y.target.files)==null?void 0:w[0])&&f(y.target.files[0])},className:"hidden"}),u.jsx("input",{ref:s,type:"file",accept:"image/*,.pdf",onChange:y=>{var w;return((w=y.target.files)==null?void 0:w[0])&&f(y.target.files[0])},className:"hidden"}),(e||r)&&u.jsxs("div",{className:"relative bg-gray-50 rounded-xl p-4 border",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[l?u.jsx(zi,{className:"w-5 h-5 text-red-600"}):u.jsx(Nu,{className:"w-5 h-5 text-blue-600"}),u.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:(e==null?void 0:e.name)||"Current invoice file"})]}),u.jsx("button",{type:"button",onClick:v,className:"p-1 hover:bg-gray-200 rounded transition-colors",children:u.jsx(js,{className:"w-4 h-4 text-gray-500"})})]}),o&&!l&&u.jsx("div",{className:"rounded-lg overflow-hidden border",children:u.jsx("img",{src:o,alt:"Invoice preview",className:"w-full h-48 object-contain bg-white cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>h(!0),title:"Click to view fullscreen"})}),l&&u.jsx("div",{className:"flex items-center justify-center h-32 bg-gray-100 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>h(!0),title:"Click to view fullscreen",children:u.jsxs("div",{className:"text-center",children:[u.jsx(zi,{className:"w-8 h-8 text-red-600 mx-auto mb-2"}),u.jsx("p",{className:"text-sm text-gray-600",children:"PDF Ready for Upload"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to preview"})]})})]}),(o||l)&&u.jsx(Px,{src:o,alt:"Invoice preview",isPdf:l,isOpen:d,onClose:()=>h(!1)})]})}const os=class os{static async extractInvoiceData(e){var n,r;try{const s=await e.arrayBuffer();let i="image/jpeg";e.type==="application/pdf"?i="application/pdf":e.type==="image/png"?i="image/png":(e.type==="image/jpeg"||e.type==="image/jpg")&&(i="image/jpeg");const o=await fetch(this.API_URL,{method:"POST",headers:{"Content-Type":i,"X-WORKER-EXTRACTOR-ID":this.EXTRACTOR_ID,"X-WORKER-TOKEN":this.TOKEN},body:s});if(!o.ok)throw new Error(`OCR API request failed: ${o.status} ${o.statusText}`);const l=(r=(n=(await o.json()).documents)==null?void 0:n[0])==null?void 0:r.data;if(!l)throw new Error("No data extracted from the document");console.log("extractedData:",JSON.stringify(l,null,2));const c={};if(l.customer_name&&(c.customer_name=this.toProperCase(l.customer_name.trim())),l.invoice_date){const d=l.invoice_date.trim(),h=this.formatDateForInput(d);h&&(c.invoice_date=h)}if(l.total!==void 0&&l.total!==null){const d=parseFloat(l.total.toString());isNaN(d)||(c.invoice_amount=d.toFixed(2))}return c}catch(s){throw console.error("OCR extraction failed:",s),new Error(`Failed to extract invoice data: ${s instanceof Error?s.message:"Unknown error"}`)}}static formatDateForInput(e){try{const n=new Date(e);if(!isNaN(n.getTime())){const s=n.getUTCFullYear(),i=(n.getUTCMonth()+1).toString().padStart(2,"0"),o=n.getUTCDate().toString().padStart(2,"0");return console.log(`returning final (UTC): ${s}-${i}-${o}`),`${s}-${i}-${o}`}const r=[/(\d{1,2})\/(\d{1,2})\/(\d{4})/,/(\d{1,2})-(\d{1,2})-(\d{4})/,/(\d{4})-(\d{1,2})-(\d{1,2})/,/(\d{1,2})\.(\d{1,2})\.(\d{4})/];for(const s of r){const i=e.match(s);if(i){const[,o,a,l]=i;if(s===r[2])return`${o}-${a.padStart(2,"0")}-${l.padStart(2,"0")}`;const c=parseInt(o),d=parseInt(a),h=parseInt(l);if(c>=1&&c<=12&&d>=1&&d<=31)return`${h}-${c.toString().padStart(2,"0")}-${d.toString().padStart(2,"0")}`}}return null}catch{return null}}static toProperCase(e){return e.toLowerCase().replace(/\b\w/g,n=>n.toUpperCase())}};os.API_URL="https://worker.formextractorai.com/v2/extract",os.EXTRACTOR_ID="c72158dd-f8d4-41c1-8441-b50961b5a762",os.TOKEN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyZXNvdXJjZV9vd25lcl9pZCI6IjNlZjMzM2E1LTZkZWYtNGY5Ny04Y2MxLWZhN2Y1NTBkYmU2NCIsIndvcmtlcl90b2tlbl9pZCI6IjM5YmNiZDAxLWEwYjItNGNmZC1hZmIxLTg0ZWViMzAyNjc1MSJ9.wgMBS3qQSGxXfkfmxfhz0t-U-am0Vhp164WQezqCDEY";let ll=os;const Ix=["Massage Therapy","Physio Therapy","Dental","Prescription Medication","Vision","Other"];function Rx({invoice:t,onSubmit:e,onCancel:n,isLoading:r}){var S,E,b,N,F;const[s,i]=k.useState(Le),[o,a]=k.useState({customer_name:(t==null?void 0:t.customer_name)||"",invoice_date:(t==null?void 0:t.invoice_date)||"",invoice_amount:((S=t==null?void 0:t.invoice_amount)==null?void 0:S.toString())||"",description_category:(t==null?void 0:t.description_category)||s.general.defaultCategory,description_other:(t==null?void 0:t.description_other)||""}),[l,c]=k.useState(null),[d,h]=k.useState({}),[f,v]=k.useState(!1),[y,w]=k.useState("idle"),_=Er();k.useEffect(()=>{(async()=>{try{const A=await $t.getSettings();i(A),t||a(W=>({...W,description_category:A.general.defaultCategory}))}catch(A){console.error("Failed to load settings:",A)}})()},[t]);const g=()=>{var A;const C={};return o.customer_name.trim()||(C.customer_name="Customer name is required"),o.invoice_date||(C.invoice_date="Invoice date is required"),(!o.invoice_amount||parseFloat(o.invoice_amount)<=0)&&(C.invoice_amount="Valid invoice amount is required"),o.description_category==="Other"&&!((A=o.description_other)!=null&&A.trim())&&(C.description_other="Please specify the description"),!l&&!t&&(C.file="Invoice image or PDF is required"),h(C),Object.keys(C).length===0},p=async C=>{if(C.preventDefault(),!!g())try{await e({...o,file:l||void 0})}catch(A){console.error("Error saving invoice:",A),_.showAlert({title:"Save Failed",message:"Error saving invoice. Please try again.",type:"error"})}},m=(C,A)=>{a(W=>({...W,[C]:A})),d[C]&&h(W=>({...W,[C]:""}))},x=async C=>{if(c(C),s.general.autoExtractOCR){v(!0),w("idle");try{const A=await ll.extractInvoiceData(C);a(ce=>({...ce,customer_name:A.customer_name||ce.customer_name,invoice_date:A.invoice_date||ce.invoice_date,invoice_amount:A.invoice_amount||ce.invoice_amount})),w("success");const W={...d};A.customer_name&&delete W.customer_name,A.invoice_date&&delete W.invoice_date,A.invoice_amount&&delete W.invoice_amount,h(W)}catch(A){console.error("OCR extraction failed:",A),w("error")}finally{v(!1)}}};return u.jsxs("div",{className:"min-h-screen bg-gray-50 p-4",children:[u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[u.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:n,className:"p-2 hover:bg-blue-500 rounded-lg transition-colors",children:u.jsx(If,{className:"w-5 h-5 text-white"})}),u.jsx("h1",{className:"text-xl font-semibold text-white",children:t?"Edit Invoice":"Add New Invoice"})]})}),u.jsx("form",{onSubmit:p,className:"p-6 space-y-6",children:u.jsxs("div",{className:"relative",children:[f&&u.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-xl",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),u.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Extracting invoice data..."}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please wait while we process your document"})]})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t?"Replace Invoice Document (Optional)":"Invoice Document"}),f&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[u.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Extracting data..."]}),y==="success"&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[u.jsx(Au,{className:"w-4 h-4"}),"Data extracted successfully!"]}),y==="error"&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[u.jsx(Au,{className:"w-4 h-4"}),"Extraction failed, please fill manually"]})]}),u.jsx(Ox,{onFileSelect:x,selectedFile:l,onClearFile:()=>c(null),existingFileUrl:t==null?void 0:t.file_url}),d.file&&!t&&u.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.file})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"customer_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name"}),u.jsx("input",{type:"text",id:"customer_name",value:o.customer_name,onChange:C=>m("customer_name",C.target.value),disabled:f,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${f?"bg-gray-50 cursor-not-allowed":d.customer_name?"border-red-300":y==="success"&&o.customer_name?"border-green-300 bg-green-50":"border-gray-300"}`,placeholder:"Enter customer name"}),d.customer_name&&u.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.customer_name})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"invoice_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Date"}),u.jsx("input",{type:"date",id:"invoice_date",value:o.invoice_date,onChange:C=>m("invoice_date",C.target.value),disabled:f,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${f?"bg-gray-50 cursor-not-allowed":d.invoice_date?"border-red-300":y==="success"&&o.invoice_date?"border-green-300 bg-green-50":"border-gray-300"}`}),d.invoice_date&&u.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.invoice_date})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"invoice_amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Amount"}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),u.jsx("input",{type:"number",id:"invoice_amount",step:"0.01",value:o.invoice_amount,onChange:C=>m("invoice_amount",C.target.value),disabled:f,className:`w-full pl-8 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${f?"bg-gray-50 cursor-not-allowed":d.invoice_amount?"border-red-300":y==="success"&&o.invoice_amount?"border-green-300 bg-green-50":"border-gray-300"}`,placeholder:"0.00"})]}),d.invoice_amount&&u.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.invoice_amount})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"description_category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description Category"}),u.jsx("select",{id:"description_category",value:o.description_category,onChange:C=>m("description_category",C.target.value),disabled:f,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:Ix.map(C=>u.jsx("option",{value:C,children:C},C))})]}),o.description_category==="Other"&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"description_other",className:"block text-sm font-medium text-gray-700 mb-2",children:"Specify Description"}),u.jsx("input",{type:"text",id:"description_other",value:o.description_other,onChange:C=>m("description_other",C.target.value),disabled:f,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${f?"bg-gray-50 cursor-not-allowed":d.description_other?"border-red-300":"border-gray-300"}`,placeholder:"Enter custom description"}),d.description_other&&u.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.description_other})]}),u.jsxs("div",{className:"flex gap-4 pt-4",children:[u.jsx("button",{type:"button",onClick:n,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),u.jsxs("button",{type:"submit",disabled:r||f,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:[r||f?u.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):u.jsx(Af,{className:"w-5 h-5"}),r?"Saving...":f?"Processing...":t?"Update Invoice":"Save Invoice"]})]})]})})]})}),u.jsx(br,{isOpen:_.isOpen,onClose:_.handleClose,title:((E=_.config)==null?void 0:E.title)||"",message:((b=_.config)==null?void 0:b.message)||"",type:(N=_.config)==null?void 0:N.type,buttonText:(F=_.config)==null?void 0:F.buttonText})]})}function $x({onBack:t}){var Et,We,vt,Cr;const[e,n]=k.useState(Le);k.useState(!1);const[r,s]=k.useState(!0),[i,o]=k.useState("idle"),[a,l]=k.useState(!1),[c,d]=k.useState([]);k.useState(!1);const[h,f]=k.useState(!1),[v,y]=k.useState(""),[w,_]=k.useState([]),[g,p]=k.useState(!1),[m,x]=k.useState(!1),[S,E]=k.useState(""),[b,N]=k.useState([]),[F,C]=k.useState(!1);k.useState(new Set);const A=Er();k.useEffect(()=>{(async()=>{s(!0);try{console.log("Loading settings...");const I=Date.now(),Q=await $t.getSettings(),V=Date.now()-I;console.log(`Settings loaded in ${V}ms`),n(Q)}catch(I){console.error("Failed to load settings:",I),n(Le),A.showAlert({title:"Settings Load Failed",message:"Failed to load settings from database. Using default settings.",type:"warning"})}finally{s(!1)}})();const j=()=>{const I=xe.isAuthenticated();console.log("Settings page - checking auth status:",I),l(I)};j();const L=()=>{document.hidden||j()};return document.addEventListener("visibilitychange",L),()=>{document.removeEventListener("visibilitychange",L)}},[]);const W=(R,j,L)=>{n(I=>({...I,[R]:{...I[R],[j]:L}}))},ce=async()=>{o("saving");try{await $t.saveSettings(e),o("success"),setTimeout(()=>o("idle"),2e3)}catch(R){console.error("Failed to save settings:",R),o("error"),setTimeout(()=>o("idle"),3e3)}},gt=()=>{try{console.log("Connect OneDrive button clicked"),xe.initiateLogin()}catch(R){console.error("Authentication failed:",R),A.showAlert({title:"Authentication Failed",message:"Authentication failed. Please try again.",type:"error"})}},$=()=>{xe.logout(),l(!1),d([]),console.log("Disconnected from Microsoft OneDrive")},Y=async(R="")=>{if(a){console.log("loadExcelItems called with path:",R),p(!0);try{const[j,L]=await Promise.all([xe.listFolders(R),xe.listExcelFilesInPath(R)]),I=[...j.map(Q=>({...Q,isFolder:!0})),...L.map(Q=>({...Q,isFolder:!1}))];console.log("Loaded Excel items:",I),_(I),y(R)}catch(j){console.error("Failed to load Excel items:",j),A.showAlert({title:"Load Failed",message:`Failed to load items: ${j instanceof Error?j.message:"Unknown error"}. Please check your connection and permissions.`,type:"error"})}finally{p(!1)}}},Ee=(R,j)=>{W("onedrive","excelFileName",R),console.log("Selected Excel file:",{fileName:R,filePath:j}),f(!1)},P=R=>{Y(R)},D=()=>{const R=v.split("/").filter(L=>L.length>0);R.pop();const j=R.join("/");Y(j)},M=async(R="")=>{if(a){console.log("loadFolders called with path:",R),C(!0);try{const j=await xe.listFolders(R);console.log("Loaded folders:",j),N(j),E(R)}catch(j){console.error("Failed to load folders:",j),A.showAlert({title:"Load Failed",message:`Failed to load folders: ${j instanceof Error?j.message:"Unknown error"}. Please check your connection and permissions.`,type:"error"})}finally{C(!1)}}},J=R=>{W("onedrive","invoiceDirectory",R),x(!1)},re=R=>{M(R)},bt=()=>{const R=S.split("/").filter(L=>L.length>0);R.pop();const j=R.join("/");M(j)},Je=()=>{switch(i){case"saving":return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]});case"success":return u.jsxs(u.Fragment,{children:[u.jsx(vr,{className:"w-4 h-4"}),"Saved!"]});case"error":return u.jsxs(u.Fragment,{children:[u.jsx(sc,{className:"w-4 h-4"}),"Error"]});default:return u.jsxs(u.Fragment,{children:[u.jsx(Af,{className:"w-4 h-4"}),"Save Settings"]})}};return r?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading settings..."})]})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white shadow-sm border-b",children:u.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:u.jsx(If,{className:"w-5 h-5 text-gray-600"})}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ja,{className:"w-6 h-6 text-blue-600"}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"})]})]})})}),u.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:u.jsx(Mr,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"OneDrive Integration"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Configure where invoice files are stored and tracked"})]})]}),u.jsx("div",{className:"mb-6 p-4 rounded-lg border",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-3 h-3 rounded-full ${a?"bg-green-500":"bg-gray-300"}`}),u.jsx("span",{className:"font-medium text-gray-900",children:a?"Connected to Microsoft OneDrive":"Not connected"})]}),a?u.jsx("button",{onClick:$,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:"Disconnect"}):u.jsx("button",{onClick:gt,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Connect OneDrive"})]})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("label",{htmlFor:"invoiceDirectory",className:"block text-sm font-medium text-gray-700",children:"Invoice Upload Directory"}),a&&u.jsxs("button",{onClick:()=>{console.log("Browse Folders button clicked"),x(!0),M()},className:"flex items-center gap-2 px-3 py-1 text-xs text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[u.jsx(W0,{className:"w-3 h-3"}),"Browse Folders"]})]}),u.jsx("input",{type:"text",id:"invoiceDirectory",value:e.onedrive.invoiceDirectory,onChange:R=>W("onedrive","invoiceDirectory",R.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"e.g., Invoices, Documents/Invoices, Tax/2024/Invoices"}),u.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Specify the OneDrive folder where invoice files will be uploaded. Use forward slashes for subfolders."})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("label",{htmlFor:"excelFileName",className:"block text-sm font-medium text-gray-700",children:"Excel Tracking File"}),a&&u.jsxs("button",{onClick:()=>{console.log("Browse Excel Files button clicked"),f(!0),Y()},disabled:g,className:"flex items-center gap-2 px-3 py-1 text-xs text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[g?u.jsx("div",{className:"w-3 h-3 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}):u.jsx(Dr,{className:"w-3 h-3"}),"Browse Files"]})]}),u.jsx("input",{type:"text",id:"excelFileName",value:e.onedrive.excelFileName,onChange:R=>W("onedrive","excelFileName",R.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"e.g., Invoice_Tracker.xlsx, Expenses_2024.xlsx"}),u.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Name of the Excel file where invoice data will be tracked. If the file doesn't exist, it will be created automatically."}),c.length>0&&u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Available Excel files:"}),u.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:c.map((R,j)=>u.jsxs("button",{onClick:()=>W("onedrive","excelFileName",R.name),className:"flex items-center gap-2 w-full px-3 py-2 text-left text-xs hover:bg-gray-50 rounded-lg transition-colors",children:[u.jsx(Dr,{className:"w-3 h-3 text-green-600"}),u.jsx("span",{className:"truncate",children:R.name}),u.jsx("span",{className:"text-gray-400 text-xs ml-auto",children:R.path})]},j))})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:u.jsx(Ja,{className:"w-5 h-5 text-emerald-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"General Settings"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Configure default behavior and preferences"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"defaultCategory",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Invoice Category"}),u.jsxs("select",{id:"defaultCategory",value:e.general.defaultCategory,onChange:R=>W("general","defaultCategory",R.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[u.jsx("option",{value:"Massage Therapy",children:"Massage Therapy"}),u.jsx("option",{value:"Physio Therapy",children:"Physio Therapy"}),u.jsx("option",{value:"Dentist",children:"Dentist"}),u.jsx("option",{value:"Prescription Medication",children:"Prescription Medication"}),u.jsx("option",{value:"Vision",children:"Vision"}),u.jsx("option",{value:"Other",children:"Other"})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"autoExtractOCR",className:"text-sm font-medium text-gray-700",children:"Auto-extract data from uploaded files"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically extract customer name, date, and amount using OCR when files are uploaded"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",id:"autoExtractOCR",checked:e.general.autoExtractOCR,onChange:R=>W("general","autoExtractOCR",R.target.checked),className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:ce,disabled:i==="saving",className:`flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-colors ${i==="success"?"bg-green-600 text-white":i==="error"?"bg-red-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50 disabled:cursor-not-allowed`,children:Je()})})]})}),m&&u.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Browse OneDrive Folders"}),u.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:u.jsx(js,{className:"w-5 h-5 text-gray-500"})})]}),u.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gray-600",children:[u.jsx(Mr,{className:"w-4 h-4"}),u.jsxs("span",{children:["Current path: /",S||"OneDrive Root"]})]})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[S&&u.jsxs("button",{onClick:bt,className:"flex items-center gap-2 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[u.jsx(Ou,{className:"w-4 h-4"}),"Go Up"]}),u.jsxs("button",{onClick:()=>J(S),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium ml-auto",children:[u.jsx(vr,{className:"w-4 h-4"}),"Use This Folder"]})]}),u.jsx("div",{className:"border rounded-lg max-h-64 overflow-y-auto",children:F?u.jsxs("div",{className:"flex items-center justify-center py-8",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-3 text-gray-600",children:"Loading folders..."})]}):b.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx(Mr,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),u.jsx("p",{children:"No folders found in this location"})]}):u.jsx("div",{className:"divide-y",children:b.map((R,j)=>u.jsxs("button",{onClick:()=>re(R.path),className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 transition-colors",children:[u.jsx(Mr,{className:"w-5 h-5 text-blue-600"}),u.jsx("span",{className:"flex-1 text-gray-900",children:R.name}),u.jsx(Ui,{className:"w-4 h-4 text-gray-400"})]},j))})})]})]})}),h&&u.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Browse Excel Files"}),u.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:u.jsx(js,{className:"w-5 h-5 text-gray-500"})})]}),u.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gray-600",children:[u.jsx(Dr,{className:"w-4 h-4"}),u.jsxs("span",{children:["Current path: /",v||"OneDrive Root"]})]})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"flex items-center gap-2 mb-4",children:v&&u.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[u.jsx(Ou,{className:"w-4 h-4"}),"Go Up"]})}),u.jsx("div",{className:"border rounded-lg max-h-64 overflow-y-auto",children:g?u.jsxs("div",{className:"flex items-center justify-center py-8",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-3 text-gray-600",children:"Loading..."})]}):w.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx(Dr,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),u.jsx("p",{children:"No folders or Excel files found in this location"})]}):u.jsx("div",{className:"divide-y",children:w.map((R,j)=>u.jsxs("button",{onClick:()=>{R.isFolder?P(R.path):Ee(R.name,R.path)},className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 transition-colors",children:[R.isFolder?u.jsx(Mr,{className:"w-5 h-5 text-blue-600"}):u.jsx(Dr,{className:"w-5 h-5 text-green-600"}),u.jsx("span",{className:"flex-1 text-gray-900",children:R.name}),R.isFolder?u.jsx(Ui,{className:"w-4 h-4 text-gray-400"}):u.jsx("span",{className:"text-xs text-gray-500",children:"Select"})]},j))})})]})]})}),u.jsx(br,{isOpen:A.isOpen,onClose:A.handleClose,title:((Et=A.config)==null?void 0:Et.title)||"",message:((We=A.config)==null?void 0:We.message)||"",type:(vt=A.config)==null?void 0:vt.type,buttonText:(Cr=A.config)==null?void 0:Cr.buttonText})]})}function Ax(){const[t,e]=k.useState("list"),[n,r]=k.useState(null),[s,i]=k.useState(!1),o=Er(),a=()=>{r(null),e("add")},l=f=>{r(f),e("edit")},c=()=>{e("settings")},d=()=>{r(null),e("list")},h=async f=>{i(!0);try{let v;if(n){if(v=await tt.updateInvoice(n.id,f),console.log("Invoice updated:",v),v.onedrive_uploaded&&v.excel_synced)try{await tt.resyncToExcel(v),console.log("Invoice changes resynced to Excel")}catch(y){console.error("Failed to resync to Excel:",y)}}else v=await tt.createInvoice(f),console.log("Invoice created:",v);r(null),e("list"),xe.isAuthenticated()&&setTimeout(async()=>{try{console.log("Microsoft is connected, auto-syncing to OneDrive in background...");const y=await tt.uploadToOneDrive(v);y.success?console.log("Background auto-sync to OneDrive successful"):(console.warn("Background auto-sync to OneDrive failed:",y.error),o.showAlert({title:"Background Sync Warning",message:`Invoice saved successfully, but background sync to OneDrive failed: ${y.error}. You can manually sync from the invoice list.`,type:"warning"}))}catch(y){console.error("Background auto-sync error:",y),o.showAlert({title:"Background Sync Warning",message:"Invoice saved successfully, but background sync to OneDrive encountered an error. You can manually sync from the invoice list.",type:"warning"})}},100)}catch(v){console.error("Error saving invoice:",v),o.showAlert({title:"Save Failed",message:"Error saving invoice. Please try again.",type:"error"})}finally{i(!1)}};return u.jsx(xw,{children:u.jsx(Lx,{currentView:t,editingInvoice:n,isSubmitting:s,alertModal:o,onAddInvoice:a,onEditInvoice:l,onShowSettings:c,onBackToList:d,onSubmitInvoice:h})})}function Lx({currentView:t,editingInvoice:e,isSubmitting:n,alertModal:r,onAddInvoice:s,onEditInvoice:i,onShowSettings:o,onBackToList:a,onSubmitInvoice:l}){var c,d,h,f;return t==="settings"?u.jsx($x,{onBack:a}):t==="add"||t==="edit"?u.jsx(Rx,{invoice:e,onSubmit:l,onCancel:a,isLoading:n}):u.jsxs(u.Fragment,{children:[u.jsx(Nx,{onAddInvoice:s,onEditInvoice:i,onShowSettings:o}),u.jsx(br,{isOpen:r.isOpen,onClose:r.handleClose,title:((c=r.config)==null?void 0:c.title)||"",message:((d=r.config)==null?void 0:d.message)||"",type:(h=r.config)==null?void 0:h.type,buttonText:(f=r.config)==null?void 0:f.buttonText})]})}xe.configure({clientId:"9117a1ac-c6b7-4222-8e11-290d5cca0bcc",tenantId:"4057aa25-ad69-450c-a984-349410211e98",redirectUri:window.location.origin+"/auth/callback",scopes:["https://graph.microsoft.com/Files.ReadWrite","https://graph.microsoft.com/Sites.ReadWrite.All"]});wf(document.getElementById("root")).render(u.jsx(k.StrictMode,{children:u.jsx($0,{children:u.jsxs(O0,{children:[u.jsx(Ka,{path:"/auth/callback",element:u.jsx(rv,{})}),u.jsx(Ka,{path:"*",element:u.jsx(Ax,{})})]})})}));
