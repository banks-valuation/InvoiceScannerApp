function cp(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var sd={exports:{}},qi={},id={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ps=Symbol.for("react.element"),fp=Symbol.for("react.portal"),pp=Symbol.for("react.fragment"),gp=Symbol.for("react.strict_mode"),mp=Symbol.for("react.profiler"),vp=Symbol.for("react.provider"),yp=Symbol.for("react.context"),wp=Symbol.for("react.forward_ref"),xp=Symbol.for("react.suspense"),_p=Symbol.for("react.memo"),kp=Symbol.for("react.lazy"),du=Symbol.iterator;function Sp(t){return t===null||typeof t!="object"?null:(t=du&&t[du]||t["@@iterator"],typeof t=="function"?t:null)}var od={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ad=Object.assign,ld={};function xr(t,e,n){this.props=t,this.context=e,this.refs=ld,this.updater=n||od}xr.prototype.isReactComponent={};xr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ud(){}ud.prototype=xr.prototype;function ul(t,e,n){this.props=t,this.context=e,this.refs=ld,this.updater=n||od}var cl=ul.prototype=new ud;cl.constructor=ul;ad(cl,xr.prototype);cl.isPureReactComponent=!0;var hu=Array.isArray,cd=Object.prototype.hasOwnProperty,dl={current:null},dd={key:!0,ref:!0,__self:!0,__source:!0};function hd(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)cd.call(e,r)&&!dd.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ps,type:t,key:i,ref:o,props:s,_owner:dl.current}}function bp(t,e){return{$$typeof:Ps,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ps}function Ep(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fu=/\/+/g;function wo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ep(""+t.key):e.toString(36)}function ri(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ps:case fp:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+wo(o,0):r,hu(s)?(n="",t!=null&&(n=t.replace(fu,"$&/")+"/"),ri(s,e,n,"",function(u){return u})):s!=null&&(hl(s)&&(s=bp(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fu,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",hu(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+wo(i,a);o+=ri(i,e,n,l,s)}else if(l=Sp(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+wo(i,a++),o+=ri(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $s(t,e,n){if(t==null)return t;var r=[],s=0;return ri(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Re={current:null},si={transition:null},Cp={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:si,ReactCurrentOwner:dl};function fd(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:$s,forEach:function(t,e,n){$s(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $s(t,function(){e++}),e},toArray:function(t){return $s(t,function(e){return e})||[]},only:function(t){if(!hl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};B.Component=xr;B.Fragment=pp;B.Profiler=mp;B.PureComponent=ul;B.StrictMode=gp;B.Suspense=xp;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cp;B.act=fd;B.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ad({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=dl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)cd.call(e,l)&&!dd.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ps,type:t.type,key:s,ref:i,props:r,_owner:o}};B.createContext=function(t){return t={$$typeof:yp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vp,_context:t},t.Consumer=t};B.createElement=hd;B.createFactory=function(t){var e=hd.bind(null,t);return e.type=t,e};B.createRef=function(){return{current:null}};B.forwardRef=function(t){return{$$typeof:wp,render:t}};B.isValidElement=hl;B.lazy=function(t){return{$$typeof:kp,_payload:{_status:-1,_result:t},_init:jp}};B.memo=function(t,e){return{$$typeof:_p,type:t,compare:e===void 0?null:e}};B.startTransition=function(t){var e=si.transition;si.transition={};try{t()}finally{si.transition=e}};B.unstable_act=fd;B.useCallback=function(t,e){return Re.current.useCallback(t,e)};B.useContext=function(t){return Re.current.useContext(t)};B.useDebugValue=function(){};B.useDeferredValue=function(t){return Re.current.useDeferredValue(t)};B.useEffect=function(t,e){return Re.current.useEffect(t,e)};B.useId=function(){return Re.current.useId()};B.useImperativeHandle=function(t,e,n){return Re.current.useImperativeHandle(t,e,n)};B.useInsertionEffect=function(t,e){return Re.current.useInsertionEffect(t,e)};B.useLayoutEffect=function(t,e){return Re.current.useLayoutEffect(t,e)};B.useMemo=function(t,e){return Re.current.useMemo(t,e)};B.useReducer=function(t,e,n){return Re.current.useReducer(t,e,n)};B.useRef=function(t){return Re.current.useRef(t)};B.useState=function(t){return Re.current.useState(t)};B.useSyncExternalStore=function(t,e,n){return Re.current.useSyncExternalStore(t,e,n)};B.useTransition=function(){return Re.current.useTransition()};B.version="18.3.1";id.exports=B;var k=id.exports;const Vn=dp(k),Np=cp({__proto__:null,default:Vn},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp=k,Tp=Symbol.for("react.element"),Op=Symbol.for("react.fragment"),Ip=Object.prototype.hasOwnProperty,Rp=Pp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ap={key:!0,ref:!0,__self:!0,__source:!0};function pd(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ip.call(e,r)&&!Ap.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Tp,type:t,key:i,ref:o,props:s,_owner:Rp.current}}qi.Fragment=Op;qi.jsx=pd;qi.jsxs=pd;sd.exports=qi;var c=sd.exports,gd={exports:{}},Ke={},md={exports:{}},vd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,D){var M=T.length;T.push(D);e:for(;0<M;){var J=M-1>>>1,se=T[J];if(0<s(se,D))T[J]=D,T[M]=se,M=J;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var D=T[0],M=T.pop();if(M!==D){T[0]=M;e:for(var J=0,se=T.length,bt=se>>>1;J<bt;){var Qe=2*(J+1)-1,Et=T[Qe],Be=Qe+1,vt=T[Be];if(0>s(Et,M))Be<se&&0>s(vt,Et)?(T[J]=vt,T[Be]=M,J=Be):(T[J]=Et,T[Qe]=M,J=Qe);else if(Be<se&&0>s(vt,M))T[J]=vt,T[Be]=M,J=Be;else break e}}return D}function s(T,D){var M=T.sortIndex-D.sortIndex;return M!==0?M:T.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,y=!1,v=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=T)r(u),D.sortIndex=D.expirationTime,e(l,D);else break;D=n(u)}}function x(T){if(w=!1,g(T),!v)if(n(l)!==null)v=!0,q(b);else{var D=n(u);D!==null&&be(x,D.startTime-T)}}function b(T,D){v=!1,w&&(w=!1,m(P),P=-1),y=!0;var M=f;try{for(g(D),h=n(l);h!==null&&(!(h.expirationTime>D)||T&&!L());){var J=h.callback;if(typeof J=="function"){h.callback=null,f=h.priorityLevel;var se=J(h.expirationTime<=D);D=t.unstable_now(),typeof se=="function"?h.callback=se:h===n(l)&&r(l),g(D)}else r(l);h=n(l)}if(h!==null)var bt=!0;else{var Qe=n(u);Qe!==null&&be(x,Qe.startTime-D),bt=!1}return bt}finally{h=null,f=M,y=!1}}var j=!1,E=null,P=-1,U=5,N=-1;function L(){return!(t.unstable_now()-N<U)}function W(){if(E!==null){var T=t.unstable_now();N=T;var D=!0;try{D=E(!0,T)}finally{D?ue():(j=!1,E=null)}}else j=!1}var ue;if(typeof p=="function")ue=function(){p(W)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,A=mt.port2;mt.port1.onmessage=W,ue=function(){A.postMessage(null)}}else ue=function(){_(W,0)};function q(T){E=T,j||(j=!0,ue())}function be(T,D){P=_(function(){T(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,q(b))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(T){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var M=f;f=D;try{return T()}finally{f=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,D){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var M=f;f=T;try{return D()}finally{f=M}},t.unstable_scheduleCallback=function(T,D,M){var J=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?J+M:J):M=J,T){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=M+se,T={id:d++,callback:D,priorityLevel:T,startTime:M,expirationTime:se,sortIndex:-1},M>J?(T.sortIndex=M,e(u,T),n(l)===null&&T===n(u)&&(w?(m(P),P=-1):w=!0,be(x,M-J))):(T.sortIndex=se,e(l,T),v||y||(v=!0,q(b))),T},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(T){var D=f;return function(){var M=f;f=D;try{return T.apply(this,arguments)}finally{f=M}}}})(vd);md.exports=vd;var Lp=md.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p=k,Ye=Lp;function C(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yd=new Set,as={};function An(t,e){dr(t,e),dr(t+"Capture",e)}function dr(t,e){for(as[t]=e,t=0;t<e.length;t++)yd.add(e[t])}var At=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ta=Object.prototype.hasOwnProperty,Dp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pu={},gu={};function Mp(t){return ta.call(gu,t)?!0:ta.call(pu,t)?!1:Dp.test(t)?gu[t]=!0:(pu[t]=!0,!1)}function Up(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Fp(t,e,n,r){if(e===null||typeof e>"u"||Up(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ae(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Se[t]=new Ae(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Se[e]=new Ae(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Se[t]=new Ae(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Se[t]=new Ae(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Se[t]=new Ae(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Se[t]=new Ae(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Se[t]=new Ae(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Se[t]=new Ae(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Se[t]=new Ae(t,5,!1,t.toLowerCase(),null,!1,!1)});var fl=/[\-:]([a-z])/g;function pl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fl,pl);Se[e]=new Ae(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fl,pl);Se[e]=new Ae(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fl,pl);Se[e]=new Ae(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Se[t]=new Ae(t,1,!1,t.toLowerCase(),null,!1,!1)});Se.xlinkHref=new Ae("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Se[t]=new Ae(t,1,!1,t.toLowerCase(),null,!0,!0)});function gl(t,e,n,r){var s=Se.hasOwnProperty(e)?Se[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Fp(e,n,s,r)&&(n=null),r||s===null?Mp(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mt=$p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ds=Symbol.for("react.element"),Yn=Symbol.for("react.portal"),Kn=Symbol.for("react.fragment"),ml=Symbol.for("react.strict_mode"),na=Symbol.for("react.profiler"),wd=Symbol.for("react.provider"),xd=Symbol.for("react.context"),vl=Symbol.for("react.forward_ref"),ra=Symbol.for("react.suspense"),sa=Symbol.for("react.suspense_list"),yl=Symbol.for("react.memo"),Wt=Symbol.for("react.lazy"),_d=Symbol.for("react.offscreen"),mu=Symbol.iterator;function Tr(t){return t===null||typeof t!="object"?null:(t=mu&&t[mu]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,xo;function Wr(t){if(xo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xo=e&&e[1]||""}return`
`+xo+t}var _o=!1;function ko(t,e){if(!t||_o)return"";_o=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{_o=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wr(t):""}function zp(t){switch(t.tag){case 5:return Wr(t.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 2:case 15:return t=ko(t.type,!1),t;case 11:return t=ko(t.type.render,!1),t;case 1:return t=ko(t.type,!0),t;default:return""}}function ia(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kn:return"Fragment";case Yn:return"Portal";case na:return"Profiler";case ml:return"StrictMode";case ra:return"Suspense";case sa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xd:return(t.displayName||"Context")+".Consumer";case wd:return(t._context.displayName||"Context")+".Provider";case vl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yl:return e=t.displayName||null,e!==null?e:ia(t.type)||"Memo";case Wt:e=t._payload,t=t._init;try{return ia(t(e))}catch{}}return null}function Bp(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ia(e);case 8:return e===ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ln(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wp(t){var e=kd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ms(t){t._valueTracker||(t._valueTracker=Wp(t))}function Sd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function oa(t,e){var n=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vu(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ln(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bd(t,e){e=e.checked,e!=null&&gl(t,"checked",e,!1)}function aa(t,e){bd(t,e);var n=ln(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?la(t,e.type,n):e.hasOwnProperty("defaultValue")&&la(t,e.type,ln(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yu(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function la(t,e,n){(e!=="number"||gi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vr=Array.isArray;function ir(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ln(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ua(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(C(92));if(Vr(n)){if(1<n.length)throw Error(C(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ln(n)}}function Ed(t,e){var n=ln(e.value),r=ln(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ca(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Us,Cd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Us=Us||document.createElement("div"),Us.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Us.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ls(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vp=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(t){Vp.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kr[e]=Kr[t]})});function Nd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kr.hasOwnProperty(t)&&Kr[t]?(""+e).trim():e+"px"}function Pd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Nd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Hp=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function da(t,e){if(e){if(Hp[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function ha(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fa=null;function wl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pa=null,or=null,ar=null;function _u(t){if(t=Is(t)){if(typeof pa!="function")throw Error(C(280));var e=t.stateNode;e&&(e=Ji(e),pa(t.stateNode,t.type,e))}}function Td(t){or?ar?ar.push(t):ar=[t]:or=t}function Od(){if(or){var t=or,e=ar;if(ar=or=null,_u(t),e)for(t=0;t<e.length;t++)_u(e[t])}}function Id(t,e){return t(e)}function Rd(){}var So=!1;function Ad(t,e,n){if(So)return t(e,n);So=!0;try{return Id(t,e,n)}finally{So=!1,(or!==null||ar!==null)&&(Rd(),Od())}}function us(t,e){var n=t.stateNode;if(n===null)return null;var r=Ji(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(C(231,e,typeof n));return n}var ga=!1;if(At)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){ga=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{ga=!1}function qp(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Gr=!1,mi=null,vi=!1,ma=null,Yp={onError:function(t){Gr=!0,mi=t}};function Kp(t,e,n,r,s,i,o,a,l){Gr=!1,mi=null,qp.apply(Yp,arguments)}function Gp(t,e,n,r,s,i,o,a,l){if(Kp.apply(this,arguments),Gr){if(Gr){var u=mi;Gr=!1,mi=null}else throw Error(C(198));vi||(vi=!0,ma=u)}}function Ln(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ld(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ku(t){if(Ln(t)!==t)throw Error(C(188))}function Qp(t){var e=t.alternate;if(!e){if(e=Ln(t),e===null)throw Error(C(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ku(s),t;if(i===r)return ku(s),e;i=i.sibling}throw Error(C(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(C(189))}}if(n.alternate!==r)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?t:e}function $d(t){return t=Qp(t),t!==null?Dd(t):null}function Dd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Dd(t);if(e!==null)return e;t=t.sibling}return null}var Md=Ye.unstable_scheduleCallback,Su=Ye.unstable_cancelCallback,Jp=Ye.unstable_shouldYield,Xp=Ye.unstable_requestPaint,ce=Ye.unstable_now,Zp=Ye.unstable_getCurrentPriorityLevel,xl=Ye.unstable_ImmediatePriority,Ud=Ye.unstable_UserBlockingPriority,yi=Ye.unstable_NormalPriority,eg=Ye.unstable_LowPriority,Fd=Ye.unstable_IdlePriority,Yi=null,kt=null;function tg(t){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Yi,t,void 0,(t.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:sg,ng=Math.log,rg=Math.LN2;function sg(t){return t>>>=0,t===0?32:31-(ng(t)/rg|0)|0}var Fs=64,zs=4194304;function Hr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Hr(a):(i&=o,i!==0&&(r=Hr(i)))}else o=n&~s,o!==0?r=Hr(o):i!==0&&(r=Hr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ht(e),s=1<<n,r|=t[n],e&=~s;return r}function ig(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function og(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ht(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=ig(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function va(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zd(){var t=Fs;return Fs<<=1,!(Fs&4194240)&&(Fs=64),t}function bo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ts(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ht(e),t[e]=n}function ag(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ht(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function _l(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ht(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Q=0;function Bd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wd,kl,Vd,Hd,qd,ya=!1,Bs=[],Xt=null,Zt=null,en=null,cs=new Map,ds=new Map,qt=[],lg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bu(t,e){switch(t){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":cs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ds.delete(e.pointerId)}}function Ir(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Is(e),e!==null&&kl(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ug(t,e,n,r,s){switch(e){case"focusin":return Xt=Ir(Xt,t,e,n,r,s),!0;case"dragenter":return Zt=Ir(Zt,t,e,n,r,s),!0;case"mouseover":return en=Ir(en,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return cs.set(i,Ir(cs.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ds.set(i,Ir(ds.get(i)||null,t,e,n,r,s)),!0}return!1}function Yd(t){var e=kn(t.target);if(e!==null){var n=Ln(e);if(n!==null){if(e=n.tag,e===13){if(e=Ld(n),e!==null){t.blockedOn=e,qd(t.priority,function(){Vd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ii(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fa=r,n.target.dispatchEvent(r),fa=null}else return e=Is(n),e!==null&&kl(e),t.blockedOn=n,!1;e.shift()}return!0}function Eu(t,e,n){ii(t)&&n.delete(e)}function cg(){ya=!1,Xt!==null&&ii(Xt)&&(Xt=null),Zt!==null&&ii(Zt)&&(Zt=null),en!==null&&ii(en)&&(en=null),cs.forEach(Eu),ds.forEach(Eu)}function Rr(t,e){t.blockedOn===e&&(t.blockedOn=null,ya||(ya=!0,Ye.unstable_scheduleCallback(Ye.unstable_NormalPriority,cg)))}function hs(t){function e(s){return Rr(s,t)}if(0<Bs.length){Rr(Bs[0],t);for(var n=1;n<Bs.length;n++){var r=Bs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xt!==null&&Rr(Xt,t),Zt!==null&&Rr(Zt,t),en!==null&&Rr(en,t),cs.forEach(e),ds.forEach(e),n=0;n<qt.length;n++)r=qt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qt.length&&(n=qt[0],n.blockedOn===null);)Yd(n),n.blockedOn===null&&qt.shift()}var lr=Mt.ReactCurrentBatchConfig,xi=!0;function dg(t,e,n,r){var s=Q,i=lr.transition;lr.transition=null;try{Q=1,Sl(t,e,n,r)}finally{Q=s,lr.transition=i}}function hg(t,e,n,r){var s=Q,i=lr.transition;lr.transition=null;try{Q=4,Sl(t,e,n,r)}finally{Q=s,lr.transition=i}}function Sl(t,e,n,r){if(xi){var s=wa(t,e,n,r);if(s===null)Ao(t,e,r,_i,n),bu(t,r);else if(ug(s,t,e,n,r))r.stopPropagation();else if(bu(t,r),e&4&&-1<lg.indexOf(t)){for(;s!==null;){var i=Is(s);if(i!==null&&Wd(i),i=wa(t,e,n,r),i===null&&Ao(t,e,r,_i,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ao(t,e,r,null,n)}}var _i=null;function wa(t,e,n,r){if(_i=null,t=wl(r),t=kn(t),t!==null)if(e=Ln(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ld(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _i=t,null}function Kd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zp()){case xl:return 1;case Ud:return 4;case yi:case eg:return 16;case Fd:return 536870912;default:return 16}default:return 16}}var Gt=null,bl=null,oi=null;function Gd(){if(oi)return oi;var t,e=bl,n=e.length,r,s="value"in Gt?Gt.value:Gt.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return oi=s.slice(t,1<r?1-r:void 0)}function ai(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ws(){return!0}function ju(){return!1}function Ge(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ws:ju,this.isPropagationStopped=ju,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),e}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},El=Ge(_r),Os=ae({},_r,{view:0,detail:0}),fg=Ge(Os),Eo,jo,Ar,Ki=ae({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ar&&(Ar&&t.type==="mousemove"?(Eo=t.screenX-Ar.screenX,jo=t.screenY-Ar.screenY):jo=Eo=0,Ar=t),Eo)},movementY:function(t){return"movementY"in t?t.movementY:jo}}),Cu=Ge(Ki),pg=ae({},Ki,{dataTransfer:0}),gg=Ge(pg),mg=ae({},Os,{relatedTarget:0}),Co=Ge(mg),vg=ae({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),yg=Ge(vg),wg=ae({},_r,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xg=Ge(wg),_g=ae({},_r,{data:0}),Nu=Ge(_g),kg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bg[t])?!!e[t]:!1}function jl(){return Eg}var jg=ae({},Os,{key:function(t){if(t.key){var e=kg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ai(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jl,charCode:function(t){return t.type==="keypress"?ai(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ai(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cg=Ge(jg),Ng=ae({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pu=Ge(Ng),Pg=ae({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jl}),Tg=Ge(Pg),Og=ae({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ig=Ge(Og),Rg=ae({},Ki,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ag=Ge(Rg),Lg=[9,13,27,32],Cl=At&&"CompositionEvent"in window,Qr=null;At&&"documentMode"in document&&(Qr=document.documentMode);var $g=At&&"TextEvent"in window&&!Qr,Qd=At&&(!Cl||Qr&&8<Qr&&11>=Qr),Tu=" ",Ou=!1;function Jd(t,e){switch(t){case"keyup":return Lg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gn=!1;function Dg(t,e){switch(t){case"compositionend":return Xd(e);case"keypress":return e.which!==32?null:(Ou=!0,Tu);case"textInput":return t=e.data,t===Tu&&Ou?null:t;default:return null}}function Mg(t,e){if(Gn)return t==="compositionend"||!Cl&&Jd(t,e)?(t=Gd(),oi=bl=Gt=null,Gn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qd&&e.locale!=="ko"?null:e.data;default:return null}}var Ug={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ug[t.type]:e==="textarea"}function Zd(t,e,n,r){Td(r),e=ki(e,"onChange"),0<e.length&&(n=new El("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jr=null,fs=null;function Fg(t){ch(t,0)}function Gi(t){var e=Xn(t);if(Sd(e))return t}function zg(t,e){if(t==="change")return e}var eh=!1;if(At){var No;if(At){var Po="oninput"in document;if(!Po){var Ru=document.createElement("div");Ru.setAttribute("oninput","return;"),Po=typeof Ru.oninput=="function"}No=Po}else No=!1;eh=No&&(!document.documentMode||9<document.documentMode)}function Au(){Jr&&(Jr.detachEvent("onpropertychange",th),fs=Jr=null)}function th(t){if(t.propertyName==="value"&&Gi(fs)){var e=[];Zd(e,fs,t,wl(t)),Ad(Fg,e)}}function Bg(t,e,n){t==="focusin"?(Au(),Jr=e,fs=n,Jr.attachEvent("onpropertychange",th)):t==="focusout"&&Au()}function Wg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gi(fs)}function Vg(t,e){if(t==="click")return Gi(e)}function Hg(t,e){if(t==="input"||t==="change")return Gi(e)}function qg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pt=typeof Object.is=="function"?Object.is:qg;function ps(t,e){if(pt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ta.call(e,s)||!pt(t[s],e[s]))return!1}return!0}function Lu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $u(t,e){var n=Lu(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lu(n)}}function nh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rh(){for(var t=window,e=gi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gi(t.document)}return e}function Nl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Yg(t){var e=rh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nh(n.ownerDocument.documentElement,n)){if(r!==null&&Nl(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=$u(n,i);var o=$u(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Kg=At&&"documentMode"in document&&11>=document.documentMode,Qn=null,xa=null,Xr=null,_a=!1;function Du(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_a||Qn==null||Qn!==gi(r)||(r=Qn,"selectionStart"in r&&Nl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xr&&ps(Xr,r)||(Xr=r,r=ki(xa,"onSelect"),0<r.length&&(e=new El("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qn)))}function Vs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jn={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionend:Vs("Transition","TransitionEnd")},To={},sh={};At&&(sh=document.createElement("div").style,"AnimationEvent"in window||(delete Jn.animationend.animation,delete Jn.animationiteration.animation,delete Jn.animationstart.animation),"TransitionEvent"in window||delete Jn.transitionend.transition);function Qi(t){if(To[t])return To[t];if(!Jn[t])return t;var e=Jn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sh)return To[t]=e[n];return t}var ih=Qi("animationend"),oh=Qi("animationiteration"),ah=Qi("animationstart"),lh=Qi("transitionend"),uh=new Map,Mu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(t,e){uh.set(t,e),An(e,[t])}for(var Oo=0;Oo<Mu.length;Oo++){var Io=Mu[Oo],Gg=Io.toLowerCase(),Qg=Io[0].toUpperCase()+Io.slice(1);dn(Gg,"on"+Qg)}dn(ih,"onAnimationEnd");dn(oh,"onAnimationIteration");dn(ah,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn(lh,"onTransitionEnd");dr("onMouseEnter",["mouseout","mouseover"]);dr("onMouseLeave",["mouseout","mouseover"]);dr("onPointerEnter",["pointerout","pointerover"]);dr("onPointerLeave",["pointerout","pointerover"]);An("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));An("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));An("onBeforeInput",["compositionend","keypress","textInput","paste"]);An("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));An("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));An("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jg=new Set("cancel close invalid load scroll toggle".split(" ").concat(qr));function Uu(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Gp(r,e,void 0,t),t.currentTarget=null}function ch(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Uu(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Uu(s,a,u),i=l}}}if(vi)throw t=ma,vi=!1,ma=null,t}function te(t,e){var n=e[ja];n===void 0&&(n=e[ja]=new Set);var r=t+"__bubble";n.has(r)||(dh(e,t,2,!1),n.add(r))}function Ro(t,e,n){var r=0;e&&(r|=4),dh(n,t,r,e)}var Hs="_reactListening"+Math.random().toString(36).slice(2);function gs(t){if(!t[Hs]){t[Hs]=!0,yd.forEach(function(n){n!=="selectionchange"&&(Jg.has(n)||Ro(n,!1,t),Ro(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hs]||(e[Hs]=!0,Ro("selectionchange",!1,e))}}function dh(t,e,n,r){switch(Kd(e)){case 1:var s=dg;break;case 4:s=hg;break;default:s=Sl}n=s.bind(null,e,n,t),s=void 0,!ga||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ao(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=kn(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Ad(function(){var u=i,d=wl(n),h=[];e:{var f=uh.get(t);if(f!==void 0){var y=El,v=t;switch(t){case"keypress":if(ai(n)===0)break e;case"keydown":case"keyup":y=Cg;break;case"focusin":v="focus",y=Co;break;case"focusout":v="blur",y=Co;break;case"beforeblur":case"afterblur":y=Co;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=gg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Tg;break;case ih:case oh:case ah:y=yg;break;case lh:y=Ig;break;case"scroll":y=fg;break;case"wheel":y=Ag;break;case"copy":case"cut":case"paste":y=xg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Pu}var w=(e&4)!==0,_=!w&&t==="scroll",m=w?f!==null?f+"Capture":null:f;w=[];for(var p=u,g;p!==null;){g=p;var x=g.stateNode;if(g.tag===5&&x!==null&&(g=x,m!==null&&(x=us(p,m),x!=null&&w.push(ms(p,x,g)))),_)break;p=p.return}0<w.length&&(f=new y(f,v,null,n,d),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==fa&&(v=n.relatedTarget||n.fromElement)&&(kn(v)||v[Lt]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?kn(v):null,v!==null&&(_=Ln(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(w=Cu,x="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=Pu,x="onPointerLeave",m="onPointerEnter",p="pointer"),_=y==null?f:Xn(y),g=v==null?f:Xn(v),f=new w(x,p+"leave",y,n,d),f.target=_,f.relatedTarget=g,x=null,kn(d)===u&&(w=new w(m,p+"enter",v,n,d),w.target=g,w.relatedTarget=_,x=w),_=x,y&&v)t:{for(w=y,m=v,p=0,g=w;g;g=Dn(g))p++;for(g=0,x=m;x;x=Dn(x))g++;for(;0<p-g;)w=Dn(w),p--;for(;0<g-p;)m=Dn(m),g--;for(;p--;){if(w===m||m!==null&&w===m.alternate)break t;w=Dn(w),m=Dn(m)}w=null}else w=null;y!==null&&Fu(h,f,y,w,!1),v!==null&&_!==null&&Fu(h,_,v,w,!0)}}e:{if(f=u?Xn(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var b=zg;else if(Iu(f))if(eh)b=Hg;else{b=Wg;var j=Bg}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=Vg);if(b&&(b=b(t,u))){Zd(h,b,n,d);break e}j&&j(t,f,u),t==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&la(f,"number",f.value)}switch(j=u?Xn(u):window,t){case"focusin":(Iu(j)||j.contentEditable==="true")&&(Qn=j,xa=u,Xr=null);break;case"focusout":Xr=xa=Qn=null;break;case"mousedown":_a=!0;break;case"contextmenu":case"mouseup":case"dragend":_a=!1,Du(h,n,d);break;case"selectionchange":if(Kg)break;case"keydown":case"keyup":Du(h,n,d)}var E;if(Cl)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Gn?Jd(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Qd&&n.locale!=="ko"&&(Gn||P!=="onCompositionStart"?P==="onCompositionEnd"&&Gn&&(E=Gd()):(Gt=d,bl="value"in Gt?Gt.value:Gt.textContent,Gn=!0)),j=ki(u,P),0<j.length&&(P=new Nu(P,t,null,n,d),h.push({event:P,listeners:j}),E?P.data=E:(E=Xd(n),E!==null&&(P.data=E)))),(E=$g?Dg(t,n):Mg(t,n))&&(u=ki(u,"onBeforeInput"),0<u.length&&(d=new Nu("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}ch(h,e)})}function ms(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ki(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=us(t,n),i!=null&&r.unshift(ms(t,i,s)),i=us(t,e),i!=null&&r.push(ms(t,i,s))),t=t.return}return r}function Dn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fu(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=us(n,i),l!=null&&o.unshift(ms(n,l,a))):s||(l=us(n,i),l!=null&&o.push(ms(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Xg=/\r\n?/g,Zg=/\u0000|\uFFFD/g;function zu(t){return(typeof t=="string"?t:""+t).replace(Xg,`
`).replace(Zg,"")}function qs(t,e,n){if(e=zu(e),zu(t)!==e&&n)throw Error(C(425))}function Si(){}var ka=null,Sa=null;function ba(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ea=typeof setTimeout=="function"?setTimeout:void 0,em=typeof clearTimeout=="function"?clearTimeout:void 0,Bu=typeof Promise=="function"?Promise:void 0,tm=typeof queueMicrotask=="function"?queueMicrotask:typeof Bu<"u"?function(t){return Bu.resolve(null).then(t).catch(nm)}:Ea;function nm(t){setTimeout(function(){throw t})}function Lo(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),hs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);hs(e)}function tn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var kr=Math.random().toString(36).slice(2),_t="__reactFiber$"+kr,vs="__reactProps$"+kr,Lt="__reactContainer$"+kr,ja="__reactEvents$"+kr,rm="__reactListeners$"+kr,sm="__reactHandles$"+kr;function kn(t){var e=t[_t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lt]||n[_t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wu(t);t!==null;){if(n=t[_t])return n;t=Wu(t)}return e}t=n,n=t.parentNode}return null}function Is(t){return t=t[_t]||t[Lt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(C(33))}function Ji(t){return t[vs]||null}var Ca=[],Zn=-1;function hn(t){return{current:t}}function ne(t){0>Zn||(t.current=Ca[Zn],Ca[Zn]=null,Zn--)}function ee(t,e){Zn++,Ca[Zn]=t.current,t.current=e}var un={},Ne=hn(un),Ue=hn(!1),Nn=un;function hr(t,e){var n=t.type.contextTypes;if(!n)return un;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Fe(t){return t=t.childContextTypes,t!=null}function bi(){ne(Ue),ne(Ne)}function Vu(t,e,n){if(Ne.current!==un)throw Error(C(168));ee(Ne,e),ee(Ue,n)}function hh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(C(108,Bp(t)||"Unknown",s));return ae({},n,r)}function Ei(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||un,Nn=Ne.current,ee(Ne,t),ee(Ue,Ue.current),!0}function Hu(t,e,n){var r=t.stateNode;if(!r)throw Error(C(169));n?(t=hh(t,e,Nn),r.__reactInternalMemoizedMergedChildContext=t,ne(Ue),ne(Ne),ee(Ne,t)):ne(Ue),ee(Ue,n)}var Tt=null,Xi=!1,$o=!1;function fh(t){Tt===null?Tt=[t]:Tt.push(t)}function im(t){Xi=!0,fh(t)}function fn(){if(!$o&&Tt!==null){$o=!0;var t=0,e=Q;try{var n=Tt;for(Q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tt=null,Xi=!1}catch(s){throw Tt!==null&&(Tt=Tt.slice(t+1)),Md(xl,fn),s}finally{Q=e,$o=!1}}return null}var er=[],tr=0,ji=null,Ci=0,Xe=[],Ze=0,Pn=null,Ot=1,It="";function vn(t,e){er[tr++]=Ci,er[tr++]=ji,ji=t,Ci=e}function ph(t,e,n){Xe[Ze++]=Ot,Xe[Ze++]=It,Xe[Ze++]=Pn,Pn=t;var r=Ot;t=It;var s=32-ht(r)-1;r&=~(1<<s),n+=1;var i=32-ht(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ot=1<<32-ht(e)+s|n<<s|r,It=i+t}else Ot=1<<i|n<<s|r,It=t}function Pl(t){t.return!==null&&(vn(t,1),ph(t,1,0))}function Tl(t){for(;t===ji;)ji=er[--tr],er[tr]=null,Ci=er[--tr],er[tr]=null;for(;t===Pn;)Pn=Xe[--Ze],Xe[Ze]=null,It=Xe[--Ze],Xe[Ze]=null,Ot=Xe[--Ze],Xe[Ze]=null}var qe=null,He=null,re=!1,dt=null;function gh(t,e){var n=et(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qe=t,He=tn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qe=t,He=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pn!==null?{id:Ot,overflow:It}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=et(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qe=t,He=null,!0):!1;default:return!1}}function Na(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pa(t){if(re){var e=He;if(e){var n=e;if(!qu(t,e)){if(Na(t))throw Error(C(418));e=tn(n.nextSibling);var r=qe;e&&qu(t,e)?gh(r,n):(t.flags=t.flags&-4097|2,re=!1,qe=t)}}else{if(Na(t))throw Error(C(418));t.flags=t.flags&-4097|2,re=!1,qe=t}}}function Yu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qe=t}function Ys(t){if(t!==qe)return!1;if(!re)return Yu(t),re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ba(t.type,t.memoizedProps)),e&&(e=He)){if(Na(t))throw mh(),Error(C(418));for(;e;)gh(t,e),e=tn(e.nextSibling)}if(Yu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){He=tn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}He=null}}else He=qe?tn(t.stateNode.nextSibling):null;return!0}function mh(){for(var t=He;t;)t=tn(t.nextSibling)}function fr(){He=qe=null,re=!1}function Ol(t){dt===null?dt=[t]:dt.push(t)}var om=Mt.ReactCurrentBatchConfig;function Lr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(C(309));var r=n.stateNode}if(!r)throw Error(C(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(C(284));if(!n._owner)throw Error(C(290,t))}return t}function Ks(t,e){throw t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ku(t){var e=t._init;return e(t._payload)}function vh(t){function e(m,p){if(t){var g=m.deletions;g===null?(m.deletions=[p],m.flags|=16):g.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=on(m,p),m.index=0,m.sibling=null,m}function i(m,p,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<p?(m.flags|=2,p):g):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,p,g,x){return p===null||p.tag!==6?(p=Wo(g,m.mode,x),p.return=m,p):(p=s(p,g),p.return=m,p)}function l(m,p,g,x){var b=g.type;return b===Kn?d(m,p,g.props.children,x,g.key):p!==null&&(p.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Wt&&Ku(b)===p.type)?(x=s(p,g.props),x.ref=Lr(m,p,g),x.return=m,x):(x=pi(g.type,g.key,g.props,null,m.mode,x),x.ref=Lr(m,p,g),x.return=m,x)}function u(m,p,g,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=Vo(g,m.mode,x),p.return=m,p):(p=s(p,g.children||[]),p.return=m,p)}function d(m,p,g,x,b){return p===null||p.tag!==7?(p=jn(g,m.mode,x,b),p.return=m,p):(p=s(p,g),p.return=m,p)}function h(m,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Wo(""+p,m.mode,g),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ds:return g=pi(p.type,p.key,p.props,null,m.mode,g),g.ref=Lr(m,null,p),g.return=m,g;case Yn:return p=Vo(p,m.mode,g),p.return=m,p;case Wt:var x=p._init;return h(m,x(p._payload),g)}if(Vr(p)||Tr(p))return p=jn(p,m.mode,g,null),p.return=m,p;Ks(m,p)}return null}function f(m,p,g,x){var b=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return b!==null?null:a(m,p,""+g,x);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ds:return g.key===b?l(m,p,g,x):null;case Yn:return g.key===b?u(m,p,g,x):null;case Wt:return b=g._init,f(m,p,b(g._payload),x)}if(Vr(g)||Tr(g))return b!==null?null:d(m,p,g,x,null);Ks(m,g)}return null}function y(m,p,g,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(g)||null,a(p,m,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ds:return m=m.get(x.key===null?g:x.key)||null,l(p,m,x,b);case Yn:return m=m.get(x.key===null?g:x.key)||null,u(p,m,x,b);case Wt:var j=x._init;return y(m,p,g,j(x._payload),b)}if(Vr(x)||Tr(x))return m=m.get(g)||null,d(p,m,x,b,null);Ks(p,x)}return null}function v(m,p,g,x){for(var b=null,j=null,E=p,P=p=0,U=null;E!==null&&P<g.length;P++){E.index>P?(U=E,E=null):U=E.sibling;var N=f(m,E,g[P],x);if(N===null){E===null&&(E=U);break}t&&E&&N.alternate===null&&e(m,E),p=i(N,p,P),j===null?b=N:j.sibling=N,j=N,E=U}if(P===g.length)return n(m,E),re&&vn(m,P),b;if(E===null){for(;P<g.length;P++)E=h(m,g[P],x),E!==null&&(p=i(E,p,P),j===null?b=E:j.sibling=E,j=E);return re&&vn(m,P),b}for(E=r(m,E);P<g.length;P++)U=y(E,m,P,g[P],x),U!==null&&(t&&U.alternate!==null&&E.delete(U.key===null?P:U.key),p=i(U,p,P),j===null?b=U:j.sibling=U,j=U);return t&&E.forEach(function(L){return e(m,L)}),re&&vn(m,P),b}function w(m,p,g,x){var b=Tr(g);if(typeof b!="function")throw Error(C(150));if(g=b.call(g),g==null)throw Error(C(151));for(var j=b=null,E=p,P=p=0,U=null,N=g.next();E!==null&&!N.done;P++,N=g.next()){E.index>P?(U=E,E=null):U=E.sibling;var L=f(m,E,N.value,x);if(L===null){E===null&&(E=U);break}t&&E&&L.alternate===null&&e(m,E),p=i(L,p,P),j===null?b=L:j.sibling=L,j=L,E=U}if(N.done)return n(m,E),re&&vn(m,P),b;if(E===null){for(;!N.done;P++,N=g.next())N=h(m,N.value,x),N!==null&&(p=i(N,p,P),j===null?b=N:j.sibling=N,j=N);return re&&vn(m,P),b}for(E=r(m,E);!N.done;P++,N=g.next())N=y(E,m,P,N.value,x),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?P:N.key),p=i(N,p,P),j===null?b=N:j.sibling=N,j=N);return t&&E.forEach(function(W){return e(m,W)}),re&&vn(m,P),b}function _(m,p,g,x){if(typeof g=="object"&&g!==null&&g.type===Kn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ds:e:{for(var b=g.key,j=p;j!==null;){if(j.key===b){if(b=g.type,b===Kn){if(j.tag===7){n(m,j.sibling),p=s(j,g.props.children),p.return=m,m=p;break e}}else if(j.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Wt&&Ku(b)===j.type){n(m,j.sibling),p=s(j,g.props),p.ref=Lr(m,j,g),p.return=m,m=p;break e}n(m,j);break}else e(m,j);j=j.sibling}g.type===Kn?(p=jn(g.props.children,m.mode,x,g.key),p.return=m,m=p):(x=pi(g.type,g.key,g.props,null,m.mode,x),x.ref=Lr(m,p,g),x.return=m,m=x)}return o(m);case Yn:e:{for(j=g.key;p!==null;){if(p.key===j)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(m,p.sibling),p=s(p,g.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=Vo(g,m.mode,x),p.return=m,m=p}return o(m);case Wt:return j=g._init,_(m,p,j(g._payload),x)}if(Vr(g))return v(m,p,g,x);if(Tr(g))return w(m,p,g,x);Ks(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(m,p.sibling),p=s(p,g),p.return=m,m=p):(n(m,p),p=Wo(g,m.mode,x),p.return=m,m=p),o(m)):n(m,p)}return _}var pr=vh(!0),yh=vh(!1),Ni=hn(null),Pi=null,nr=null,Il=null;function Rl(){Il=nr=Pi=null}function Al(t){var e=Ni.current;ne(Ni),t._currentValue=e}function Ta(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ur(t,e){Pi=t,Il=nr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Me=!0),t.firstContext=null)}function st(t){var e=t._currentValue;if(Il!==t)if(t={context:t,memoizedValue:e,next:null},nr===null){if(Pi===null)throw Error(C(308));nr=t,Pi.dependencies={lanes:0,firstContext:t}}else nr=nr.next=t;return e}var Sn=null;function Ll(t){Sn===null?Sn=[t]:Sn.push(t)}function wh(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ll(e)):(n.next=s.next,s.next=n),e.interleaved=n,$t(t,r)}function $t(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vt=!1;function $l(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,H&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$t(t,n)}return s=r.interleaved,s===null?(e.next=e,Ll(r)):(e.next=s.next,s.next=e),r.interleaved=e,$t(t,n)}function li(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_l(t,n)}}function Gu(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ti(t,e,n,r){var s=t.updateQueue;Vt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,y=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(f=e,y=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(y,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(y,h,f):v,f==null)break e;h=ae({},h,f);break e;case 2:Vt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,l=h):d=d.next=y,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);On|=o,t.lanes=o,t.memoizedState=h}}function Qu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(C(191,s));s.call(r)}}}var Rs={},St=hn(Rs),ys=hn(Rs),ws=hn(Rs);function bn(t){if(t===Rs)throw Error(C(174));return t}function Dl(t,e){switch(ee(ws,e),ee(ys,t),ee(St,Rs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ca(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ca(e,t)}ne(St),ee(St,e)}function gr(){ne(St),ne(ys),ne(ws)}function _h(t){bn(ws.current);var e=bn(St.current),n=ca(e,t.type);e!==n&&(ee(ys,t),ee(St,n))}function Ml(t){ys.current===t&&(ne(St),ne(ys))}var ie=hn(0);function Oi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Do=[];function Ul(){for(var t=0;t<Do.length;t++)Do[t]._workInProgressVersionPrimary=null;Do.length=0}var ui=Mt.ReactCurrentDispatcher,Mo=Mt.ReactCurrentBatchConfig,Tn=0,oe=null,ge=null,we=null,Ii=!1,Zr=!1,xs=0,am=0;function Ee(){throw Error(C(321))}function Fl(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pt(t[n],e[n]))return!1;return!0}function zl(t,e,n,r,s,i){if(Tn=i,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ui.current=t===null||t.memoizedState===null?dm:hm,t=n(r,s),Zr){i=0;do{if(Zr=!1,xs=0,25<=i)throw Error(C(301));i+=1,we=ge=null,e.updateQueue=null,ui.current=fm,t=n(r,s)}while(Zr)}if(ui.current=Ri,e=ge!==null&&ge.next!==null,Tn=0,we=ge=oe=null,Ii=!1,e)throw Error(C(300));return t}function Bl(){var t=xs!==0;return xs=0,t}function wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?oe.memoizedState=we=t:we=we.next=t,we}function it(){if(ge===null){var t=oe.alternate;t=t!==null?t.memoizedState:null}else t=ge.next;var e=we===null?oe.memoizedState:we.next;if(e!==null)we=e,ge=t;else{if(t===null)throw Error(C(310));ge=t,t={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},we===null?oe.memoizedState=we=t:we=we.next=t}return we}function _s(t,e){return typeof e=="function"?e(t):e}function Uo(t){var e=it(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=ge,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((Tn&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,oe.lanes|=d,On|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,pt(r,e.memoizedState)||(Me=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,oe.lanes|=i,On|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fo(t){var e=it(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);pt(i,e.memoizedState)||(Me=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function kh(){}function Sh(t,e){var n=oe,r=it(),s=e(),i=!pt(r.memoizedState,s);if(i&&(r.memoizedState=s,Me=!0),r=r.queue,Wl(jh.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||we!==null&&we.memoizedState.tag&1){if(n.flags|=2048,ks(9,Eh.bind(null,n,r,s,e),void 0,null),xe===null)throw Error(C(349));Tn&30||bh(n,e,s)}return s}function bh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Eh(t,e,n,r){e.value=n,e.getSnapshot=r,Ch(e)&&Nh(t)}function jh(t,e,n){return n(function(){Ch(e)&&Nh(t)})}function Ch(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pt(t,n)}catch{return!0}}function Nh(t){var e=$t(t,1);e!==null&&ft(e,t,1,-1)}function Ju(t){var e=wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:t},e.queue=t,t=t.dispatch=cm.bind(null,oe,t),[e.memoizedState,t]}function ks(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ph(){return it().memoizedState}function ci(t,e,n,r){var s=wt();oe.flags|=t,s.memoizedState=ks(1|e,n,void 0,r===void 0?null:r)}function Zi(t,e,n,r){var s=it();r=r===void 0?null:r;var i=void 0;if(ge!==null){var o=ge.memoizedState;if(i=o.destroy,r!==null&&Fl(r,o.deps)){s.memoizedState=ks(e,n,i,r);return}}oe.flags|=t,s.memoizedState=ks(1|e,n,i,r)}function Xu(t,e){return ci(8390656,8,t,e)}function Wl(t,e){return Zi(2048,8,t,e)}function Th(t,e){return Zi(4,2,t,e)}function Oh(t,e){return Zi(4,4,t,e)}function Ih(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Rh(t,e,n){return n=n!=null?n.concat([t]):null,Zi(4,4,Ih.bind(null,e,t),n)}function Vl(){}function Ah(t,e){var n=it();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fl(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lh(t,e){var n=it();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fl(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $h(t,e,n){return Tn&21?(pt(n,e)||(n=zd(),oe.lanes|=n,On|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Me=!0),t.memoizedState=n)}function lm(t,e){var n=Q;Q=n!==0&&4>n?n:4,t(!0);var r=Mo.transition;Mo.transition={};try{t(!1),e()}finally{Q=n,Mo.transition=r}}function Dh(){return it().memoizedState}function um(t,e,n){var r=sn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mh(t))Uh(e,n);else if(n=wh(t,e,n,r),n!==null){var s=Ie();ft(n,t,r,s),Fh(n,e,r)}}function cm(t,e,n){var r=sn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mh(t))Uh(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,pt(a,o)){var l=e.interleaved;l===null?(s.next=s,Ll(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=wh(t,e,s,r),n!==null&&(s=Ie(),ft(n,t,r,s),Fh(n,e,r))}}function Mh(t){var e=t.alternate;return t===oe||e!==null&&e===oe}function Uh(t,e){Zr=Ii=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_l(t,n)}}var Ri={readContext:st,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useInsertionEffect:Ee,useLayoutEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useMutableSource:Ee,useSyncExternalStore:Ee,useId:Ee,unstable_isNewReconciler:!1},dm={readContext:st,useCallback:function(t,e){return wt().memoizedState=[t,e===void 0?null:e],t},useContext:st,useEffect:Xu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ci(4194308,4,Ih.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ci(4194308,4,t,e)},useInsertionEffect:function(t,e){return ci(4,2,t,e)},useMemo:function(t,e){var n=wt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=um.bind(null,oe,t),[r.memoizedState,t]},useRef:function(t){var e=wt();return t={current:t},e.memoizedState=t},useState:Ju,useDebugValue:Vl,useDeferredValue:function(t){return wt().memoizedState=t},useTransition:function(){var t=Ju(!1),e=t[0];return t=lm.bind(null,t[1]),wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=oe,s=wt();if(re){if(n===void 0)throw Error(C(407));n=n()}else{if(n=e(),xe===null)throw Error(C(349));Tn&30||bh(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Xu(jh.bind(null,r,i,t),[t]),r.flags|=2048,ks(9,Eh.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=wt(),e=xe.identifierPrefix;if(re){var n=It,r=Ot;n=(r&~(1<<32-ht(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=am++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hm={readContext:st,useCallback:Ah,useContext:st,useEffect:Wl,useImperativeHandle:Rh,useInsertionEffect:Th,useLayoutEffect:Oh,useMemo:Lh,useReducer:Uo,useRef:Ph,useState:function(){return Uo(_s)},useDebugValue:Vl,useDeferredValue:function(t){var e=it();return $h(e,ge.memoizedState,t)},useTransition:function(){var t=Uo(_s)[0],e=it().memoizedState;return[t,e]},useMutableSource:kh,useSyncExternalStore:Sh,useId:Dh,unstable_isNewReconciler:!1},fm={readContext:st,useCallback:Ah,useContext:st,useEffect:Wl,useImperativeHandle:Rh,useInsertionEffect:Th,useLayoutEffect:Oh,useMemo:Lh,useReducer:Fo,useRef:Ph,useState:function(){return Fo(_s)},useDebugValue:Vl,useDeferredValue:function(t){var e=it();return ge===null?e.memoizedState=t:$h(e,ge.memoizedState,t)},useTransition:function(){var t=Fo(_s)[0],e=it().memoizedState;return[t,e]},useMutableSource:kh,useSyncExternalStore:Sh,useId:Dh,unstable_isNewReconciler:!1};function lt(t,e){if(t&&t.defaultProps){e=ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Oa(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eo={isMounted:function(t){return(t=t._reactInternals)?Ln(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ie(),s=sn(t),i=Rt(r,s);i.payload=e,n!=null&&(i.callback=n),e=nn(t,i,s),e!==null&&(ft(e,t,s,r),li(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ie(),s=sn(t),i=Rt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=nn(t,i,s),e!==null&&(ft(e,t,s,r),li(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ie(),r=sn(t),s=Rt(n,r);s.tag=2,e!=null&&(s.callback=e),e=nn(t,s,r),e!==null&&(ft(e,t,r,n),li(e,t,r))}};function Zu(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ps(n,r)||!ps(s,i):!0}function zh(t,e,n){var r=!1,s=un,i=e.contextType;return typeof i=="object"&&i!==null?i=st(i):(s=Fe(e)?Nn:Ne.current,r=e.contextTypes,i=(r=r!=null)?hr(t,s):un),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ec(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&eo.enqueueReplaceState(e,e.state,null)}function Ia(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},$l(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=st(i):(i=Fe(e)?Nn:Ne.current,s.context=hr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Oa(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&eo.enqueueReplaceState(s,s.state,null),Ti(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mr(t,e){try{var n="",r=e;do n+=zp(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function zo(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ra(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pm=typeof WeakMap=="function"?WeakMap:Map;function Bh(t,e,n){n=Rt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Li||(Li=!0,Wa=r),Ra(t,e)},n}function Wh(t,e,n){n=Rt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ra(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ra(t,e),typeof r!="function"&&(rn===null?rn=new Set([this]):rn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function tc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pm;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Nm.bind(null,t,e,n),e.then(t,t))}function nc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rc(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rt(-1,1),e.tag=2,nn(n,e,1))),n.lanes|=1),t)}var gm=Mt.ReactCurrentOwner,Me=!1;function Oe(t,e,n,r){e.child=t===null?yh(e,null,n,r):pr(e,t.child,n,r)}function sc(t,e,n,r,s){n=n.render;var i=e.ref;return ur(e,s),r=zl(t,e,n,r,i,s),n=Bl(),t!==null&&!Me?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dt(t,e,s)):(re&&n&&Pl(e),e.flags|=1,Oe(t,e,r,s),e.child)}function ic(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Xl(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Vh(t,e,i,r,s)):(t=pi(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ps,n(o,r)&&t.ref===e.ref)return Dt(t,e,s)}return e.flags|=1,t=on(i,r),t.ref=e.ref,t.return=e,e.child=t}function Vh(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ps(i,r)&&t.ref===e.ref)if(Me=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Me=!0);else return e.lanes=t.lanes,Dt(t,e,s)}return Aa(t,e,n,r,s)}function Hh(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(sr,Ve),Ve|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ee(sr,Ve),Ve|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ee(sr,Ve),Ve|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ee(sr,Ve),Ve|=r;return Oe(t,e,s,n),e.child}function qh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Aa(t,e,n,r,s){var i=Fe(n)?Nn:Ne.current;return i=hr(e,i),ur(e,s),n=zl(t,e,n,r,i,s),r=Bl(),t!==null&&!Me?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dt(t,e,s)):(re&&r&&Pl(e),e.flags|=1,Oe(t,e,n,s),e.child)}function oc(t,e,n,r,s){if(Fe(n)){var i=!0;Ei(e)}else i=!1;if(ur(e,s),e.stateNode===null)di(t,e),zh(e,n,r),Ia(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=st(u):(u=Fe(n)?Nn:Ne.current,u=hr(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&ec(e,o,r,u),Vt=!1;var f=e.memoizedState;o.state=f,Ti(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Ue.current||Vt?(typeof d=="function"&&(Oa(e,n,d,r),l=e.memoizedState),(a=Vt||Zu(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xh(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:lt(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=st(l):(l=Fe(n)?Nn:Ne.current,l=hr(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&ec(e,o,r,l),Vt=!1,f=e.memoizedState,o.state=f,Ti(e,r,o,s);var v=e.memoizedState;a!==h||f!==v||Ue.current||Vt?(typeof y=="function"&&(Oa(e,n,y,r),v=e.memoizedState),(u=Vt||Zu(e,n,u,r,f,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return La(t,e,n,r,i,s)}function La(t,e,n,r,s,i){qh(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Hu(e,n,!1),Dt(t,e,i);r=e.stateNode,gm.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=pr(e,t.child,null,i),e.child=pr(e,null,a,i)):Oe(t,e,a,i),e.memoizedState=r.state,s&&Hu(e,n,!0),e.child}function Yh(t){var e=t.stateNode;e.pendingContext?Vu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Vu(t,e.context,!1),Dl(t,e.containerInfo)}function ac(t,e,n,r,s){return fr(),Ol(s),e.flags|=256,Oe(t,e,n,r),e.child}var $a={dehydrated:null,treeContext:null,retryLane:0};function Da(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kh(t,e,n){var r=e.pendingProps,s=ie.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ee(ie,s&1),t===null)return Pa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ro(o,r,0,null),t=jn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Da(n),e.memoizedState=$a,t):Hl(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return mm(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=on(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=on(a,i):(i=jn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Da(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=$a,r}return i=t.child,t=i.sibling,r=on(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hl(t,e){return e=ro({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gs(t,e,n,r){return r!==null&&Ol(r),pr(e,t.child,null,n),t=Hl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mm(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=zo(Error(C(422))),Gs(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ro({mode:"visible",children:r.children},s,0,null),i=jn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&pr(e,t.child,null,o),e.child.memoizedState=Da(o),e.memoizedState=$a,i);if(!(e.mode&1))return Gs(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(C(419)),r=zo(i,r,void 0),Gs(t,e,o,r)}if(a=(o&t.childLanes)!==0,Me||a){if(r=xe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$t(t,s),ft(r,t,s,-1))}return Jl(),r=zo(Error(C(421))),Gs(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Pm.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,He=tn(s.nextSibling),qe=e,re=!0,dt=null,t!==null&&(Xe[Ze++]=Ot,Xe[Ze++]=It,Xe[Ze++]=Pn,Ot=t.id,It=t.overflow,Pn=e),e=Hl(e,r.children),e.flags|=4096,e)}function lc(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ta(t.return,e,n)}function Bo(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Gh(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Oe(t,e,r.children,n),r=ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lc(t,n,e);else if(t.tag===19)lc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ee(ie,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Oi(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bo(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Oi(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bo(e,!0,n,null,i);break;case"together":Bo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function di(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),On|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,n=on(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=on(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vm(t,e,n){switch(e.tag){case 3:Yh(e),fr();break;case 5:_h(e);break;case 1:Fe(e.type)&&Ei(e);break;case 4:Dl(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ee(Ni,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ee(ie,ie.current&1),e.flags|=128,null):n&e.child.childLanes?Kh(t,e,n):(ee(ie,ie.current&1),t=Dt(t,e,n),t!==null?t.sibling:null);ee(ie,ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gh(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ee(ie,ie.current),r)break;return null;case 22:case 23:return e.lanes=0,Hh(t,e,n)}return Dt(t,e,n)}var Qh,Ma,Jh,Xh;Qh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ma=function(){};Jh=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,bn(St.current);var i=null;switch(n){case"input":s=oa(t,s),r=oa(t,r),i=[];break;case"select":s=ae({},s,{value:void 0}),r=ae({},r,{value:void 0}),i=[];break;case"textarea":s=ua(t,s),r=ua(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Si)}da(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(as.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(as.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&te("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Xh=function(t,e,n,r){n!==r&&(e.flags|=4)};function $r(t,e){if(!re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ym(t,e,n){var r=e.pendingProps;switch(Tl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(e),null;case 1:return Fe(e.type)&&bi(),je(e),null;case 3:return r=e.stateNode,gr(),ne(Ue),ne(Ne),Ul(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ys(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dt!==null&&(qa(dt),dt=null))),Ma(t,e),je(e),null;case 5:Ml(e);var s=bn(ws.current);if(n=e.type,t!==null&&e.stateNode!=null)Jh(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(C(166));return je(e),null}if(t=bn(St.current),Ys(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_t]=e,r[vs]=i,t=(e.mode&1)!==0,n){case"dialog":te("cancel",r),te("close",r);break;case"iframe":case"object":case"embed":te("load",r);break;case"video":case"audio":for(s=0;s<qr.length;s++)te(qr[s],r);break;case"source":te("error",r);break;case"img":case"image":case"link":te("error",r),te("load",r);break;case"details":te("toggle",r);break;case"input":vu(r,i),te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},te("invalid",r);break;case"textarea":wu(r,i),te("invalid",r)}da(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&qs(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&qs(r.textContent,a,t),s=["children",""+a]):as.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&te("scroll",r)}switch(n){case"input":Ms(r),yu(r,i,!0);break;case"textarea":Ms(r),xu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Si)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_t]=e,t[vs]=r,Qh(t,e,!1,!1),e.stateNode=t;e:{switch(o=ha(n,r),n){case"dialog":te("cancel",t),te("close",t),s=r;break;case"iframe":case"object":case"embed":te("load",t),s=r;break;case"video":case"audio":for(s=0;s<qr.length;s++)te(qr[s],t);s=r;break;case"source":te("error",t),s=r;break;case"img":case"image":case"link":te("error",t),te("load",t),s=r;break;case"details":te("toggle",t),s=r;break;case"input":vu(t,r),s=oa(t,r),te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ae({},r,{value:void 0}),te("invalid",t);break;case"textarea":wu(t,r),s=ua(t,r),te("invalid",t);break;default:s=r}da(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Pd(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Cd(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ls(t,l):typeof l=="number"&&ls(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(as.hasOwnProperty(i)?l!=null&&i==="onScroll"&&te("scroll",t):l!=null&&gl(t,i,l,o))}switch(n){case"input":Ms(t),yu(t,r,!1);break;case"textarea":Ms(t),xu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ln(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ir(t,!!r.multiple,i,!1):r.defaultValue!=null&&ir(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Si)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return je(e),null;case 6:if(t&&e.stateNode!=null)Xh(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(C(166));if(n=bn(ws.current),bn(St.current),Ys(e)){if(r=e.stateNode,n=e.memoizedProps,r[_t]=e,(i=r.nodeValue!==n)&&(t=qe,t!==null))switch(t.tag){case 3:qs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qs(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_t]=e,e.stateNode=r}return je(e),null;case 13:if(ne(ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(re&&He!==null&&e.mode&1&&!(e.flags&128))mh(),fr(),e.flags|=98560,i=!1;else if(i=Ys(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(C(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(C(317));i[_t]=e}else fr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;je(e),i=!1}else dt!==null&&(qa(dt),dt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ie.current&1?me===0&&(me=3):Jl())),e.updateQueue!==null&&(e.flags|=4),je(e),null);case 4:return gr(),Ma(t,e),t===null&&gs(e.stateNode.containerInfo),je(e),null;case 10:return Al(e.type._context),je(e),null;case 17:return Fe(e.type)&&bi(),je(e),null;case 19:if(ne(ie),i=e.memoizedState,i===null)return je(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$r(i,!1);else{if(me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Oi(t),o!==null){for(e.flags|=128,$r(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ee(ie,ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&ce()>vr&&(e.flags|=128,r=!0,$r(i,!1),e.lanes=4194304)}else{if(!r)if(t=Oi(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$r(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!re)return je(e),null}else 2*ce()-i.renderingStartTime>vr&&n!==1073741824&&(e.flags|=128,r=!0,$r(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ce(),e.sibling=null,n=ie.current,ee(ie,r?n&1|2:n&1),e):(je(e),null);case 22:case 23:return Ql(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ve&1073741824&&(je(e),e.subtreeFlags&6&&(e.flags|=8192)):je(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function wm(t,e){switch(Tl(e),e.tag){case 1:return Fe(e.type)&&bi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gr(),ne(Ue),ne(Ne),Ul(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ml(e),null;case 13:if(ne(ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));fr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ne(ie),null;case 4:return gr(),null;case 10:return Al(e.type._context),null;case 22:case 23:return Ql(),null;case 24:return null;default:return null}}var Qs=!1,Ce=!1,xm=typeof WeakSet=="function"?WeakSet:Set,O=null;function rr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){le(t,e,r)}else n.current=null}function Ua(t,e,n){try{n()}catch(r){le(t,e,r)}}var uc=!1;function _m(t,e){if(ka=xi,t=rh(),Nl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var y;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(l=o),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sa={focusedElem:t,selectionRange:n},xi=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,_=v.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?w:lt(e.type,w),_);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(x){le(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return v=uc,uc=!1,v}function es(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ua(e,n,i)}s=s.next}while(s!==r)}}function to(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fa(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Zh(t){var e=t.alternate;e!==null&&(t.alternate=null,Zh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_t],delete e[vs],delete e[ja],delete e[rm],delete e[sm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ef(t){return t.tag===5||t.tag===3||t.tag===4}function cc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ef(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function za(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Si));else if(r!==4&&(t=t.child,t!==null))for(za(t,e,n),t=t.sibling;t!==null;)za(t,e,n),t=t.sibling}function Ba(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ba(t,e,n),t=t.sibling;t!==null;)Ba(t,e,n),t=t.sibling}var _e=null,ut=!1;function Ut(t,e,n){for(n=n.child;n!==null;)tf(t,e,n),n=n.sibling}function tf(t,e,n){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Yi,n)}catch{}switch(n.tag){case 5:Ce||rr(n,e);case 6:var r=_e,s=ut;_e=null,Ut(t,e,n),_e=r,ut=s,_e!==null&&(ut?(t=_e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(ut?(t=_e,n=n.stateNode,t.nodeType===8?Lo(t.parentNode,n):t.nodeType===1&&Lo(t,n),hs(t)):Lo(_e,n.stateNode));break;case 4:r=_e,s=ut,_e=n.stateNode.containerInfo,ut=!0,Ut(t,e,n),_e=r,ut=s;break;case 0:case 11:case 14:case 15:if(!Ce&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ua(n,e,o),s=s.next}while(s!==r)}Ut(t,e,n);break;case 1:if(!Ce&&(rr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){le(n,e,a)}Ut(t,e,n);break;case 21:Ut(t,e,n);break;case 22:n.mode&1?(Ce=(r=Ce)||n.memoizedState!==null,Ut(t,e,n),Ce=r):Ut(t,e,n);break;default:Ut(t,e,n)}}function dc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xm),e.forEach(function(r){var s=Tm.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ot(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:_e=a.stateNode,ut=!1;break e;case 3:_e=a.stateNode.containerInfo,ut=!0;break e;case 4:_e=a.stateNode.containerInfo,ut=!0;break e}a=a.return}if(_e===null)throw Error(C(160));tf(i,o,s),_e=null,ut=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){le(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nf(e,t),e=e.sibling}function nf(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ot(e,t),yt(t),r&4){try{es(3,t,t.return),to(3,t)}catch(w){le(t,t.return,w)}try{es(5,t,t.return)}catch(w){le(t,t.return,w)}}break;case 1:ot(e,t),yt(t),r&512&&n!==null&&rr(n,n.return);break;case 5:if(ot(e,t),yt(t),r&512&&n!==null&&rr(n,n.return),t.flags&32){var s=t.stateNode;try{ls(s,"")}catch(w){le(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&bd(s,i),ha(a,o);var u=ha(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Pd(s,h):d==="dangerouslySetInnerHTML"?Cd(s,h):d==="children"?ls(s,h):gl(s,d,h,u)}switch(a){case"input":aa(s,i);break;case"textarea":Ed(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?ir(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?ir(s,!!i.multiple,i.defaultValue,!0):ir(s,!!i.multiple,i.multiple?[]:"",!1))}s[vs]=i}catch(w){le(t,t.return,w)}}break;case 6:if(ot(e,t),yt(t),r&4){if(t.stateNode===null)throw Error(C(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){le(t,t.return,w)}}break;case 3:if(ot(e,t),yt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hs(e.containerInfo)}catch(w){le(t,t.return,w)}break;case 4:ot(e,t),yt(t);break;case 13:ot(e,t),yt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Kl=ce())),r&4&&dc(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ce=(u=Ce)||d,ot(e,t),Ce=u):ot(e,t),yt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(O=t,d=t.child;d!==null;){for(h=O=d;O!==null;){switch(f=O,y=f.child,f.tag){case 0:case 11:case 14:case 15:es(4,f,f.return);break;case 1:rr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){le(r,n,w)}}break;case 5:rr(f,f.return);break;case 22:if(f.memoizedState!==null){fc(h);continue}}y!==null?(y.return=f,O=y):fc(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Nd("display",o))}catch(w){le(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){le(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ot(e,t),yt(t),r&4&&dc(t);break;case 21:break;default:ot(e,t),yt(t)}}function yt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ef(n)){var r=n;break e}n=n.return}throw Error(C(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ls(s,""),r.flags&=-33);var i=cc(t);Ba(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cc(t);za(t,a,o);break;default:throw Error(C(161))}}catch(l){le(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function km(t,e,n){O=t,rf(t)}function rf(t,e,n){for(var r=(t.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Qs;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ce;a=Qs;var u=Ce;if(Qs=o,(Ce=l)&&!u)for(O=s;O!==null;)o=O,l=o.child,o.tag===22&&o.memoizedState!==null?pc(s):l!==null?(l.return=o,O=l):pc(s);for(;i!==null;)O=i,rf(i),i=i.sibling;O=s,Qs=a,Ce=u}hc(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):hc(t)}}function hc(t){for(;O!==null;){var e=O;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ce||to(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ce)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:lt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Qu(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qu(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&hs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Ce||e.flags&512&&Fa(e)}catch(f){le(e,e.return,f)}}if(e===t){O=null;break}if(n=e.sibling,n!==null){n.return=e.return,O=n;break}O=e.return}}function fc(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var n=e.sibling;if(n!==null){n.return=e.return,O=n;break}O=e.return}}function pc(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{to(4,e)}catch(l){le(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){le(e,s,l)}}var i=e.return;try{Fa(e)}catch(l){le(e,i,l)}break;case 5:var o=e.return;try{Fa(e)}catch(l){le(e,o,l)}}}catch(l){le(e,e.return,l)}if(e===t){O=null;break}var a=e.sibling;if(a!==null){a.return=e.return,O=a;break}O=e.return}}var Sm=Math.ceil,Ai=Mt.ReactCurrentDispatcher,ql=Mt.ReactCurrentOwner,nt=Mt.ReactCurrentBatchConfig,H=0,xe=null,he=null,ke=0,Ve=0,sr=hn(0),me=0,Ss=null,On=0,no=0,Yl=0,ts=null,$e=null,Kl=0,vr=1/0,Ct=null,Li=!1,Wa=null,rn=null,Js=!1,Qt=null,$i=0,ns=0,Va=null,hi=-1,fi=0;function Ie(){return H&6?ce():hi!==-1?hi:hi=ce()}function sn(t){return t.mode&1?H&2&&ke!==0?ke&-ke:om.transition!==null?(fi===0&&(fi=zd()),fi):(t=Q,t!==0||(t=window.event,t=t===void 0?16:Kd(t.type)),t):1}function ft(t,e,n,r){if(50<ns)throw ns=0,Va=null,Error(C(185));Ts(t,n,r),(!(H&2)||t!==xe)&&(t===xe&&(!(H&2)&&(no|=n),me===4&&Yt(t,ke)),ze(t,r),n===1&&H===0&&!(e.mode&1)&&(vr=ce()+500,Xi&&fn()))}function ze(t,e){var n=t.callbackNode;og(t,e);var r=wi(t,t===xe?ke:0);if(r===0)n!==null&&Su(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Su(n),e===1)t.tag===0?im(gc.bind(null,t)):fh(gc.bind(null,t)),tm(function(){!(H&6)&&fn()}),n=null;else{switch(Bd(r)){case 1:n=xl;break;case 4:n=Ud;break;case 16:n=yi;break;case 536870912:n=Fd;break;default:n=yi}n=hf(n,sf.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sf(t,e){if(hi=-1,fi=0,H&6)throw Error(C(327));var n=t.callbackNode;if(cr()&&t.callbackNode!==n)return null;var r=wi(t,t===xe?ke:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Di(t,r);else{e=r;var s=H;H|=2;var i=af();(xe!==t||ke!==e)&&(Ct=null,vr=ce()+500,En(t,e));do try{jm();break}catch(a){of(t,a)}while(!0);Rl(),Ai.current=i,H=s,he!==null?e=0:(xe=null,ke=0,e=me)}if(e!==0){if(e===2&&(s=va(t),s!==0&&(r=s,e=Ha(t,s))),e===1)throw n=Ss,En(t,0),Yt(t,r),ze(t,ce()),n;if(e===6)Yt(t,r);else{if(s=t.current.alternate,!(r&30)&&!bm(s)&&(e=Di(t,r),e===2&&(i=va(t),i!==0&&(r=i,e=Ha(t,i))),e===1))throw n=Ss,En(t,0),Yt(t,r),ze(t,ce()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(C(345));case 2:yn(t,$e,Ct);break;case 3:if(Yt(t,r),(r&130023424)===r&&(e=Kl+500-ce(),10<e)){if(wi(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ie(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ea(yn.bind(null,t,$e,Ct),e);break}yn(t,$e,Ct);break;case 4:if(Yt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ht(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sm(r/1960))-r,10<r){t.timeoutHandle=Ea(yn.bind(null,t,$e,Ct),r);break}yn(t,$e,Ct);break;case 5:yn(t,$e,Ct);break;default:throw Error(C(329))}}}return ze(t,ce()),t.callbackNode===n?sf.bind(null,t):null}function Ha(t,e){var n=ts;return t.current.memoizedState.isDehydrated&&(En(t,e).flags|=256),t=Di(t,e),t!==2&&(e=$e,$e=n,e!==null&&qa(e)),t}function qa(t){$e===null?$e=t:$e.push.apply($e,t)}function bm(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!pt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yt(t,e){for(e&=~Yl,e&=~no,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ht(e),r=1<<n;t[n]=-1,e&=~r}}function gc(t){if(H&6)throw Error(C(327));cr();var e=wi(t,0);if(!(e&1))return ze(t,ce()),null;var n=Di(t,e);if(t.tag!==0&&n===2){var r=va(t);r!==0&&(e=r,n=Ha(t,r))}if(n===1)throw n=Ss,En(t,0),Yt(t,e),ze(t,ce()),n;if(n===6)throw Error(C(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yn(t,$e,Ct),ze(t,ce()),null}function Gl(t,e){var n=H;H|=1;try{return t(e)}finally{H=n,H===0&&(vr=ce()+500,Xi&&fn())}}function In(t){Qt!==null&&Qt.tag===0&&!(H&6)&&cr();var e=H;H|=1;var n=nt.transition,r=Q;try{if(nt.transition=null,Q=1,t)return t()}finally{Q=r,nt.transition=n,H=e,!(H&6)&&fn()}}function Ql(){Ve=sr.current,ne(sr)}function En(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,em(n)),he!==null)for(n=he.return;n!==null;){var r=n;switch(Tl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bi();break;case 3:gr(),ne(Ue),ne(Ne),Ul();break;case 5:Ml(r);break;case 4:gr();break;case 13:ne(ie);break;case 19:ne(ie);break;case 10:Al(r.type._context);break;case 22:case 23:Ql()}n=n.return}if(xe=t,he=t=on(t.current,null),ke=Ve=e,me=0,Ss=null,Yl=no=On=0,$e=ts=null,Sn!==null){for(e=0;e<Sn.length;e++)if(n=Sn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Sn=null}return t}function of(t,e){do{var n=he;try{if(Rl(),ui.current=Ri,Ii){for(var r=oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ii=!1}if(Tn=0,we=ge=oe=null,Zr=!1,xs=0,ql.current=null,n===null||n.return===null){me=1,Ss=e,he=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=ke,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=nc(o);if(y!==null){y.flags&=-257,rc(y,o,a,i,e),y.mode&1&&tc(i,u,e),e=y,l=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){tc(i,u,e),Jl();break e}l=Error(C(426))}}else if(re&&a.mode&1){var _=nc(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),rc(_,o,a,i,e),Ol(mr(l,a));break e}}i=l=mr(l,a),me!==4&&(me=2),ts===null?ts=[i]:ts.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Bh(i,l,e);Gu(i,m);break e;case 1:a=l;var p=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(rn===null||!rn.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Wh(i,a,e);Gu(i,x);break e}}i=i.return}while(i!==null)}uf(n)}catch(b){e=b,he===n&&n!==null&&(he=n=n.return);continue}break}while(!0)}function af(){var t=Ai.current;return Ai.current=Ri,t===null?Ri:t}function Jl(){(me===0||me===3||me===2)&&(me=4),xe===null||!(On&268435455)&&!(no&268435455)||Yt(xe,ke)}function Di(t,e){var n=H;H|=2;var r=af();(xe!==t||ke!==e)&&(Ct=null,En(t,e));do try{Em();break}catch(s){of(t,s)}while(!0);if(Rl(),H=n,Ai.current=r,he!==null)throw Error(C(261));return xe=null,ke=0,me}function Em(){for(;he!==null;)lf(he)}function jm(){for(;he!==null&&!Jp();)lf(he)}function lf(t){var e=df(t.alternate,t,Ve);t.memoizedProps=t.pendingProps,e===null?uf(t):he=e,ql.current=null}function uf(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wm(n,e),n!==null){n.flags&=32767,he=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{me=6,he=null;return}}else if(n=ym(n,e,Ve),n!==null){he=n;return}if(e=e.sibling,e!==null){he=e;return}he=e=t}while(e!==null);me===0&&(me=5)}function yn(t,e,n){var r=Q,s=nt.transition;try{nt.transition=null,Q=1,Cm(t,e,n,r)}finally{nt.transition=s,Q=r}return null}function Cm(t,e,n,r){do cr();while(Qt!==null);if(H&6)throw Error(C(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(C(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ag(t,i),t===xe&&(he=xe=null,ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Js||(Js=!0,hf(yi,function(){return cr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nt.transition,nt.transition=null;var o=Q;Q=1;var a=H;H|=4,ql.current=null,_m(t,n),nf(n,t),Yg(Sa),xi=!!ka,Sa=ka=null,t.current=n,km(n),Xp(),H=a,Q=o,nt.transition=i}else t.current=n;if(Js&&(Js=!1,Qt=t,$i=s),i=t.pendingLanes,i===0&&(rn=null),tg(n.stateNode),ze(t,ce()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Li)throw Li=!1,t=Wa,Wa=null,t;return $i&1&&t.tag!==0&&cr(),i=t.pendingLanes,i&1?t===Va?ns++:(ns=0,Va=t):ns=0,fn(),null}function cr(){if(Qt!==null){var t=Bd($i),e=nt.transition,n=Q;try{if(nt.transition=null,Q=16>t?16:t,Qt===null)var r=!1;else{if(t=Qt,Qt=null,$i=0,H&6)throw Error(C(331));var s=H;for(H|=4,O=t.current;O!==null;){var i=O,o=i.child;if(O.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(O=u;O!==null;){var d=O;switch(d.tag){case 0:case 11:case 15:es(8,d,i)}var h=d.child;if(h!==null)h.return=d,O=h;else for(;O!==null;){d=O;var f=d.sibling,y=d.return;if(Zh(d),d===u){O=null;break}if(f!==null){f.return=y,O=f;break}O=y}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}O=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,O=o;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:es(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,O=m;break e}O=i.return}}var p=t.current;for(O=p;O!==null;){o=O;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,O=g;else e:for(o=p;O!==null;){if(a=O,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:to(9,a)}}catch(b){le(a,a.return,b)}if(a===o){O=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,O=x;break e}O=a.return}}if(H=s,fn(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Yi,t)}catch{}r=!0}return r}finally{Q=n,nt.transition=e}}return!1}function mc(t,e,n){e=mr(n,e),e=Bh(t,e,1),t=nn(t,e,1),e=Ie(),t!==null&&(Ts(t,1,e),ze(t,e))}function le(t,e,n){if(t.tag===3)mc(t,t,n);else for(;e!==null;){if(e.tag===3){mc(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rn===null||!rn.has(r))){t=mr(n,t),t=Wh(e,t,1),e=nn(e,t,1),t=Ie(),e!==null&&(Ts(e,1,t),ze(e,t));break}}e=e.return}}function Nm(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ie(),t.pingedLanes|=t.suspendedLanes&n,xe===t&&(ke&n)===n&&(me===4||me===3&&(ke&130023424)===ke&&500>ce()-Kl?En(t,0):Yl|=n),ze(t,e)}function cf(t,e){e===0&&(t.mode&1?(e=zs,zs<<=1,!(zs&130023424)&&(zs=4194304)):e=1);var n=Ie();t=$t(t,e),t!==null&&(Ts(t,e,n),ze(t,n))}function Pm(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cf(t,n)}function Tm(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(e),cf(t,n)}var df;df=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ue.current)Me=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Me=!1,vm(t,e,n);Me=!!(t.flags&131072)}else Me=!1,re&&e.flags&1048576&&ph(e,Ci,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;di(t,e),t=e.pendingProps;var s=hr(e,Ne.current);ur(e,n),s=zl(null,e,r,t,s,n);var i=Bl();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fe(r)?(i=!0,Ei(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$l(e),s.updater=eo,e.stateNode=s,s._reactInternals=e,Ia(e,r,t,n),e=La(null,e,r,!0,i,n)):(e.tag=0,re&&i&&Pl(e),Oe(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(di(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Im(r),t=lt(r,t),s){case 0:e=Aa(null,e,r,t,n);break e;case 1:e=oc(null,e,r,t,n);break e;case 11:e=sc(null,e,r,t,n);break e;case 14:e=ic(null,e,r,lt(r.type,t),n);break e}throw Error(C(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),Aa(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),oc(t,e,r,s,n);case 3:e:{if(Yh(e),t===null)throw Error(C(387));r=e.pendingProps,i=e.memoizedState,s=i.element,xh(t,e),Ti(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=mr(Error(C(423)),e),e=ac(t,e,r,n,s);break e}else if(r!==s){s=mr(Error(C(424)),e),e=ac(t,e,r,n,s);break e}else for(He=tn(e.stateNode.containerInfo.firstChild),qe=e,re=!0,dt=null,n=yh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fr(),r===s){e=Dt(t,e,n);break e}Oe(t,e,r,n)}e=e.child}return e;case 5:return _h(e),t===null&&Pa(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ba(r,s)?o=null:i!==null&&ba(r,i)&&(e.flags|=32),qh(t,e),Oe(t,e,o,n),e.child;case 6:return t===null&&Pa(e),null;case 13:return Kh(t,e,n);case 4:return Dl(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pr(e,null,r,n):Oe(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),sc(t,e,r,s,n);case 7:return Oe(t,e,e.pendingProps,n),e.child;case 8:return Oe(t,e,e.pendingProps.children,n),e.child;case 12:return Oe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ee(Ni,r._currentValue),r._currentValue=o,i!==null)if(pt(i.value,o)){if(i.children===s.children&&!Ue.current){e=Dt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Rt(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Ta(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(C(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ta(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Oe(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ur(e,n),s=st(s),r=r(s),e.flags|=1,Oe(t,e,r,n),e.child;case 14:return r=e.type,s=lt(r,e.pendingProps),s=lt(r.type,s),ic(t,e,r,s,n);case 15:return Vh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lt(r,s),di(t,e),e.tag=1,Fe(r)?(t=!0,Ei(e)):t=!1,ur(e,n),zh(e,r,s),Ia(e,r,s,n),La(null,e,r,!0,t,n);case 19:return Gh(t,e,n);case 22:return Hh(t,e,n)}throw Error(C(156,e.tag))};function hf(t,e){return Md(t,e)}function Om(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function et(t,e,n,r){return new Om(t,e,n,r)}function Xl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Im(t){if(typeof t=="function")return Xl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vl)return 11;if(t===yl)return 14}return 2}function on(t,e){var n=t.alternate;return n===null?(n=et(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pi(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Xl(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Kn:return jn(n.children,s,i,e);case ml:o=8,s|=8;break;case na:return t=et(12,n,e,s|2),t.elementType=na,t.lanes=i,t;case ra:return t=et(13,n,e,s),t.elementType=ra,t.lanes=i,t;case sa:return t=et(19,n,e,s),t.elementType=sa,t.lanes=i,t;case _d:return ro(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wd:o=10;break e;case xd:o=9;break e;case vl:o=11;break e;case yl:o=14;break e;case Wt:o=16,r=null;break e}throw Error(C(130,t==null?t:typeof t,""))}return e=et(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function jn(t,e,n,r){return t=et(7,t,r,e),t.lanes=n,t}function ro(t,e,n,r){return t=et(22,t,r,e),t.elementType=_d,t.lanes=n,t.stateNode={isHidden:!1},t}function Wo(t,e,n){return t=et(6,t,null,e),t.lanes=n,t}function Vo(t,e,n){return e=et(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Rm(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bo(0),this.expirationTimes=bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Zl(t,e,n,r,s,i,o,a,l){return t=new Rm(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=et(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$l(i),t}function Am(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ff(t){if(!t)return un;t=t._reactInternals;e:{if(Ln(t)!==t||t.tag!==1)throw Error(C(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(t.tag===1){var n=t.type;if(Fe(n))return hh(t,n,e)}return e}function pf(t,e,n,r,s,i,o,a,l){return t=Zl(n,r,!0,t,s,i,o,a,l),t.context=ff(null),n=t.current,r=Ie(),s=sn(n),i=Rt(r,s),i.callback=e??null,nn(n,i,s),t.current.lanes=s,Ts(t,s,r),ze(t,r),t}function so(t,e,n,r){var s=e.current,i=Ie(),o=sn(s);return n=ff(n),e.context===null?e.context=n:e.pendingContext=n,e=Rt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nn(s,e,o),t!==null&&(ft(t,s,o,i),li(t,s,o)),o}function Mi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eu(t,e){vc(t,e),(t=t.alternate)&&vc(t,e)}function Lm(){return null}var gf=typeof reportError=="function"?reportError:function(t){console.error(t)};function tu(t){this._internalRoot=t}io.prototype.render=tu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));so(t,e,null,null)};io.prototype.unmount=tu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;In(function(){so(null,t,null,null)}),e[Lt]=null}};function io(t){this._internalRoot=t}io.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qt.length&&e!==0&&e<qt[n].priority;n++);qt.splice(n,0,t),n===0&&Yd(t)}};function nu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function oo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yc(){}function $m(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Mi(o);i.call(u)}}var o=pf(e,r,t,0,null,!1,!1,"",yc);return t._reactRootContainer=o,t[Lt]=o.current,gs(t.nodeType===8?t.parentNode:t),In(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Mi(l);a.call(u)}}var l=Zl(t,0,!1,null,null,!1,!1,"",yc);return t._reactRootContainer=l,t[Lt]=l.current,gs(t.nodeType===8?t.parentNode:t),In(function(){so(e,l,n,r)}),l}function ao(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Mi(o);a.call(l)}}so(e,o,t,s)}else o=$m(n,e,t,s,r);return Mi(o)}Wd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hr(e.pendingLanes);n!==0&&(_l(e,n|1),ze(e,ce()),!(H&6)&&(vr=ce()+500,fn()))}break;case 13:In(function(){var r=$t(t,1);if(r!==null){var s=Ie();ft(r,t,1,s)}}),eu(t,1)}};kl=function(t){if(t.tag===13){var e=$t(t,134217728);if(e!==null){var n=Ie();ft(e,t,134217728,n)}eu(t,134217728)}};Vd=function(t){if(t.tag===13){var e=sn(t),n=$t(t,e);if(n!==null){var r=Ie();ft(n,t,e,r)}eu(t,e)}};Hd=function(){return Q};qd=function(t,e){var n=Q;try{return Q=t,e()}finally{Q=n}};pa=function(t,e,n){switch(e){case"input":if(aa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ji(r);if(!s)throw Error(C(90));Sd(r),aa(r,s)}}}break;case"textarea":Ed(t,n);break;case"select":e=n.value,e!=null&&ir(t,!!n.multiple,e,!1)}};Id=Gl;Rd=In;var Dm={usingClientEntryPoint:!1,Events:[Is,Xn,Ji,Td,Od,Gl]},Dr={findFiberByHostInstance:kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mm={bundleType:Dr.bundleType,version:Dr.version,rendererPackageName:Dr.rendererPackageName,rendererConfig:Dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$d(t),t===null?null:t.stateNode},findFiberByHostInstance:Dr.findFiberByHostInstance||Lm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xs.isDisabled&&Xs.supportsFiber)try{Yi=Xs.inject(Mm),kt=Xs}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dm;Ke.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nu(e))throw Error(C(200));return Am(t,e,null,n)};Ke.createRoot=function(t,e){if(!nu(t))throw Error(C(299));var n=!1,r="",s=gf;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Zl(t,1,!1,null,null,n,!1,r,s),t[Lt]=e.current,gs(t.nodeType===8?t.parentNode:t),new tu(e)};Ke.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=$d(e),t=t===null?null:t.stateNode,t};Ke.flushSync=function(t){return In(t)};Ke.hydrate=function(t,e,n){if(!oo(e))throw Error(C(200));return ao(null,t,e,!0,n)};Ke.hydrateRoot=function(t,e,n){if(!nu(t))throw Error(C(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=gf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pf(e,null,t,1,n??null,s,!1,i,o),t[Lt]=e.current,gs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new io(e)};Ke.render=function(t,e,n){if(!oo(e))throw Error(C(200));return ao(null,t,e,!1,n)};Ke.unmountComponentAtNode=function(t){if(!oo(t))throw Error(C(40));return t._reactRootContainer?(In(function(){ao(null,null,t,!1,function(){t._reactRootContainer=null,t[Lt]=null})}),!0):!1};Ke.unstable_batchedUpdates=Gl;Ke.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!oo(n))throw Error(C(200));if(t==null||t._reactInternals===void 0)throw Error(C(38));return ao(t,e,n,!1,r)};Ke.version="18.3.1-next-f1338f8080-20240426";function mf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mf)}catch(t){console.error(t)}}mf(),gd.exports=Ke;var Um=gd.exports,vf,wc=Um;vf=wc.createRoot,wc.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bs(){return bs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bs.apply(this,arguments)}var Jt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Jt||(Jt={}));const xc="popstate";function Fm(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Ya("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:wf(s)}return Bm(e,n,null,t)}function ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zm(){return Math.random().toString(36).substr(2,8)}function _c(t,e){return{usr:t.state,key:t.key,idx:e}}function Ya(t,e,n,r){return n===void 0&&(n=null),bs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Sr(e):e,{state:n,key:e&&e.key||r||zm()})}function wf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Sr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Bm(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Jt.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(bs({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Jt.Pop;let _=d(),m=_==null?null:_-u;u=_,l&&l({action:a,location:w.location,delta:m})}function f(_,m){a=Jt.Push;let p=Ya(w.location,_,m);u=d()+1;let g=_c(p,u),x=w.createHref(p);try{o.pushState(g,"",x)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(x)}i&&l&&l({action:a,location:w.location,delta:1})}function y(_,m){a=Jt.Replace;let p=Ya(w.location,_,m);u=d();let g=_c(p,u),x=w.createHref(p);o.replaceState(g,"",x),i&&l&&l({action:a,location:w.location,delta:0})}function v(_){let m=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof _=="string"?_:wf(_);return p=p.replace(/ $/,"%20"),ve(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let w={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(xc,h),l=_,()=>{s.removeEventListener(xc,h),l=null}},createHref(_){return e(s,_)},createURL:v,encodeLocation(_){let m=v(_);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:y,go(_){return o.go(_)}};return w}var kc;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(kc||(kc={}));function Wm(t,e,n){return n===void 0&&(n="/"),Vm(t,e,n,!1)}function Vm(t,e,n,r){let s=typeof e=="string"?Sr(e):e,i=kf(s.pathname||"/",n);if(i==null)return null;let o=xf(t);Hm(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=n0(i);a=e0(o[l],u,r)}return a}function xf(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ve(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Cn([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),xf(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Xm(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of _f(i.path))s(i,o,l)}),e}function _f(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=_f(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Hm(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Zm(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qm=/^:[\w-]+$/,Ym=3,Km=2,Gm=1,Qm=10,Jm=-2,Sc=t=>t==="*";function Xm(t,e){let n=t.split("/"),r=n.length;return n.some(Sc)&&(r+=Jm),e&&(r+=Km),n.filter(s=>!Sc(s)).reduce((s,i)=>s+(qm.test(i)?Ym:i===""?Gm:Qm),r)}function Zm(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function e0(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=bc({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=bc({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Cn([i,h.pathname]),pathnameBase:l0(Cn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Cn([i,h.pathnameBase]))}return o}function bc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=t0(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:y}=d;if(f==="*"){let w=a[h]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[h];return y&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function t0(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),yf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function n0(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function r0(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Sr(t):t;return{pathname:n?n.startsWith("/")?n:s0(n,e):e,search:u0(r),hash:c0(s)}}function s0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ho(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function i0(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function o0(t,e){let n=i0(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function a0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Sr(t):(s=bs({},t),ve(!s.pathname||!s.pathname.includes("?"),Ho("?","pathname","search",s)),ve(!s.pathname||!s.pathname.includes("#"),Ho("#","pathname","hash",s)),ve(!s.search||!s.search.includes("#"),Ho("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=r0(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Cn=t=>t.join("/").replace(/\/\/+/g,"/"),l0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),u0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,c0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function d0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Sf=["post","put","patch","delete"];new Set(Sf);const h0=["get",...Sf];new Set(h0);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Es(){return Es=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Es.apply(this,arguments)}const ru=k.createContext(null),f0=k.createContext(null),lo=k.createContext(null),uo=k.createContext(null),br=k.createContext({outlet:null,matches:[],isDataRoute:!1}),bf=k.createContext(null);function co(){return k.useContext(uo)!=null}function Ef(){return co()||ve(!1),k.useContext(uo).location}function jf(t){k.useContext(lo).static||k.useLayoutEffect(t)}function p0(){let{isDataRoute:t}=k.useContext(br);return t?C0():g0()}function g0(){co()||ve(!1);let t=k.useContext(ru),{basename:e,future:n,navigator:r}=k.useContext(lo),{matches:s}=k.useContext(br),{pathname:i}=Ef(),o=JSON.stringify(o0(s,n.v7_relativeSplatPath)),a=k.useRef(!1);return jf(()=>{a.current=!0}),k.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=a0(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Cn([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function m0(t,e){return v0(t,e)}function v0(t,e,n,r){co()||ve(!1);let{navigator:s}=k.useContext(lo),{matches:i}=k.useContext(br),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Ef(),d;if(e){var h;let _=typeof e=="string"?Sr(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||ve(!1),d=_}else d=u;let f=d.pathname||"/",y=f;if(l!=="/"){let _=l.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=Wm(t,{pathname:y}),w=k0(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Cn([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Cn([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&w?k.createElement(uo.Provider,{value:{location:Es({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Jt.Pop}},w):w}function y0(){let t=j0(),e=d0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const w0=k.createElement(y0,null);class x0 extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(br.Provider,{value:this.props.routeContext},k.createElement(bf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _0(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(ru);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(br.Provider,{value:e},r)}function k0(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||ve(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:y}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let y,v=!1,w=null,_=null;n&&(y=a&&h.route.id?a[h.route.id]:void 0,w=h.route.errorElement||w0,l&&(u<0&&f===0?(v=!0,_=null):u===f&&(v=!0,_=h.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),p=()=>{let g;return y?g=w:v?g=_:h.route.Component?g=k.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=d,k.createElement(_0,{match:h,routeContext:{outlet:d,matches:m,isDataRoute:n!=null},children:g})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(x0,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var Cf=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Cf||{}),Ui=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ui||{});function S0(t){let e=k.useContext(ru);return e||ve(!1),e}function b0(t){let e=k.useContext(f0);return e||ve(!1),e}function E0(t){let e=k.useContext(br);return e||ve(!1),e}function Nf(t){let e=E0(),n=e.matches[e.matches.length-1];return n.route.id||ve(!1),n.route.id}function j0(){var t;let e=k.useContext(bf),n=b0(Ui.UseRouteError),r=Nf(Ui.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function C0(){let{router:t}=S0(Cf.UseNavigateStable),e=Nf(Ui.UseNavigateStable),n=k.useRef(!1);return jf(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Es({fromRouteId:e},i)))},[t,e])}function N0(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ka(t){ve(!1)}function P0(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Jt.Pop,navigator:i,static:o=!1,future:a}=t;co()&&ve(!1);let l=e.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:l,navigator:i,static:o,future:Es({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Sr(r));let{pathname:d="/",search:h="",hash:f="",state:y=null,key:v="default"}=r,w=k.useMemo(()=>{let _=kf(d,l);return _==null?null:{location:{pathname:_,search:h,hash:f,state:y,key:v},navigationType:s}},[l,d,h,f,y,v,s]);return w==null?null:k.createElement(lo.Provider,{value:u},k.createElement(uo.Provider,{children:n,value:w}))}function T0(t){let{children:e,location:n}=t;return m0(Ga(e),n)}new Promise(()=>{});function Ga(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,Ga(r.props.children,i));return}r.type!==Ka&&ve(!1),!r.props.index||!r.props.children||ve(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ga(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const O0="6";try{window.__reactRouterVersion=O0}catch{}const I0="startTransition",Ec=Np[I0];function R0(t){let{basename:e,children:n,future:r,window:s}=t,i=k.useRef();i.current==null&&(i.current=Fm({window:s,v5Compat:!0}));let o=i.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=k.useCallback(h=>{u&&Ec?Ec(()=>l(h)):l(h)},[l,u]);return k.useLayoutEffect(()=>o.listen(d),[o,d]),k.useEffect(()=>N0(r),[r]),k.createElement(P0,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var jc;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jc||(jc={}));var Cc;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Cc||(Cc={}));const Ht=class Ht{static configure(e){this.config=e,console.log("Microsoft service configured with client ID:",e.clientId),this.restoreAuthState()}static generateCodeVerifier(){const e=new Uint8Array(32);return crypto.getRandomValues(e),btoa(String.fromCharCode.apply(null,Array.from(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}static async generateCodeChallenge(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r);return btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(s)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}static async initiateLogin(){if(!this.config)throw new Error("Microsoft service not configured");console.log("Initiating Microsoft login with PKCE..."),this.codeVerifier=this.generateCodeVerifier();const e=await this.generateCodeChallenge(this.codeVerifier);localStorage.setItem("ms_code_verifier",this.codeVerifier);const n=Math.random().toString(36).substring(2,15);localStorage.setItem("ms_auth_state",n);const r=new URL("https://login.microsoftonline.com/"+this.config.tenantId+"/oauth2/v2.0/authorize");r.searchParams.append("client_id",this.config.clientId),r.searchParams.append("response_type","code"),r.searchParams.append("redirect_uri",this.config.redirectUri),r.searchParams.append("scope",this.config.scopes.join(" ")),r.searchParams.append("state",n),r.searchParams.append("code_challenge",e),r.searchParams.append("code_challenge_method","S256"),r.searchParams.append("response_mode","query"),console.log("Redirecting to Microsoft login:",r.toString()),window.location.href=r.toString()}static async handleAuthorizationCallback(e){if(!this.config)throw new Error("Microsoft service not configured");console.log("Processing authorization code with PKCE...");const n=localStorage.getItem("ms_code_verifier"),r=localStorage.getItem("ms_auth_state");if(!n)throw new Error("Code verifier not found. Please try logging in again.");if(new URLSearchParams(window.location.search).get("state")!==r)throw new Error("State parameter mismatch. Possible CSRF attack.");const o=`https://login.microsoftonline.com/${this.config.tenantId}/oauth2/v2.0/token`,a=new URLSearchParams;a.append("client_id",this.config.clientId),a.append("grant_type","authorization_code"),a.append("code",e),a.append("redirect_uri",this.config.redirectUri),a.append("code_verifier",n),console.log("Exchanging code for tokens...");const l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});if(!l.ok){const d=await l.text();throw console.error("Token exchange failed:",l.status,d),new Error(`Token exchange failed: ${l.status} ${l.statusText}`)}const u=await l.json();console.log("Tokens received successfully"),this.accessToken=u.access_token,this.refreshToken=u.refresh_token||null,this.tokenExpiry=Date.now()+u.expires_in*1e3,localStorage.removeItem("ms_code_verifier"),localStorage.removeItem("ms_auth_state"),this.saveAuthState(),console.log("Microsoft authentication completed successfully")}static async fetchUserProfile(){if(!this.isAuthenticated())throw new Error("Not authenticated");console.log("Fetching user profile from Microsoft Graph...");const e=await fetch("https://graph.microsoft.com/v1.0/me",{headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}});if(!e.ok)throw console.error("Failed to fetch user profile:",e.status,e.statusText),new Error(`Failed to fetch user profile: ${e.status} ${e.statusText}`);const n=await e.json();return console.log("User profile fetched:",n.displayName),this.userProfile={id:n.id,displayName:n.displayName,mail:n.mail||n.userPrincipalName,userPrincipalName:n.userPrincipalName},this.saveAuthState(),this.userProfile}static isAuthenticated(){if(!this.accessToken||!this.tokenExpiry)return!1;const e=Date.now()>this.tokenExpiry-5*60*1e3;return e&&this.refreshToken?(this.refreshAccessToken().catch(n=>{console.error("Auto token refresh failed:",n)}),!1):!e}static getCurrentUser(){return this.userProfile}static checkTokenValidity(){if(!this.tokenExpiry)return{isValid:!1};const e=Date.now(),n=this.tokenExpiry-e;return{isValid:n>5*60*1e3,expiresAt:new Date(this.tokenExpiry),timeRemaining:Math.max(0,n)}}static async refreshAccessToken(){if(!this.config||!this.refreshToken)throw new Error("Cannot refresh token: missing configuration or refresh token");console.log("Refreshing access token...");const e=`https://login.microsoftonline.com/${this.config.tenantId}/oauth2/v2.0/token`,n=new URLSearchParams;n.append("client_id",this.config.clientId),n.append("grant_type","refresh_token"),n.append("refresh_token",this.refreshToken),n.append("scope",this.config.scopes.join(" "));const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n});if(!r.ok)throw console.error("Token refresh failed:",r.status),this.logout(),new Error("Token refresh failed");const s=await r.json();this.accessToken=s.access_token,s.refresh_token&&(this.refreshToken=s.refresh_token),this.tokenExpiry=Date.now()+s.expires_in*1e3,this.saveAuthState(),console.log("Access token refreshed successfully")}static saveAuthState(){try{const e={accessToken:this.accessToken,refreshToken:this.refreshToken,tokenExpiry:this.tokenExpiry,userProfile:this.userProfile};localStorage.setItem("ms_auth_state",JSON.stringify(e))}catch(e){console.error("Failed to save auth state:",e)}}static restoreAuthState(){var e;try{const n=localStorage.getItem("ms_auth_state");if(n){const r=JSON.parse(n);this.accessToken=r.accessToken,this.refreshToken=r.refreshToken,this.tokenExpiry=r.tokenExpiry,this.userProfile=r.userProfile,console.log("Restored authentication state for user:",(e=this.userProfile)==null?void 0:e.displayName)}}catch(n){console.error("Failed to restore auth state:",n),this.logout()}}static logout(){console.log("Logging out from Microsoft..."),this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.userProfile=null,this.codeVerifier=null,localStorage.removeItem("ms_auth_state"),localStorage.removeItem("ms_code_verifier"),localStorage.removeItem("ms_auth_state")}static async uploadInvoiceToOneDrive(e,n){return console.log("OneDrive upload would happen here for invoice:",e.id),{success:!0,fileUrl:`https://onedrive.com/simulated/${e.id}`}}static async listExcelFiles(){return console.log("Excel file listing would happen here"),[]}static async listFolders(e=""){return console.log("Folder listing would happen here for path:",e),[]}static async listExcelFilesInPath(e=""){return console.log("Excel file listing in path would happen here for path:",e),[]}static async deleteFileFromOneDrive(e){return console.log("OneDrive file deletion would happen here for:",e),{success:!0}}static async removeFromExcel(e){return console.log("Excel row removal would happen here for invoice:",e.id),{success:!0}}static async updateInExcel(e){console.log("Excel update would happen here for invoice:",e.id)}static async appendToExcel(e){console.log("Excel append would happen here for invoice:",e.id)}};Ht.config=null,Ht.accessToken=null,Ht.refreshToken=null,Ht.tokenExpiry=null,Ht.userProfile=null,Ht.codeVerifier=null;let K=Ht;const Nc=Object.freeze(Object.defineProperty({__proto__:null,MicrosoftService:K},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Y=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...u},d)=>k.createElement("svg",{ref:d,...A0,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${L0(t)}`,a].join(" "),...u},[...e.map(([h,f])=>k.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Y("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=Y("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=Y("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=Y("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=Y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=Y("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Y("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=Y("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=Y("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=Y("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=Y("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=Y("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=Y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=Y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=Y("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=Y("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=Y("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=Y("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function G0({isOpen:t,onClose:e}){const[n,r]=k.useState(!1),[s,i]=k.useState(""),o=async()=>{i(""),r(!0);try{console.log("AuthModal: Initiating Microsoft login..."),K.initiateLogin()}catch(a){console.error("Microsoft login error:",a),i(a instanceof Error?a.message:"Microsoft login failed"),r(!1)}finally{}};return t?c.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(q0,{className:"w-8 h-8 text-white"})}),c.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Welcome to Invoice Manager"}),c.jsx("p",{className:"text-blue-100",children:"Sign in with your Microsoft account to start managing your invoices"})]})}),c.jsxs("div",{className:"p-6 space-y-4",children:[s&&c.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-600",children:s})}),c.jsx("div",{className:"text-center mb-6",children:c.jsx("p",{className:"text-gray-600 mb-4",children:"Use your Microsoft 365 account to access all features including OneDrive sync and Excel tracking."})}),c.jsx("button",{onClick:o,disabled:n,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-lg",children:n?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M11.4 24H0V12.6h11.4V24zM24 24H12.6V12.6H24V24zM11.4 11.4H0V0h11.4v11.4zM24 11.4H12.6V0H24v11.4z"})}),"Sign in with Microsoft"]})}),c.jsx("div",{className:"text-center mt-4",children:c.jsx("p",{className:"text-xs text-gray-500",children:"By signing in, you agree to sync your invoice data with Microsoft OneDrive and Excel for backup and tracking purposes."})})]})]})}):null}const Q0="modulepreload",J0=function(t){return"/"+t},Ac={},Rn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=J0(l),l in Ac)return;Ac[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Q0,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,y)=>{h.addEventListener("load",f),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},X0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class iu extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Z0 extends iu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Lc extends iu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class $c extends iu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ja;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ja||(Ja={}));var ev=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class tv{constructor(e,{headers:n={},customFetch:r,region:s=Ja.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=X0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return ev(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(w=>{throw new Z0(w)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Lc(h);if(!h.ok)throw new $c(h);let y=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return y==="application/json"?v=yield h.json():y==="application/octet-stream"?v=yield h.blob():y==="text/event-stream"?v=h:y==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof $c||s instanceof Lc?s.context:void 0}}})}}var De={},ou={},ho={},As={},fo={},po={},nv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wr=nv();const rv=wr.fetch,Af=wr.fetch.bind(wr),Lf=wr.Headers,sv=wr.Request,iv=wr.Response,Er=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lf,Request:sv,Response:iv,default:Af,fetch:rv},Symbol.toStringTag,{value:"Module"})),ov=hp(Er);var go={};Object.defineProperty(go,"__esModule",{value:!0});let av=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};go.default=av;var $f=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(po,"__esModule",{value:!0});const lv=$f(ov),uv=$f(go);let cv=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=lv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,u;let d=null,h=null,f=null,y=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=p:h=JSON.parse(p))}const _=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),m=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");_&&m&&m.length>1&&(f=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,y=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await i.text();try{d=JSON.parse(_),Array.isArray(d)&&i.status===404&&(h=[],d=null,y=200,v="OK")}catch{i.status===404&&_===""?(y=204,v="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,y=200,v="OK"),d&&this.shouldThrowOnError)throw new uv.default(d)}return{error:d,data:h,count:f,status:y,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};po.default=cv;var dv=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fo,"__esModule",{value:!0});const hv=dv(po);let fv=class extends hv.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};fo.default=fv;var pv=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(As,"__esModule",{value:!0});const gv=pv(fo);let mv=class extends gv.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};As.default=mv;var vv=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ho,"__esModule",{value:!0});const Fr=vv(As);let yv=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Fr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Fr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Fr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};ho.default=yv;var Df=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ou,"__esModule",{value:!0});const wv=Df(ho),xv=Df(As);let _v=class Mf{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new wv.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Mf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new xv.default({method:a,url:l,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};ou.default=_v;var jr=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(De,"__esModule",{value:!0});De.PostgrestError=De.PostgrestBuilder=De.PostgrestTransformBuilder=De.PostgrestFilterBuilder=De.PostgrestQueryBuilder=De.PostgrestClient=void 0;const Uf=jr(ou);De.PostgrestClient=Uf.default;const Ff=jr(ho);De.PostgrestQueryBuilder=Ff.default;const zf=jr(As);De.PostgrestFilterBuilder=zf.default;const Bf=jr(fo);De.PostgrestTransformBuilder=Bf.default;const Wf=jr(po);De.PostgrestBuilder=Wf.default;const Vf=jr(go);De.PostgrestError=Vf.default;var kv=De.default={PostgrestClient:Uf.default,PostgrestQueryBuilder:Ff.default,PostgrestFilterBuilder:zf.default,PostgrestTransformBuilder:Bf.default,PostgrestBuilder:Wf.default,PostgrestError:Vf.default};const{PostgrestClient:Sv,PostgrestQueryBuilder:Mx,PostgrestFilterBuilder:Ux,PostgrestTransformBuilder:Fx,PostgrestBuilder:zx,PostgrestError:Bx}=kv;class bv{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ev="2.15.4",jv=`realtime-js/${Ev}`,Cv="1.0.0",Xa=1e4,Nv=1e3,Pv=100;var rs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(rs||(rs={}));var fe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(fe||(fe={}));var ct;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ct||(ct={}));var Za;(function(t){t.websocket="websocket"})(Za||(Za={}));var _n;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(_n||(_n={}));class Tv{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Hf{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Z;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Z||(Z={}));const Dc=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Ov(o,t,e,s),i),{})},Ov=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?qf(i,o):el(o)},qf=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Lv(e,n)}switch(t){case Z.bool:return Iv(e);case Z.float4:case Z.float8:case Z.int2:case Z.int4:case Z.int8:case Z.numeric:case Z.oid:return Rv(e);case Z.json:case Z.jsonb:return Av(e);case Z.timestamp:return $v(e);case Z.abstime:case Z.date:case Z.daterange:case Z.int4range:case Z.int8range:case Z.money:case Z.reltime:case Z.text:case Z.time:case Z.timestamptz:case Z.timetz:case Z.tsrange:case Z.tstzrange:return el(e);default:return el(e)}},el=t=>t,Iv=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Rv=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Av=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Lv=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>qf(e,a))}return t},$v=t=>typeof t=="string"?t.replace(" ","T"):t,Yf=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class qo{constructor(e,n,r={},s=Xa){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Mc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Mc||(Mc={}));class ss{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ss.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=ss.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ss.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(_=>_.presence_ref),y=h.map(_=>_.presence_ref),v=d.filter(_=>y.indexOf(_.presence_ref)<0),w=h.filter(_=>f.indexOf(_.presence_ref)<0);v.length>0&&(a[u]=v),w.length>0&&(l[u]=w)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(y=>y.presence_ref),f=d.filter(y=>h.indexOf(y.presence_ref)<0);e[a].unshift(...f)}r(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Uc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Uc||(Uc={}));var is;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(is||(is={}));var Nt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Nt||(Nt={}));class au{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new qo(this,ct.join,this.params,this.timeout),this.rejoinTimer=new Hf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ct.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ss(this),this.broadcastEndpointURL=Yf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==fe.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[is.PRESENCE]&&this.bindings[is.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(Nt.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Nt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket.setAuth(),y===void 0){e==null||e(Nt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,m=[];for(let p=0;p<_;p++){const g=w[p],{filter:{event:x,schema:b,table:j,filter:E}}=g,P=y&&y[p];if(P&&P.event===x&&P.schema===b&&P.table===j&&P.filter===E)m.push(Object.assign(Object.assign({},g),{id:P.id}));else{this.unsubscribe(),this.state=fe.errored,e==null||e(Nt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(Nt.SUBSCRIBED);return}}).receive("error",y=>{this.state=fe.errored,e==null||e(Nt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Nt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===fe.joined&&e===is.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=fe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ct.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new qo(this,ct.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=fe.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new qo(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Pv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=ct;if(r&&[a,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var v,w,_;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((_=(w=y.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(y=>y.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var v,w,_,m,p,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const x=y.id,b=(v=y.filter)===null||v===void 0?void 0:v.event;return x&&((w=n.ids)===null||w===void 0?void 0:w.includes(x))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const x=(p=(m=y==null?void 0:y.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return x==="*"||x===((g=n==null?void 0:n.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:w,table:_,commit_timestamp:m,type:p,errors:g}=v;f=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:m,eventType:p,new:{},old:{},errors:g}),this._getPayloadRecords(v))}y.callback(f,r)})}_isClosed(){return this.state===fe.closed}_isJoined(){return this.state===fe.joined}_isJoining(){return this.state===fe.joining}_isLeaving(){return this.state===fe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&au.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ct.close,{},e)}_onError(e){this._on(ct.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Dc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Dc(e.columns,e.old_record)),n}}const Yo=()=>{},Zs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Dv=[1e3,2e3,5e3,1e4],Mv=1e4,Uv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fv{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xa,this.transport=null,this.heartbeatIntervalMs=Zs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yo,this.ref=0,this.reconnectTimer=null,this.logger=Yo,this.conn=null,this.sendBuffer=[],this.serializer=new Tv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Rn(async()=>{const{default:a}=await Promise.resolve().then(()=>Er);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Za.websocket}`,this.httpEndpoint=Yf(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Cv}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case rs.connecting:return _n.Connecting;case rs.open:return _n.Open;case rs.closing:return _n.Closing;default:return _n.Closed}}isConnected(){return this.connectionState()===_n.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new au(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Nv,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Zs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ct.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Uv],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:jv};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(ct.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Hf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,u,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Xa,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Zs.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Yo,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>Dv[h-1]||Mv,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class lu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class zv extends lu{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tl extends lu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Bv=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Kf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Wv=()=>Bv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Rn(()=>Promise.resolve().then(()=>Er),void 0)).Response:Response}),nl=t=>{if(Array.isArray(t))return t.map(n=>nl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=nl(r)}),e},Vv=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var $n=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Ko=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Hv=(t,e,n)=>$n(void 0,void 0,void 0,function*(){const r=yield Wv();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new zv(Ko(s),i,o))}).catch(s=>{e(new tl(Ko(s),s))}):e(new tl(Ko(t),t))}),qv=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(Vv(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Ls(t,e,n,r,s,i){return $n(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,qv(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Hv(l,a,r))})})}function Bi(t,e,n,r){return $n(this,void 0,void 0,function*(){return Ls(t,"GET",e,n,r)})}function xt(t,e,n,r,s){return $n(this,void 0,void 0,function*(){return Ls(t,"POST",e,r,s,n)})}function rl(t,e,n,r,s){return $n(this,void 0,void 0,function*(){return Ls(t,"PUT",e,r,s,n)})}function Yv(t,e,n,r){return $n(this,void 0,void 0,function*(){return Ls(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Gf(t,e,n,r,s){return $n(this,void 0,void 0,function*(){return Ls(t,"DELETE",e,r,s,n)})}var Te=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Kv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gv{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Kf(s)}uploadOrUpdate(e,n,r,s){return Te(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Fc),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?rl:xt)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(pe(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Te(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Fc.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield rl(this.fetch,a.toString(),l,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(pe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Te(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield xt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new lu("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}update(e,n,r){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Te(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Te(this,void 0,void 0,function*(){try{return{data:{path:(yield xt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Te(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield xt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Te(this,void 0,void 0,function*(){try{const s=yield xt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}download(e,n){return Te(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Bi(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(pe(a))return{data:null,error:a};throw a}})}info(e){return Te(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Bi(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:nl(r),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}exists(e){return Te(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Yv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(pe(r)&&r instanceof tl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Gf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}list(e,n,r){return Te(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Kv),n),{prefix:e||""});return{data:yield xt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}listV2(e,n){return Te(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield xt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Qv="2.11.0",Jv={"X-Client-Info":`storage-js/${Qv}`};var Mn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class Xv{constructor(e,n={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Jv),n),this.fetch=Kf(r)}listBuckets(){return Mn(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(pe(e))return{data:null,error:e};throw e}})}getBucket(e){return Mn(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Mn(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Mn(this,void 0,void 0,function*(){try{return{data:yield rl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Mn(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Mn(this,void 0,void 0,function*(){try{return{data:yield Gf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}}class Zv extends Xv{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new Gv(this.url,this.headers,e,this.fetch)}}const ey="2.56.1";let Yr="";typeof Deno<"u"?Yr="deno":typeof document<"u"?Yr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Yr="react-native":Yr="node";const ty={"X-Client-Info":`supabase-js-${Yr}/${ey}`},ny={headers:ty},ry={schema:"public"},sy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iy={};var oy=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const ay=t=>{let e;return t?e=t:typeof fetch>"u"?e=Af:e=fetch,(...n)=>e(...n)},ly=()=>typeof Headers>"u"?Lf:Headers,uy=(t,e,n)=>{const r=ay(n),s=ly();return(i,o)=>oy(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var cy=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};function dy(t){return t.endsWith("/")?t:t+"/"}function hy(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>cy(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Qf="2.71.1",Hn=30*1e3,sl=3,Go=sl*Hn,fy="http://localhost:9999",py="supabase.auth.token",gy={"X-Client-Info":`gotrue-js/${Qf}`},il="X-Supabase-Api-Version",Jf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},my=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vy=10*60*1e3;class uu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function F(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class yy extends uu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function wy(t){return F(t)&&t.name==="AuthApiError"}class Xf extends uu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class pn extends uu{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Bt extends pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xy(t){return F(t)&&t.name==="AuthSessionMissingError"}class ei extends pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ti extends pn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ni extends pn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _y(t){return F(t)&&t.name==="AuthImplicitGrantRedirectError"}class zc extends pn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ol extends pn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Qo(t){return F(t)&&t.name==="AuthRetryableFetchError"}class Bc extends pn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class al extends pn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wc=` 	
\r=`.split(""),ky=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Wc.length;e+=1)t[Wc[e].charCodeAt(0)]=-2;for(let e=0;e<Wi.length;e+=1)t[Wi[e].charCodeAt(0)]=e;return t})();function Vc(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Wi[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Wi[r]),e.queuedBits-=6}}function Zf(t,e,n){const r=ky[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Hc(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Ey(o,r,n)};for(let o=0;o<t.length;o+=1)Zf(t.charCodeAt(o),s,i);return e.join("")}function Sy(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function by(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Sy(r,e)}}function Ey(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function jy(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Zf(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Cy(t){const e=[];return by(t,n=>e.push(n)),new Uint8Array(e)}function Ny(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Vc(s,n,r)),Vc(null,n,r),e.join("")}function Py(t){return Math.round(Date.now()/1e3)+t}function Ty(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const at=()=>typeof window<"u"&&typeof document<"u",gn={tested:!1,writable:!1},ep=()=>{if(!at())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gn.tested)return gn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),gn.tested=!0,gn.writable=!0}catch{gn.tested=!0,gn.writable=!1}return gn.writable};function Oy(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const tp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Iy=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",qn=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},mn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ft=async(t,e)=>{await t.removeItem(e)};class mo{constructor(){this.promise=new mo.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}mo.promiseConstructor=Promise;function Jo(t){const e=t.split(".");if(e.length!==3)throw new al("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!my.test(e[r]))throw new al("JWT not in base64url format");return{header:JSON.parse(Hc(e[0])),payload:JSON.parse(Hc(e[1])),signature:jy(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ry(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ay(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Ly(t){return("0"+t.toString(16)).substr(-2)}function $y(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Ly).join("")}async function Dy(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function My(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Dy(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Un(t,e,n=!1){const r=$y();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await qn(t,`${e}-code-verifier`,s);const i=await My(r);return[i,r===i?"plain":"s256"]}const Uy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Fy(t){const e=t.headers.get(il);if(!e||!e.match(Uy))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function zy(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function By(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fn(t){if(!Wy.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xo(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qc(t){return JSON.parse(JSON.stringify(t))}var Vy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const wn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Hy=[502,503,504];async function Yc(t){var e;if(!Iy(t))throw new ol(wn(t),0);if(Hy.includes(t.status))throw new ol(wn(t),t.status);let n;try{n=await t.json()}catch(i){throw new Xf(wn(i),i)}let r;const s=Fy(t);if(s&&s.getTime()>=Jf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Bc(wn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Bt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Bc(wn(n),t.status,n.weak_password.reasons);throw new yy(wn(n),t.status||500,r)}const qy=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function z(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[il]||(i[il]=Jf["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Yy(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Yy(t,e,n,r,s,i){const o=qy(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new ol(wn(l),0)}if(a.ok||await Yc(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Yc(l)}}function jt(t){var e;let n=null;Jy(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Py(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Kc(t){const e=jt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Kt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Ky(t){return{data:t,error:null}}function Gy(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Vy(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Qy(t){return t}function Jy(t){return t.access_token&&t.refresh_token&&t.expires_in}const Zo=["global","local","others"];var Xy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Zy{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=tp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Zo[0]){if(Zo.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zo.join(", ")}`);try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Kt})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Xy(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Gy,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(F(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Kt})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Qy});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(v.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(F(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Fn(e);try{return await z(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Kt})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Fn(e);try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Kt})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Fn(e);try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Kt})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Fn(e.userId);try{const{data:n,error:r}=await z(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(F(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Fn(e.userId),Fn(e.id);try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(F(n))return{data:null,error:n};throw n}}}function Gc(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function ew(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zn={debug:!!(globalThis&&ep()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class np extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tw extends np{}async function nw(t,e,n){zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),zn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new tw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(zn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}ew();const rw={url:fy,storageKey:py,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Qc(t,e,n){return await n()}const Bn={};class Cs{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Cs.nextInstanceID,Cs.nextInstanceID+=1,this.instanceID>0&&at()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},rw),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Zy({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=tp(s.fetch),this.lock=s.lock||Qc,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:at()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=nw:this.lock=Qc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:ep()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gc(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Gc(this.memoryStorage)),at()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Bn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Bn[this.storageKey]=Object.assign(Object.assign({},Bn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Bn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Bn[this.storageKey]=Object.assign(Object.assign({},Bn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Oy(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),at()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),_y(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return F(n)?{error:n}:{error:new Xf("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:jt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(F(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Un(this.storage,this.storageKey)),i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:v},xform:jt})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:jt})}else throw new ti("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(F(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Kc})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Kc})}else throw new ti("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ei}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(F(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,l,u,d,h,f,y;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:_,wallet:m,statement:p,options:g}=e;let x;if(at())if(typeof m=="object")x=m;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))x=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=m}const b=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const j=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),p?{statement:p}:null));let E;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")E=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)E=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)v=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),w=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${b.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${(s=(r=g==null?void 0:g.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const j=await x.signMessage(new TextEncoder().encode(v),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=j}}try{const{data:_,error:m}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Ny(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:jt});if(m)throw m;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new ei}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:m})}catch(_){if(F(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await mn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:jt});if(await Ft(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ei}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(F(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:jt}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ei}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(F(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Un(this.storage,this.storageKey));const{error:h}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ti("You must provide either an email or phone number.")}catch(a){if(F(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:jt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(F(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Un(this.storage,this.storageKey)),await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Ky})}catch(i){if(F(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Bt;const{error:s}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(F(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await z(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await z(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ti("You must provide either an email or phone number and a type")}catch(n){if(F(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await mn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Go:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await mn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Xo()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Kt}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bt}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Kt})})}catch(n){if(F(n))return xy(n)&&(await this._removeSession(),await Ft(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Bt;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Un(this.storage,this.storageKey));const{data:u,error:d}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Kt});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Jo(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(F(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Bt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(F(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!at())throw new ni("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ni(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new zc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ni("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new zc("No code detected.");const{data:p,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new ni("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const y=f-d;y*1e3<=Hn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:w,error:_}=await this._getUser(i);if(_)throw _;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(r){if(F(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await mn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(wy(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Ft(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Ty(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Un(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(F(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(F(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,d;const{data:h,error:f}=i;if(f)throw f;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return at()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(F(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(F(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Ay(async s=>(s>0&&await Ry(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:jt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Qo(i)&&Date.now()+o-r<Hn})}catch(r){if(this._debug(n,"error",r),F(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),at()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await mn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await mn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await qn(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Xo()}else if(s&&!s.user&&!s.user){const o=await mn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Ft(this.storage,this.storageKey+"-user"),await qn(this.storage,this.storageKey,s)):s.user=Xo()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Go;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Go}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Qo(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new mo;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Bt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),F(i)){const o={session:null,error:i};return Qo(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await qn(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=qc(s);await qn(this.storage,this.storageKey,i)}else{const s=qc(n);await qn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Ft(this.storage,this.storageKey),await Ft(this.storage,this.storageKey+"-code-verifier"),await Ft(this.storage,this.storageKey+"-user"),this.userStorage&&await Ft(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&at()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Hn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Hn}ms, refresh threshold is ${sl} ticks`),s<=sl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof np)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!at()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Un(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await z(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(F(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await z(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(F(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(F(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(F(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Jo(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+vy>s)return r;const{data:i,error:o}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:y,error:v}=await this.getSession();if(v||!y.session)return{data:null,error:v};r=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Jo(r);n!=null&&n.allowExpired||zy(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const d=By(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Cy(`${a}.${l}`)))throw new al("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}}}Cs.nextInstanceID=0;const sw=Cs;class iw extends sw{constructor(e){super(e)}}var ow=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class aw{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=dy(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:ry,realtime:iy,auth:Object.assign(Object.assign({},sy),{storageKey:u}),global:ny},h=hy(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=uy(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Sv(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Zv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new tv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return ow(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iw({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Fv(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lw=(t,e,n)=>new aw(t,e,n);function uw(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}uw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const cw="https://xgowjdlogoeebqmmreyt.supabase.co",dw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhnb3dqZGxvZ29lZWJxbW1yZXl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4NTY4NzMsImV4cCI6MjA3MjQzMjg3M30.hJLevsESQNJ3odCv6wAX4xT60s3HnYOLD4kWLhJHUOM",We=lw(cw,dw),Le={onedrive:{invoiceDirectory:"Invoices",excelFileName:"Invoice_Tracker.xlsx",excelFilePath:""},general:{defaultCategory:"Massage Therapy",autoExtractOCR:!0}},Hi=class Hi{static async getSettings(e){if(this.cachedSettings)return this.cachedSettings;try{const n=e==null?void 0:e.id;if(!n){const u=this.getLocalSettings();return this.cachedSettings=u,u}const r=We.from("user_settings").select("settings").eq("user_id",n).maybeSingle().then(u=>({result:u,timeout:!1})).catch(u=>({error:u,timeout:!1})),s=new Promise(u=>setTimeout(()=>u({timeout:!0}),15e3)),i=await Promise.race([r,s]);if(i.timeout){console.warn("Database query timed out, falling back to localStorage");const u=this.getLocalSettings();return this.cachedSettings=u,u}if(i.error){console.error("Error fetching settings from database:",i.error);const u=this.getLocalSettings();return this.cachedSettings=u,u}const{data:o,error:a}=i.result;if(a){console.error("Error fetching settings from database:",a);const u=this.getLocalSettings();return this.cachedSettings=u,u}if(o!=null&&o.settings){const u={...Le,...o.settings,onedrive:{...Le.onedrive,...o.settings.onedrive},general:{...Le.general,...o.settings.general}};return this.cachedSettings=u,u}const l=this.getLocalSettings();if(l!==Le){try{await this.saveSettings(l)}catch(u){console.warn("Settings migration failed:",u)}return l}return this.cachedSettings=Le,Le}catch(n){console.error("Error in getSettings:",n);const r=this.getLocalSettings();return this.cachedSettings=r,r}}static async saveSettings(e){try{const{MicrosoftService:n}=await Rn(async()=>{const{MicrosoftService:i}=await Promise.resolve().then(()=>Nc);return{MicrosoftService:i}},void 0),r=n.getCurrentUser();if(!r){this.saveLocalSettings(e);return}const{error:s}=await We.from("user_settings").upsert({user_id:r.id,settings:e},{onConflict:"user_id"});if(s)throw console.error("Error saving settings to database:",s),this.saveLocalSettings(e),new Error("Failed to save settings to database");this.cachedSettings=e,this.saveLocalSettings(e)}catch(n){throw console.error("Error in saveSettings:",n),this.saveLocalSettings(e),n}}static async resetSettings(){try{const{MicrosoftService:e}=await Rn(async()=>{const{MicrosoftService:r}=await Promise.resolve().then(()=>Nc);return{MicrosoftService:r}},void 0),n=e.getCurrentUser();if(n){const{error:r}=await We.from("user_settings").delete().eq("user_id",n.id);r&&console.error("Error deleting settings from database:",r)}this.cachedSettings=null,localStorage.removeItem(this.SETTINGS_KEY)}catch(e){console.error("Error in resetSettings:",e),localStorage.removeItem(this.SETTINGS_KEY)}}static async updateOneDriveSettings(e){const n=await this.getSettings(),r={...n,onedrive:{...n.onedrive,...e}};await this.saveSettings(r)}static async updateGeneralSettings(e){const n=await this.getSettings(),r={...n,general:{...n.general,...e}};await this.saveSettings(r)}static getLocalSettings(){try{const e=localStorage.getItem(this.SETTINGS_KEY);if(e){const n=JSON.parse(e);return{...Le,...n,onedrive:{...Le.onedrive,...n.onedrive},general:{...Le.general,...n.general}}}return Le}catch{return Le}}static saveLocalSettings(e){try{localStorage.setItem(this.SETTINGS_KEY,JSON.stringify(e))}catch(n){console.error("Failed to save settings to localStorage:",n)}}static clearCache(){this.cachedSettings=null}};Hi.SETTINGS_KEY="app_settings",Hi.cachedSettings=null;let an=Hi;const rp=k.createContext(void 0);function sp(){const t=k.useContext(rp);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function hw({children:t}){const[e,n]=k.useState(null),[r,s]=k.useState(!0),[i,o]=k.useState(!1);k.useEffect(()=>{(async()=>{if(console.log("AuthProvider: Checking authentication status..."),K.isAuthenticated()){console.log("AuthProvider: User is authenticated, fetching profile...");const d=K.getCurrentUser();if(d)console.log("AuthProvider: Profile found in cache:",d.displayName),n({id:d.id,displayName:d.displayName,email:d.mail,userPrincipalName:d.userPrincipalName}),o(!1);else try{console.log("AuthProvider: Fetching profile from Microsoft Graph...");const h=await K.fetchUserProfile();console.log("AuthProvider: Profile fetched successfully:",h.displayName),n({id:h.id,displayName:h.displayName,email:h.mail,userPrincipalName:h.userPrincipalName}),o(!1)}catch(h){console.error("Failed to fetch user profile:",h),n(null),o(!0)}}else console.log("AuthProvider: User not authenticated, showing auth modal"),n(null),o(!0);s(!1)})()},[]),k.useEffect(()=>{const u=async()=>{if(console.log("AuthProvider: Received auth success event, checking status..."),K.isAuthenticated())try{const f=await K.fetchUserProfile();console.log("AuthProvider: Setting user profile:",f.displayName),n({id:f.id,displayName:f.displayName,email:f.mail,userPrincipalName:f.userPrincipalName}),o(!1),an.clearCache();try{await an.getSettings({id:f.id})}catch(y){console.error("Failed to reload settings after login:",y)}}catch(f){console.error("Failed to handle auth success:",f),n(null),o(!0)}},d=()=>{!document.hidden&&!e&&K.isAuthenticated()&&(console.log("AuthProvider: Page became visible and user authenticated, updating state..."),u())};document.addEventListener("visibilitychange",d);const h=setInterval(()=>{!e&&K.isAuthenticated()&&(console.log("AuthProvider: Periodic check found authenticated user, updating state..."),u())},1e3);return()=>{document.removeEventListener("visibilitychange",d),clearInterval(h)}},[e]);const l={user:e,loading:r,signOut:async()=>{an.clearCache(),K.logout(),n(null),o(!0)}};return r?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):c.jsxs(rp.Provider,{value:l,children:[t,i&&c.jsx(G0,{isOpen:i,onClose:()=>o(!1)})]})}function fw({isOpen:t,onClose:e,title:n,children:r,type:s="info",showCloseButton:i=!0}){if(!t)return null;const o=()=>{switch(s){case"success":return c.jsx(yr,{className:"w-6 h-6 text-green-600"});case"warning":return c.jsx(Pf,{className:"w-6 h-6 text-amber-600"});case"error":return c.jsx(su,{className:"w-6 h-6 text-red-600"});default:return c.jsx(If,{className:"w-6 h-6 text-blue-600"})}},a=()=>{switch(s){case"success":return"bg-green-50 border-green-200";case"warning":return"bg-amber-50 border-amber-200";case"error":return"bg-red-50 border-red-200";default:return"bg-blue-50 border-blue-200"}};return c.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden animate-in fade-in duration-200",children:[c.jsx("div",{className:`p-6 border-b ${a()}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[o(),c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n}),i&&c.jsx("button",{onClick:e,className:"ml-auto p-1 hover:bg-white hover:bg-opacity-50 rounded-lg transition-colors",children:c.jsx(js,{className:"w-5 h-5 text-gray-500"})})]})}),c.jsx("div",{className:"p-6",children:r})]})})}function pw({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,confirmText:i="Confirm",cancelText:o="Cancel",type:a="warning",isLoading:l=!1}){const u=()=>{switch(a){case"error":return"bg-red-600 hover:bg-red-700";case"warning":return"bg-amber-600 hover:bg-amber-700";case"success":return"bg-green-600 hover:bg-green-700";default:return"bg-blue-600 hover:bg-blue-700"}};return c.jsx(fw,{isOpen:t,onClose:e,title:r,type:a,showCloseButton:!l,children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-600",children:s}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx("button",{onClick:e,disabled:l,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o}),c.jsxs("button",{onClick:n,disabled:l,className:`px-4 py-2 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 ${u()}`,children:[l&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),i]})]})]})})}function Cr({isOpen:t,onClose:e,title:n,message:r,type:s="info",buttonText:i="OK"}){const o=()=>{switch(s){case"error":return"bg-red-600 hover:bg-red-700";case"warning":return"bg-amber-600 hover:bg-amber-700";case"success":return"bg-green-600 hover:bg-green-700";default:return"bg-blue-600 hover:bg-blue-700"}},a=()=>{switch(s){case"error":return"from-red-500 to-red-600";case"warning":return"from-amber-500 to-amber-600";case"success":return"from-green-500 to-green-600";default:return"from-blue-500 to-blue-600"}},l=()=>{switch(s){case"error":return"bg-red-100";case"warning":return"bg-amber-100";case"success":return"bg-green-100";default:return"bg-blue-100"}};return t?c.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:`bg-gradient-to-r ${a()} px-6 py-8 text-center`,children:[c.jsxs("div",{className:`w-16 h-16 ${l()} rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg`,children:[s==="success"&&c.jsx(yr,{className:"w-8 h-8 text-green-600"}),s==="error"&&c.jsx(su,{className:"w-8 h-8 text-red-600"}),s==="warning"&&c.jsx(Pf,{className:"w-8 h-8 text-amber-600"}),s==="info"&&c.jsx(If,{className:"w-8 h-8 text-blue-600"})]}),c.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:n})]}),c.jsxs("div",{className:"px-6 py-6",children:[c.jsx("p",{className:"text-gray-700 text-center leading-relaxed mb-6 whitespace-pre-line",children:r}),c.jsx("div",{className:"flex justify-center",children:c.jsx("button",{onClick:e,className:`px-8 py-3 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl ${o()}`,children:i})})]})]})}):null}function gw(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),[s,i]=k.useState(!1);return{isOpen:t,config:n,isLoading:s,showConfirm:u=>{r(u),e(!0)},handleConfirm:async()=>{if(n){i(!0);try{await n.onConfirm(),e(!1)}catch(u){console.error("Confirm action failed:",u)}finally{i(!1)}}},handleClose:()=>{s||(e(!1),r(null))}}}function Nr(){const[t,e]=k.useState(!1),[n,r]=k.useState(null);return{isOpen:t,config:n,showAlert:o=>{r(o),e(!0)},handleClose:()=>{e(!1),r(null)}}}function mw(){var n,r,s,i;const t=p0(),e=Nr();return k.useEffect(()=>{(async()=>{console.log("AuthCallback: Starting callback handling"),console.log("Current URL:",window.location.href);const a=new URLSearchParams(window.location.search),l=a.get("code"),u=a.get("error"),d=a.get("error_description"),h=a.get("state");if(console.log("URL params:",{code:l?"present":"missing",state:h?"present":"missing",error:u,errorDescription:d}),u){console.error("Authentication error:",u,d),e.showAlert({title:"Authentication Failed",message:`Authentication failed: ${u}

${d||"Please try signing in again."}`,type:"error"}),setTimeout(()=>t("/"),3e3);return}if(l)try{console.log("Processing authorization code with PKCE..."),await K.handleAuthorizationCallback(l),console.log("Authentication successful!"),await K.fetchUserProfile(),console.log("User profile fetched successfully"),e.showAlert({title:"Welcome!",message:"Successfully signed in with Microsoft!",type:"success"}),setTimeout(()=>t("/"),1500)}catch(f){console.error("Authorization code processing failed:",f),e.showAlert({title:"Sign In Failed",message:`${f instanceof Error?f.message:"Unknown error"}. Please try signing in again.`,type:"error"}),setTimeout(()=>t("/"),3e3)}else console.log("No authorization code found, redirecting to home"),t("/")})()},[t,e]),c.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 font-medium",children:"Signing you in..."}),c.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we complete the authentication"})]}),c.jsx(Cr,{isOpen:e.isOpen,onClose:e.handleClose,title:((n=e.config)==null?void 0:n.title)||"",message:((r=e.config)==null?void 0:r.message)||"",type:(s=e.config)==null?void 0:s.type,buttonText:(i=e.config)==null?void 0:i.buttonText})]})}const ip=6048e5,vw=864e5,Jc=Symbol.for("constructDateFrom");function cn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Jc in t?t[Jc](e):t instanceof Date?new t.constructor(e):new Date(e)}function gt(t,e){return cn(e||t,t)}let yw={};function vo(){return yw}function Ns(t,e){var a,l,u,d;const n=vo(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=gt(t,e==null?void 0:e.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Vi(t,e){return Ns(t,{...e,weekStartsOn:1})}function op(t,e){const n=gt(t,e==null?void 0:e.in),r=n.getFullYear(),s=cn(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Vi(s),o=cn(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Vi(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Xc(t){const e=gt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ww(t,...e){const n=cn.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Zc(t,e){const n=gt(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function xw(t,e,n){const[r,s]=ww(n==null?void 0:n.in,t,e),i=Zc(r),o=Zc(s),a=+i-Xc(i),l=+o-Xc(o);return Math.round((a-l)/vw)}function _w(t,e){const n=op(t,e),r=cn(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Vi(r)}function kw(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Sw(t){return!(!kw(t)&&typeof t!="number"||isNaN(+gt(t)))}function bw(t,e){const n=gt(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Ew={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jw=(t,e,n)=>{let r;const s=Ew[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ea(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Cw={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Nw={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pw={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tw={date:ea({formats:Cw,defaultWidth:"full"}),time:ea({formats:Nw,defaultWidth:"full"}),dateTime:ea({formats:Pw,defaultWidth:"full"})},Ow={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Iw=(t,e,n,r)=>Ow[t];function zr(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Rw={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Aw={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Lw={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$w={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Dw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Mw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Uw=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Fw={ordinalNumber:Uw,era:zr({values:Rw,defaultWidth:"wide"}),quarter:zr({values:Aw,defaultWidth:"wide",argumentCallback:t=>t-1}),month:zr({values:Lw,defaultWidth:"wide"}),day:zr({values:$w,defaultWidth:"wide"}),dayPeriod:zr({values:Dw,defaultWidth:"wide",formattingValues:Mw,defaultFormattingWidth:"wide"})};function Br(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Bw(a,h=>h.test(o)):zw(a,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function zw(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Bw(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Ww(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const Vw=/^(\d+)(th|st|nd|rd)?/i,Hw=/\d+/i,qw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Yw={any:[/^b/i,/^(a|c)/i]},Kw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Gw={any:[/1/i,/2/i,/3/i,/4/i]},Qw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Jw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Xw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Zw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ex={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tx={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nx={ordinalNumber:Ww({matchPattern:Vw,parsePattern:Hw,valueCallback:t=>parseInt(t,10)}),era:Br({matchPatterns:qw,defaultMatchWidth:"wide",parsePatterns:Yw,defaultParseWidth:"any"}),quarter:Br({matchPatterns:Kw,defaultMatchWidth:"wide",parsePatterns:Gw,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Br({matchPatterns:Qw,defaultMatchWidth:"wide",parsePatterns:Jw,defaultParseWidth:"any"}),day:Br({matchPatterns:Xw,defaultMatchWidth:"wide",parsePatterns:Zw,defaultParseWidth:"any"}),dayPeriod:Br({matchPatterns:ex,defaultMatchWidth:"any",parsePatterns:tx,defaultParseWidth:"any"})},rx={code:"en-US",formatDistance:jw,formatLong:Tw,formatRelative:Iw,localize:Fw,match:nx,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sx(t,e){const n=gt(t,e==null?void 0:e.in);return xw(n,bw(n))+1}function ix(t,e){const n=gt(t,e==null?void 0:e.in),r=+Vi(n)-+_w(n);return Math.round(r/ip)+1}function ap(t,e){var d,h,f,y;const n=gt(t,e==null?void 0:e.in),r=n.getFullYear(),s=vo(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((y=(f=s.locale)==null?void 0:f.options)==null?void 0:y.firstWeekContainsDate)??1,o=cn((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=Ns(o,e),l=cn((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=Ns(l,e);return+n>=+a?r+1:+n>=+u?r:r-1}function ox(t,e){var a,l,u,d;const n=vo(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=ap(t,e),i=cn((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Ns(i,e)}function ax(t,e){const n=gt(t,e==null?void 0:e.in),r=+Ns(n,e)-+ox(n,e);return Math.round(r/ip)+1}function G(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const zt={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return G(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):G(n+1,2)},d(t,e){return G(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return G(t.getHours()%12||12,e.length)},H(t,e){return G(t.getHours(),e.length)},m(t,e){return G(t.getMinutes(),e.length)},s(t,e){return G(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return G(s,e.length)}},Wn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ed={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return zt.y(t,e)},Y:function(t,e,n,r){const s=ap(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return G(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):G(i,e.length)},R:function(t,e){const n=op(t);return G(n,e.length)},u:function(t,e){const n=t.getFullYear();return G(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return G(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return G(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return zt.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return G(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=ax(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):G(s,e.length)},I:function(t,e,n){const r=ix(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):G(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):zt.d(t,e)},D:function(t,e,n){const r=sx(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):G(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return G(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return G(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return G(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Wn.noon:r===0?s=Wn.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Wn.evening:r>=12?s=Wn.afternoon:r>=4?s=Wn.morning:s=Wn.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return zt.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):zt.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):G(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):G(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):zt.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):zt.s(t,e)},S:function(t,e){return zt.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return nd(r);case"XXXX":case"XX":return xn(r);case"XXXXX":case"XXX":default:return xn(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return nd(r);case"xxxx":case"xx":return xn(r);case"xxxxx":case"xxx":default:return xn(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+td(r,":");case"OOOO":default:return"GMT"+xn(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+td(r,":");case"zzzz":default:return"GMT"+xn(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return G(r,e.length)},T:function(t,e,n){return G(+t,e.length)}};function td(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+G(i,2)}function nd(t,e){return t%60===0?(t>0?"-":"+")+G(Math.abs(t)/60,2):xn(t,e)}function xn(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=G(Math.trunc(r/60),2),i=G(r%60,2);return n+s+e+i}const rd=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},lp=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},lx=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return rd(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",rd(r,e)).replace("{{time}}",lp(s,e))},ux={p:lp,P:lx},cx=/^D+$/,dx=/^Y+$/,hx=["D","DD","YY","YYYY"];function fx(t){return cx.test(t)}function px(t){return dx.test(t)}function gx(t,e,n){const r=mx(t,e,n);if(console.warn(r),hx.includes(t))throw new RangeError(r)}function mx(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const vx=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yx=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,wx=/^'([^]*?)'?$/,xx=/''/g,_x=/[a-zA-Z]/;function kx(t,e,n){var d,h,f,y;const r=vo(),s=r.locale??rx,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((y=(f=r.locale)==null?void 0:f.options)==null?void 0:y.weekStartsOn)??0,a=gt(t,n==null?void 0:n.in);if(!Sw(a))throw new RangeError("Invalid time value");let l=e.match(yx).map(v=>{const w=v[0];if(w==="p"||w==="P"){const _=ux[w];return _(v,s.formatLong)}return v}).join("").match(vx).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const w=v[0];if(w==="'")return{isToken:!1,value:Sx(v)};if(ed[w])return{isToken:!0,value:v};if(w.match(_x))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(v=>{if(!v.isToken)return v.value;const w=v.value;(px(w)||fx(w))&&gx(w,e,String(t));const _=ed[w[0]];return _(a,w,s.localize,u)}).join("")}function Sx(t){const e=t.match(wx);return e?e[1].replace(xx,"'"):t}const cu=class cu{static async createInvoice(e,n){try{let r="",s="image";e.file&&(r=(await this.uploadFile(e.file)).url,s=e.file.type.includes("pdf")?"pdf":"image");const{data:i,error:o}=await We.from("invoices").insert([{user_id:n,customer_name:e.customer_name,invoice_date:e.invoice_date,invoice_amount:parseFloat(e.invoice_amount),description_category:e.description_category,description_other:e.description_other,file_url:r,file_type:s}]).select().single();if(o)throw new Error(`Failed to create invoice: ${o.message}`);return i}catch(r){throw console.error("Error creating invoice:",r),r}}static async getInvoices(e){try{console.log("Fetching invoices from Supabase..."),console.time("query");const{data:n,error:r}=await We.from("invoices").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(console.timeEnd("query"),r)throw console.error("Supabase query error:",r),new Error(`Failed to fetch invoices: ${r.message}`);return console.log("Successfully fetched invoices:",(n==null?void 0:n.length)||0),n||[]}catch(n){throw console.error("Error fetching invoices:",n),n}}static async updateInvoice(e,n){}static async updateInvoice(e,n,r){try{const{data:s,error:i}=await We.from("invoices").select("*").eq("id",e).eq("user_id",r).single();if(i)throw new Error(`Failed to fetch existing invoice: ${i.message}`);let o=s.file_url,a=s.file_type;n.file&&(s.file_url&&await this.deleteFile(s.file_url),o=(await this.uploadFile(n.file)).url,a=n.file.type.includes("pdf")?"pdf":"image");const{data:l,error:u}=await We.from("invoices").update({customer_name:n.customer_name,invoice_date:n.invoice_date,invoice_amount:parseFloat(n.invoice_amount),description_category:n.description_category,description_other:n.description_other,file_url:o,file_type:a}).eq("id",e).eq("user_id",r).select().single();if(u)throw new Error(`Failed to update invoice: ${u.message}`);return l}catch(s){throw console.error("Error updating invoice:",s),s}}static async deleteInvoice(e){}static async deleteInvoice(e,n){try{const{data:r,error:s}=await We.from("invoices").select("file_url").eq("id",e).eq("user_id",n).single();s&&console.warn("Could not fetch invoice for file cleanup:",s.message),r!=null&&r.file_url&&await this.deleteFile(r.file_url);const{error:i}=await We.from("invoices").delete().eq("id",e).eq("user_id",n);if(i)throw new Error(`Failed to delete invoice: ${i.message}`)}catch(r){throw console.error("Error deleting invoice:",r),r}}static async updateInvoiceOneDriveStatus(e,n){try{const{data:r,error:s}=await We.from("invoices").update(n).eq("id",e).select().single();if(s)throw new Error(`Failed to update OneDrive status: ${s.message}`);return r}catch(r){throw console.error("Error updating OneDrive status:",r),r}}static async uploadFile(e){try{const n=e.name.split(".").pop(),s=`invoices/${`${Date.now()}_${Math.random().toString(36).substring(2)}.${n}`}`,{data:i,error:o}=await We.storage.from(this.BUCKET_NAME).upload(s,e,{cacheControl:"3600",upsert:!1});if(o)throw new Error(`File upload failed: ${o.message}`);const{data:a}=We.storage.from(this.BUCKET_NAME).getPublicUrl(i.path);return{url:a.publicUrl}}catch(n){throw console.error("Error uploading file:",n),n}}static async deleteFile(e){try{const s=new URL(e).pathname.split("/").slice(-2).join("/"),{error:i}=await We.storage.from(this.BUCKET_NAME).remove([s]);i&&console.warn("Failed to delete file from storage:",i.message)}catch(n){console.warn("Error deleting file:",n)}}static getFileUrl(e){return e}};cu.BUCKET_NAME="invoices";let Pt=cu;class tt{static async createInvoice(e,n){return Pt.createInvoice(e,n)}static async getInvoices(e){return Pt.getInvoices(e)}static async deleteInvoice(e,n){const s=(await this.getInvoices(n)).find(i=>i.id===e);if(s){if(s.onedrive_uploaded&&s.onedrive_file_url)try{console.log("Deleting invoice from OneDrive:",s.onedrive_file_url);const i=await K.deleteFileFromOneDrive(s.onedrive_file_url);i.success||console.warn("OneDrive deletion failed:",i.error)}catch(i){console.error("OneDrive deletion error:",i)}if(s.excel_synced)try{console.log("Removing invoice from Excel");const i=await K.removeFromExcel(s);i.success||console.warn("Excel row deletion failed:",i.error)}catch(i){console.error("Excel deletion error:",i)}}return Pt.deleteInvoice(e,n)}static async updateInvoice(e,n,r){return Pt.updateInvoice(e,n,r)}static getFileUrl(e){return Pt.getFileUrl(e)}static async deleteFile(e){return Promise.resolve()}static async uploadToOneDrive(e){try{const n=await this.getFileBlob(e.file_url);if(!n)return{success:!1,error:"Invoice file not found"};const r=await K.uploadInvoiceToOneDrive(e,n);return r.success&&await Pt.updateInvoiceOneDriveStatus(e.id,{onedrive_uploaded:!0,onedrive_file_url:r.fileUrl,excel_synced:!0}),r}catch(n){return console.error("OneDrive upload failed:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async getFileBlob(e){try{const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch file: ${n.statusText}`);return await n.blob()}catch(n){return console.error("Error fetching file blob:",n),null}}static async resyncToExcel(e){try{if(!e.onedrive_uploaded||!e.onedrive_file_url)return{success:!1,error:"Invoice must be uploaded to OneDrive first"};console.log("Resyncing invoice to Excel:",e.id);try{await K.updateInExcel({...e,onedrive_file_url:e.onedrive_file_url}),console.log("Excel resync successful")}catch(n){if(console.error("Excel resync failed:",n),n instanceof Error&&n.message.includes("not found in Excel"))console.log("Row not found in Excel, appending instead"),await K.appendToExcel({...e,onedrive_file_url:e.onedrive_file_url});else throw n}return await Pt.updateInvoiceOneDriveStatus(e.id,{onedrive_uploaded:!0,onedrive_file_url:e.onedrive_file_url,excel_synced:!0}),{success:!0,fileUrl:e.onedrive_file_url}}catch(n){return console.error("Excel resync failed:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}}function bx({invoice:t,onEdit:e,onDelete:n,onInvoiceUpdate:r}){var b,j,E,P;const[s,i]=Vn.useState(!1),[o,a]=Vn.useState(!1),[l,u]=Vn.useState(K.isAuthenticated()),[d,h]=Vn.useState(null),f=Nr(),y=Vn.useMemo(()=>{try{const[U,N,L]=t.invoice_date.split("-").map(Number),W=new Date(U,N-1,L);return kx(W,"MMM dd, yyyy")}catch(U){return console.error("Date formatting error:",U,"Date value:",t.invoice_date),t.invoice_date}},[t.invoice_date]),v=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.invoice_amount),w=()=>t.description_category==="Other"?t.description_other:t.description_category,_=()=>{const U={"Massage Therapy":"bg-purple-100 text-purple-800","Physio Therapy":"bg-blue-100 text-blue-800",Dentist:"bg-green-100 text-green-800","Prescription Medication":"bg-red-100 text-red-800",Vision:"bg-orange-100 text-orange-800",Other:"bg-gray-100 text-gray-800"};return U[t.description_category]||U.Other},m=async U=>{U.stopPropagation(),console.log("OneDrive upload clicked for invoice:",t.id),console.log("Microsoft service authenticated:",K.isAuthenticated()),i(!0),h(null);try{const N=await tt.uploadToOneDrive(t);if(console.log("Upload result:",N),N.success){const W=(await tt.getInvoices()).find(ue=>ue.id===t.id);W&&r&&r(W)}else console.error("Upload failed:",N.error),h(N.error||"Upload failed"),f.showAlert({title:"Upload Failed",message:N.error||"Failed to upload to OneDrive. Please try again.",type:"error"})}catch(N){console.error("Upload error:",N),h("Upload failed. Please try again."),f.showAlert({title:"Upload Error",message:"Upload failed. Please try again.",type:"error"})}finally{i(!1)}},p=async U=>{U.stopPropagation(),a(!0),h(null);try{const N=await tt.resyncToExcel(t);if(N.success){const W=(await tt.getInvoices()).find(ue=>ue.id===t.id);W&&r&&r(W)}else h(N.error||"Resync failed"),f.showAlert({title:"Resync Failed",message:N.error||"Failed to resync to Excel. Please try again.",type:"error"})}catch{h("Resync failed. Please try again."),f.showAlert({title:"Resync Error",message:"Resync failed. Please try again.",type:"error"})}finally{a(!1)}},x=t.onedrive_uploaded?{icon:yr,color:"text-green-600",bgColor:"bg-green-50",title:"Uploaded to OneDrive and synced to Excel",text:"Synced"}:null;return c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>e(t),children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:t.customer_name}),c.jsx("p",{className:"text-sm text-gray-500",children:y}),x&&c.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium mt-2 ${x.bgColor} ${x.color}`,children:[c.jsx(x.icon,{className:"w-3 h-3"}),x.text]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-xl font-bold text-gray-900",children:v}),c.jsxs("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:[!t.onedrive_uploaded&&c.jsx("button",{onClick:m,disabled:s||!l,className:`p-2 rounded-lg transition-colors ${s||!l?"text-gray-400 bg-gray-50 cursor-not-allowed":"text-blue-500 hover:bg-blue-50"}`,title:l?s?"Uploading to OneDrive...":"Upload to OneDrive":"Please connect to Microsoft OneDrive first",children:s?c.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):c.jsx(Of,{className:"w-4 h-4"})}),t.onedrive_uploaded&&c.jsx("button",{onClick:p,disabled:o||!l,className:`p-2 rounded-lg transition-colors ${o||!l?"text-gray-400 bg-gray-50 cursor-not-allowed":"text-emerald-500 hover:bg-emerald-50"}`,title:l?o?"Resyncing to Excel...":"Resync to Excel":"Please connect to Microsoft OneDrive first",children:o?c.jsx("div",{className:"w-4 h-4 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"}):c.jsx(z0,{className:"w-4 h-4"})}),c.jsx("button",{onClick:U=>{U.stopPropagation(),e(t)},className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit invoice",children:c.jsx(F0,{className:"w-4 h-4"})}),c.jsx("button",{onClick:U=>{U.stopPropagation(),n(t.id)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete invoice",children:c.jsx(V0,{className:"w-4 h-4"})})]}),(d||o)&&c.jsx("p",{className:"text-xs text-red-600 mt-1 max-w-32 text-right",children:d})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${_()}`,children:w()}),c.jsx("div",{className:"flex items-center gap-2",children:t.file_type==="pdf"?c.jsx(zi,{className:"w-4 h-4 text-red-600"}):c.jsx(U0,{className:"w-4 h-4 text-blue-600"})})]})]}),c.jsx(Cr,{isOpen:f.isOpen,onClose:f.handleClose,title:((b=f.config)==null?void 0:b.title)||"",message:((j=f.config)==null?void 0:j.message)||"",type:(E=f.config)==null?void 0:E.type,buttonText:(P=f.config)==null?void 0:P.buttonText})]})}function Ex({onAddInvoice:t,onEditInvoice:e,onShowSettings:n}){var se,bt,Qe,Et,Be,vt,Pr,I;const{signOut:r,user:s}=sp(),[i,o]=k.useState([]),[a,l]=k.useState([]),[u,d]=k.useState({}),[h,f]=k.useState(new Set),[y,v]=k.useState(new Set),[w,_]=k.useState(""),[m,p]=k.useState("All"),[g,x]=k.useState(!0),[b,j]=k.useState(new Set),E=gw(),P=Nr();k.useEffect(()=>{s&&U()},[s]),k.useEffect(()=>{const S=()=>{U()};return window.addEventListener("invoiceUpdated",S),()=>window.removeEventListener("invoiceUpdated",S)},[]),k.useEffect(()=>{const S=setTimeout(()=>{g&&(console.warn("Loading invoices timed out, setting loading to false"),x(!1))},1e4);return()=>clearTimeout(S)},[g]),k.useEffect(()=>{s||(o([]),l([]),d({}),_(""),p("All"))},[s]),k.useEffect(()=>{N()},[i,w,m]),k.useEffect(()=>{L()},[a]);const U=async()=>{if(!s){console.log("No user available, skipping invoice load"),x(!1);return}x(!0);try{console.log("Starting to load invoices...");const S=await tt.getInvoices(s.id);console.log("Loaded invoices:",S.length),o(S)}catch(S){console.error("Error loading invoices:",S),P.showAlert({title:"Loading Failed",message:"Failed to load invoices. Please try refreshing the page.",type:"error"}),o([])}finally{x(!1)}},N=()=>{let S=i;w&&(S=S.filter($=>$.customer_name.toLowerCase().includes(w.toLowerCase()))),m!=="All"&&(S=S.filter($=>$.description_category===m)),l(S)},L=()=>{const S={};a.forEach(V=>{try{const[de,ye]=V.invoice_date.split("-"),Pe=de,Je=`${de}-${ye}`;S[Pe]||(S[Pe]={}),S[Pe][Je]||(S[Pe][Je]=[]),S[Pe][Je].push(V)}catch{console.error("Error parsing date for invoice:",V.id,V.invoice_date)}});const $={};Object.keys(S).sort((V,de)=>parseInt(de)-parseInt(V)).forEach(V=>{$[V]={},Object.keys(S[V]).sort((de,ye)=>de.localeCompare(ye)).forEach(de=>{$[V][de]=S[V][de].sort((ye,Pe)=>Pe.invoice_date.localeCompare(ye.invoice_date))})}),d($);const R=new Date().getFullYear().toString(),X=new Date().toISOString().slice(0,7);$[R]&&(f(V=>new Set([...V,R])),$[R][X]&&v(V=>new Set([...V,X])))},W=S=>{f($=>{const R=new Set($);return R.has(S)?(R.delete(S),Object.keys(u[S]||{}).forEach(X=>{v(V=>{const de=new Set(V);return de.delete(X),de})})):R.add(S),R})},ue=S=>{v($=>{const R=new Set($);return R.has(S)?R.delete(S):R.add(S),R})},mt=S=>{const[$,R]=S.split("-");return new Date(parseInt($),parseInt(R)-1).toLocaleDateString("en-US",{month:"short"})},A=S=>S.reduce(($,R)=>$+R.invoice_amount,0),q=S=>Object.values(S).flat().reduce(($,R)=>$+R.invoice_amount,0),be=async S=>{const $=i.find(R=>R.id===S);E.showConfirm({title:"Delete Invoice",message:`Are you sure you want to delete the invoice for ${($==null?void 0:$.customer_name)||"this customer"}? This action cannot be undone.`,confirmText:"Delete",type:"error",onConfirm:async()=>{try{$!=null&&$.file_url&&await tt.deleteFile($.file_url),await tt.deleteInvoice(S,s.id),o(R=>R.filter(X=>X.id!==S))}catch(R){console.error("Error deleting invoice:",R),P.showAlert({title:"Delete Failed",message:"Failed to delete the invoice. Please try again.",type:"error"})}}})},T=S=>{o($=>$.map(R=>R.id===S.id?S:R)),l($=>$.map(R=>R.id===S.id?S:R))},D=async(S,$)=>{const R=$.filter(X=>!X.onedrive_uploaded);if(R.length===0){P.showAlert({title:"Already Synced",message:"All invoices in this month are already synced to OneDrive.",type:"info"});return}E.showConfirm({title:"Sync to OneDrive",message:`Sync ${R.length} unsynced invoices from ${mt(S)} to OneDrive and Excel?`,confirmText:"Sync All",type:"info",onConfirm:async()=>{j(ye=>new Set([...ye,S]));let X=0,V=0;const de=[];try{for(const Pe of R){try{const Je=await tt.uploadToOneDrive(Pe);Je.success?(X++,o(up=>up.map(yo=>yo.id===Pe.id?{...yo,onedrive_uploaded:!0,onedrive_file_url:Je.fileUrl,excel_synced:!0}:yo))):(V++,de.push(`${Pe.customer_name}: ${Je.error}`))}catch(Je){V++,de.push(`${Pe.customer_name}: ${Je instanceof Error?Je.message:"Unknown error"}`)}await new Promise(Je=>setTimeout(Je,500))}let ye=`Successfully synced: ${X} invoices`;V>0&&(ye+=`
Failed to sync: ${V} invoices`,de.length>0&&(ye+=`

Errors:
${de.slice(0,3).join(`
`)}`,de.length>3&&(ye+=`
... and ${de.length-3} more errors`))),P.showAlert({title:"Sync Complete",message:ye,type:V>0?"warning":"success"})}catch(ye){console.error("Batch sync error:",ye),P.showAlert({title:"Sync Failed",message:`Batch sync failed: ${ye instanceof Error?ye.message:"Unknown error"}`,type:"error"})}finally{j(ye=>{const Pe=new Set(ye);return Pe.delete(S),Pe})}}})},M=()=>a.reduce((S,$)=>S+$.invoice_amount,0),J=["All","Massage Therapy","Physio Therapy","Dentist","Prescription Medication","Vision","Other"];return g?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading invoices..."})]})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoice Manager"}),c.jsxs("p",{className:"text-gray-600 mt-1",children:[a.length," invoices  Total: ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(M())]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:n,className:"p-3 text-gray-600 hover:bg-gray-100 rounded-xl transition-colors",title:"Settings",children:c.jsx(Qa,{className:"w-6 h-6"})}),c.jsx("button",{onClick:r,className:"px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Sign Out",children:"Sign Out"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(W0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Search by customer name...",value:w,onChange:S=>_(S.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(D0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("select",{value:m,onChange:S=>p(S.target.value),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white",children:J.map(S=>c.jsx("option",{value:S,children:S},S))})]})]})]})}),c.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:a.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(zi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:w||m!=="All"?"No matching invoices":"No invoices yet"}),c.jsx("p",{className:"text-gray-500 mb-6",children:w||m!=="All"?"Try adjusting your search or filter criteria.":"Get started by adding your first invoice."}),!w&&m==="All"&&c.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium",children:[c.jsx(Ic,{className:"w-5 h-5"}),"Add Your First Invoice"]})]}):c.jsx("div",{className:"space-y-6",children:Object.entries(u).map(([S,$])=>c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[c.jsxs("button",{onClick:()=>W(S),className:"w-full flex items-center justify-between p-6 hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[h.has(S)?c.jsx(Tc,{className:"w-5 h-5 text-gray-500"}):c.jsx(Fi,{className:"w-5 h-5 text-gray-500"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx($0,{className:"w-6 h-6 text-blue-600"}),c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:S})]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-right",children:[c.jsx("span",{className:"text-xl font-bold text-green-600",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(q($))}),c.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",Object.values($).flat().length,")"]})]})]}),h.has(S)&&c.jsx("div",{className:"border-t",children:Object.entries($).map(([R,X])=>c.jsxs("div",{className:"border-b last:border-b-0",children:[c.jsxs("button",{onClick:()=>ue(R),className:"w-full flex items-center justify-between p-4 pl-16 hover:bg-gray-50 transition-colors group",children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[y.has(R)?c.jsx(Tc,{className:"w-4 h-4 text-gray-400"}):c.jsx(Fi,{className:"w-4 h-4 text-gray-400"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate",children:mt(R)}),X.every(V=>V.onedrive_uploaded)&&c.jsxs("div",{className:"hidden sm:flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[c.jsx(yr,{className:"w-3 h-3"}),"All Synced"]})]}),c.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-shrink-0",children:[X.some(V=>!V.onedrive_uploaded)&&c.jsx("button",{onClick:V=>{V.stopPropagation(),D(R,X)},disabled:b.has(R),className:`flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 rounded-lg text-xs sm:text-sm font-medium transition-colors ${b.has(R)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,title:`Sync all unsynced invoices in ${mt(R)}`,children:b.has(R)?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-3 h-3 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"hidden sm:inline",children:"Syncing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Of,{className:"w-3 h-3"}),c.jsx("span",{className:"hidden sm:inline",children:"Sync All"}),c.jsx("span",{className:"sm:hidden",children:"Sync"}),c.jsxs("span",{children:["(",X.filter(V=>!V.onedrive_uploaded).length,")"]})]})}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("span",{className:"text-sm sm:text-lg font-bold text-blue-600",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(A(X))}),c.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 ml-1",children:["(",X.length,")"]})]})]})]}),y.has(R)&&c.jsx("div",{className:"p-4 pl-16 bg-gray-50",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:X.map(V=>c.jsx(bx,{invoice:V,onEdit:e,onDelete:be,onInvoiceUpdate:T},V.id))})})]},R))})]},S))})}),c.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-10",children:c.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:c.jsx("div",{className:"flex items-center justify-center",children:c.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-8 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium shadow-sm",children:[c.jsx(Ic,{className:"w-5 h-5"}),"Add Invoice"]})})})}),c.jsx("div",{className:"h-20"}),c.jsx(pw,{isOpen:E.isOpen,onClose:E.handleClose,onConfirm:E.handleConfirm,title:((se=E.config)==null?void 0:se.title)||"",message:((bt=E.config)==null?void 0:bt.message)||"",confirmText:(Qe=E.config)==null?void 0:Qe.confirmText,cancelText:(Et=E.config)==null?void 0:Et.cancelText,type:(Be=E.config)==null?void 0:Be.type,isLoading:E.isLoading}),c.jsx(Cr,{isOpen:P.isOpen,onClose:P.handleClose,title:((vt=P.config)==null?void 0:vt.title)||"",message:((Pr=P.config)==null?void 0:Pr.message)||"",type:(I=P.config)==null?void 0:I.type})]})}function jx({src:t,alt:e,isPdf:n=!1,isOpen:r,onClose:s}){const[i,o]=k.useState(1),[a,l]=k.useState({x:0,y:0}),[u,d]=k.useState(!1),[h,f]=k.useState({x:0,y:0}),[y,v]=k.useState(0),[w,_]=k.useState({x:0,y:0}),[m,p]=k.useState(!1);k.useEffect(()=>(r?(document.body.style.overflow="hidden",o(1),l({x:0,y:0})):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),k.useEffect(()=>{const A=q=>{r&&(q.key==="Escape"?s():q.key==="+"||q.key==="="?g():q.key==="-"?x():q.key==="0"&&b())};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[r]);const g=()=>{o(A=>Math.min(A*1.2,5))},x=()=>{o(A=>Math.max(A/1.2,.1))},b=()=>{o(1),l({x:0,y:0})},j=A=>{if(A.length<2)return 0;const q=A[0],be=A[1];return Math.sqrt(Math.pow(be.clientX-q.clientX,2)+Math.pow(be.clientY-q.clientY,2))},E=A=>A.length===1?{x:A[0].clientX,y:A[0].clientY}:A.length>=2?{x:(A[0].clientX+A[1].clientX)/2,y:(A[0].clientY+A[1].clientY)/2}:{x:0,y:0},P=A=>{if(A.preventDefault(),A.touches.length===2)p(!0),d(!1),v(j(A.touches)),_(E(A.touches));else if(A.touches.length===1&&i>1){p(!1),d(!0);const q=A.touches[0];f({x:q.clientX-a.x,y:q.clientY-a.y})}},U=A=>{if(A.preventDefault(),A.touches.length===2&&m){const q=j(A.touches),be=E(A.touches);if(y>0){const T=q/y,D=Math.min(Math.max(i*T,.1),5);o(D);const M={x:be.x-w.x,y:be.y-w.y};l(J=>({x:J.x+M.x,y:J.y+M.y}))}v(q),_(be)}else if(A.touches.length===1&&u&&i>1){const q=A.touches[0];l({x:q.clientX-h.x,y:q.clientY-h.y})}},N=A=>{if(A.preventDefault(),A.touches.length===0)d(!1),p(!1),v(0);else if(A.touches.length===1&&m&&(p(!1),i>1)){d(!0);const q=A.touches[0];f({x:q.clientX-a.x,y:q.clientY-a.y})}},L=A=>{i>1&&(d(!0),f({x:A.clientX-a.x,y:A.clientY-a.y}))},W=A=>{u&&i>1&&l({x:A.clientX-h.x,y:A.clientY-h.y})},ue=()=>{d(!1)},mt=A=>{A.preventDefault();const q=A.deltaY>0?.9:1.1;o(be=>Math.min(Math.max(be*q,.1),5))};return r?c.jsxs("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center",children:[c.jsxs("div",{className:"absolute top-4 left-4 right-4 flex items-center justify-between z-10",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:g,className:"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-colors",title:"Zoom In (+)",children:c.jsx(Y0,{className:"w-5 h-5"})}),c.jsx("button",{onClick:x,className:"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-colors",title:"Zoom Out (-)",children:c.jsx(K0,{className:"w-5 h-5"})}),c.jsx("button",{onClick:b,className:"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-colors",title:"Reset (0)",children:c.jsx(B0,{className:"w-5 h-5"})}),c.jsxs("span",{className:"text-white text-sm bg-white bg-opacity-20 px-3 py-2 rounded-lg",children:[Math.round(i*100),"%"]})]}),c.jsx("button",{onClick:s,className:"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-colors",title:"Close (Esc)",children:c.jsx(js,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden cursor-move",onMouseDown:L,onMouseMove:W,onMouseUp:ue,onMouseLeave:ue,onWheel:mt,onTouchStart:P,onTouchMove:U,onTouchEnd:N,style:{cursor:n?"default":i>1?u?"grabbing":"grab":"default"},children:n?c.jsx("iframe",{src:t,title:e,className:"w-full h-full border-0"}):c.jsx("img",{src:t,alt:e,className:"max-w-none transition-transform duration-200 select-none",style:{transform:`scale(${i}) translate(${a.x/i}px, ${a.y/i}px)`},draggable:!1})}),c.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white text-sm bg-white bg-opacity-20 px-4 py-2 rounded-lg",children:n?"Use browser PDF controls  Press Esc to close":"Pinch to zoom  Drag to pan  Press Esc to close"})]}):null}function Cx({onFileSelect:t,selectedFile:e,onClearFile:n,existingFileUrl:r}){const s=k.useRef(null),i=k.useRef(null),[o,a]=k.useState(""),[l,u]=k.useState(!1),[d,h]=k.useState(!1);k.useEffect(()=>{(async()=>{if(console.log("--- loadPreview ---"),console.log("selectedFile:",e),console.log("existingFileUrl:",r),e)if(u(e.type.includes("pdf")),e.type.startsWith("image/")){const w=new FileReader;w.onload=_=>{var m,p;a((m=_.target)==null?void 0:m.result),console.log("Preview URL for selected file (image):",(p=_.target)==null?void 0:p.result)},w.readAsDataURL(e)}else{const w=URL.createObjectURL(e);a(w),console.log("Preview URL for selected file (pdf):",w)}else r?(a(r),console.log("Using existing file URL:",r),u(r.toLowerCase().includes(".pdf"))):(a(""),u(!1))})()},[e,r]);const f=v=>{console.log("handleFileSelect file:",v),t(v)},y=()=>{console.log("handleClearFile called"),n(),a(""),u(!1),s.current&&(s.current.value=""),i.current&&(i.current.value="")};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("button",{type:"button",onClick:()=>{var v;return(v=i.current)==null?void 0:v.click()},className:"flex items-center justify-center gap-3 p-6 border-2 border-dashed border-blue-300 rounded-xl hover:border-blue-400 hover:bg-blue-50 transition-all duration-200",children:[c.jsx(Pc,{className:"w-6 h-6 text-blue-600"}),c.jsx("span",{className:"text-blue-600 font-medium",children:"Take Photo"})]}),c.jsxs("button",{type:"button",onClick:()=>{var v;return(v=s.current)==null?void 0:v.click()},className:"flex items-center justify-center gap-3 p-6 border-2 border-dashed border-emerald-300 rounded-xl hover:border-emerald-400 hover:bg-emerald-50 transition-all duration-200",children:[c.jsx(H0,{className:"w-6 h-6 text-emerald-600"}),c.jsx("span",{className:"text-emerald-600 font-medium",children:"Upload File"})]})]}),c.jsx("input",{ref:i,type:"file",accept:"image/*",capture:"environment",onChange:v=>{var w;return((w=v.target.files)==null?void 0:w[0])&&f(v.target.files[0])},className:"hidden"}),c.jsx("input",{ref:s,type:"file",accept:"image/*,.pdf",onChange:v=>{var w;return((w=v.target.files)==null?void 0:w[0])&&f(v.target.files[0])},className:"hidden"}),(e||r)&&c.jsxs("div",{className:"relative bg-gray-50 rounded-xl p-4 border",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[l?c.jsx(zi,{className:"w-5 h-5 text-red-600"}):c.jsx(Pc,{className:"w-5 h-5 text-blue-600"}),c.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:(e==null?void 0:e.name)||"Current invoice file"})]}),c.jsx("button",{type:"button",onClick:y,className:"p-1 hover:bg-gray-200 rounded transition-colors",children:c.jsx(js,{className:"w-4 h-4 text-gray-500"})})]}),o&&!l&&c.jsx("div",{className:"rounded-lg overflow-hidden border",children:c.jsx("img",{src:o,alt:"Invoice preview",className:"w-full h-48 object-contain bg-white cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>h(!0),title:"Click to view fullscreen"})}),l&&c.jsx("div",{className:"flex items-center justify-center h-32 bg-gray-100 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>h(!0),title:"Click to view fullscreen",children:c.jsxs("div",{className:"text-center",children:[c.jsx(zi,{className:"w-8 h-8 text-red-600 mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-gray-600",children:"PDF Ready for Upload"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to preview"})]})})]}),(o||l)&&c.jsx(jx,{src:o,alt:"Invoice preview",isPdf:l,isOpen:d,onClose:()=>h(!1)})]})}const os=class os{static async extractInvoiceData(e){var n,r;try{const s=await e.arrayBuffer();let i="image/jpeg";e.type==="application/pdf"?i="application/pdf":e.type==="image/png"?i="image/png":(e.type==="image/jpeg"||e.type==="image/jpg")&&(i="image/jpeg");const o=await fetch(this.API_URL,{method:"POST",headers:{"Content-Type":i,"X-WORKER-EXTRACTOR-ID":this.EXTRACTOR_ID,"X-WORKER-TOKEN":this.TOKEN},body:s});if(!o.ok)throw new Error(`OCR API request failed: ${o.status} ${o.statusText}`);const l=(r=(n=(await o.json()).documents)==null?void 0:n[0])==null?void 0:r.data;if(!l)throw new Error("No data extracted from the document");console.log("extractedData:",JSON.stringify(l,null,2));const u={};if(l.customer_name&&(u.customer_name=this.toProperCase(l.customer_name.trim())),l.invoice_date){const d=l.invoice_date.trim(),h=this.formatDateForInput(d);h&&(u.invoice_date=h)}if(l.total!==void 0&&l.total!==null){const d=parseFloat(l.total.toString());isNaN(d)||(u.invoice_amount=d.toFixed(2))}return u}catch(s){throw console.error("OCR extraction failed:",s),new Error(`Failed to extract invoice data: ${s instanceof Error?s.message:"Unknown error"}`)}}static formatDateForInput(e){try{const n=new Date(e);if(!isNaN(n.getTime())){const s=n.getUTCFullYear(),i=(n.getUTCMonth()+1).toString().padStart(2,"0"),o=n.getUTCDate().toString().padStart(2,"0");return console.log(`returning final (UTC): ${s}-${i}-${o}`),`${s}-${i}-${o}`}const r=[/(\d{1,2})\/(\d{1,2})\/(\d{4})/,/(\d{1,2})-(\d{1,2})-(\d{4})/,/(\d{4})-(\d{1,2})-(\d{1,2})/,/(\d{1,2})\.(\d{1,2})\.(\d{4})/];for(const s of r){const i=e.match(s);if(i){const[,o,a,l]=i;if(s===r[2])return`${o}-${a.padStart(2,"0")}-${l.padStart(2,"0")}`;const u=parseInt(o),d=parseInt(a),h=parseInt(l);if(u>=1&&u<=12&&d>=1&&d<=31)return`${h}-${u.toString().padStart(2,"0")}-${d.toString().padStart(2,"0")}`}}return null}catch{return null}}static toProperCase(e){return e.toLowerCase().replace(/\b\w/g,n=>n.toUpperCase())}};os.API_URL="https://worker.formextractorai.com/v2/extract",os.EXTRACTOR_ID="c72158dd-f8d4-41c1-8441-b50961b5a762",os.TOKEN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyZXNvdXJjZV9vd25lcl9pZCI6IjNlZjMzM2E1LTZkZWYtNGY5Ny04Y2MxLWZhN2Y1NTBkYmU2NCIsIndvcmtlcl90b2tlbl9pZCI6IjM5YmNiZDAxLWEwYjItNGNmZC1hZmIxLTg0ZWViMzAyNjc1MSJ9.wgMBS3qQSGxXfkfmxfhz0t-U-am0Vhp164WQezqCDEY";let ll=os;const Nx=["Massage Therapy","Physio Therapy","Dental","Prescription Medication","Vision","Other"];function Px({invoice:t,onSubmit:e,onCancel:n,isLoading:r}){var b,j,E,P,U;const[s,i]=k.useState(Le),[o,a]=k.useState({customer_name:(t==null?void 0:t.customer_name)||"",invoice_date:(t==null?void 0:t.invoice_date)||"",invoice_amount:((b=t==null?void 0:t.invoice_amount)==null?void 0:b.toString())||"",description_category:(t==null?void 0:t.description_category)||s.general.defaultCategory,description_other:(t==null?void 0:t.description_other)||""}),[l,u]=k.useState(null),[d,h]=k.useState({}),[f,y]=k.useState(!1),[v,w]=k.useState("idle"),_=Nr();k.useEffect(()=>{(async()=>{try{const L=await an.getSettings();i(L),t||a(W=>({...W,description_category:L.general.defaultCategory}))}catch(L){console.error("Failed to load settings:",L)}})()},[t]);const m=()=>{var L;const N={};return o.customer_name.trim()||(N.customer_name="Customer name is required"),o.invoice_date||(N.invoice_date="Invoice date is required"),(!o.invoice_amount||parseFloat(o.invoice_amount)<=0)&&(N.invoice_amount="Valid invoice amount is required"),o.description_category==="Other"&&!((L=o.description_other)!=null&&L.trim())&&(N.description_other="Please specify the description"),!l&&!t&&(N.file="Invoice image or PDF is required"),h(N),Object.keys(N).length===0},p=async N=>{if(N.preventDefault(),!!m())try{await e({...o,file:l||void 0})}catch(L){console.error("Error saving invoice:",L),_.showAlert({title:"Save Failed",message:"Error saving invoice. Please try again.",type:"error"})}},g=(N,L)=>{a(W=>({...W,[N]:L})),d[N]&&h(W=>({...W,[N]:""}))},x=async N=>{if(u(N),s.general.autoExtractOCR){y(!0),w("idle");try{const L=await ll.extractInvoiceData(N);a(ue=>({...ue,customer_name:L.customer_name||ue.customer_name,invoice_date:L.invoice_date||ue.invoice_date,invoice_amount:L.invoice_amount||ue.invoice_amount})),w("success");const W={...d};L.customer_name&&delete W.customer_name,L.invoice_date&&delete W.invoice_date,L.invoice_amount&&delete W.invoice_amount,h(W)}catch(L){console.error("OCR extraction failed:",L),w("error")}finally{y(!1)}}};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4",children:[c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"p-2 hover:bg-blue-500 rounded-lg transition-colors",children:c.jsx(Tf,{className:"w-5 h-5 text-white"})}),c.jsx("h1",{className:"text-xl font-semibold text-white",children:t?"Edit Invoice":"Add New Invoice"})]})}),c.jsx("form",{onSubmit:p,className:"p-6 space-y-6",children:c.jsxs("div",{className:"relative",children:[f&&c.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-xl",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Extracting invoice data..."}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please wait while we process your document"})]})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t?"Replace Invoice Document (Optional)":"Invoice Document"}),f&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Extracting data..."]}),v==="success"&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[c.jsx(Rc,{className:"w-4 h-4"}),"Data extracted successfully!"]}),v==="error"&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[c.jsx(Rc,{className:"w-4 h-4"}),"Extraction failed, please fill manually"]})]}),c.jsx(Cx,{onFileSelect:x,selectedFile:l,onClearFile:()=>u(null),existingFileUrl:t==null?void 0:t.file_url}),d.file&&!t&&c.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.file})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"customer_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name"}),c.jsx("input",{type:"text",id:"customer_name",value:o.customer_name,onChange:N=>g("customer_name",N.target.value),disabled:f,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${f?"bg-gray-50 cursor-not-allowed":d.customer_name?"border-red-300":v==="success"&&o.customer_name?"border-green-300 bg-green-50":"border-gray-300"}`,placeholder:"Enter customer name"}),d.customer_name&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.customer_name})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"invoice_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Date"}),c.jsx("input",{type:"date",id:"invoice_date",value:o.invoice_date,onChange:N=>g("invoice_date",N.target.value),disabled:f,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${f?"bg-gray-50 cursor-not-allowed":d.invoice_date?"border-red-300":v==="success"&&o.invoice_date?"border-green-300 bg-green-50":"border-gray-300"}`}),d.invoice_date&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.invoice_date})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"invoice_amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Amount"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),c.jsx("input",{type:"number",id:"invoice_amount",step:"0.01",value:o.invoice_amount,onChange:N=>g("invoice_amount",N.target.value),disabled:f,className:`w-full pl-8 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${f?"bg-gray-50 cursor-not-allowed":d.invoice_amount?"border-red-300":v==="success"&&o.invoice_amount?"border-green-300 bg-green-50":"border-gray-300"}`,placeholder:"0.00"})]}),d.invoice_amount&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.invoice_amount})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"description_category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description Category"}),c.jsx("select",{id:"description_category",value:o.description_category,onChange:N=>g("description_category",N.target.value),disabled:f,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:Nx.map(N=>c.jsx("option",{value:N,children:N},N))})]}),o.description_category==="Other"&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"description_other",className:"block text-sm font-medium text-gray-700 mb-2",children:"Specify Description"}),c.jsx("input",{type:"text",id:"description_other",value:o.description_other,onChange:N=>g("description_other",N.target.value),disabled:f,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${f?"bg-gray-50 cursor-not-allowed":d.description_other?"border-red-300":"border-gray-300"}`,placeholder:"Enter custom description"}),d.description_other&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.description_other})]}),c.jsxs("div",{className:"flex gap-4 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),c.jsxs("button",{type:"submit",disabled:r||f,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:[r||f?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsx(Rf,{className:"w-5 h-5"}),r?"Saving...":f?"Processing...":t?"Update Invoice":"Save Invoice"]})]})]})})]})}),c.jsx(Cr,{isOpen:_.isOpen,onClose:_.handleClose,title:((j=_.config)==null?void 0:j.title)||"",message:((E=_.config)==null?void 0:E.message)||"",type:(P=_.config)==null?void 0:P.type,buttonText:(U=_.config)==null?void 0:U.buttonText})]})}function Tx({onBack:t}){var Et,Be,vt,Pr;const[e,n]=k.useState(Le);k.useState(!1);const[r,s]=k.useState(!0),[i,o]=k.useState("idle"),[a,l]=k.useState(!1),[u,d]=k.useState([]);k.useState(!1);const[h,f]=k.useState(!1),[y,v]=k.useState(""),[w,_]=k.useState([]),[m,p]=k.useState(!1),[g,x]=k.useState(!1),[b,j]=k.useState(""),[E,P]=k.useState([]),[U,N]=k.useState(!1);k.useState(new Set);const L=Nr();k.useEffect(()=>{(async()=>{s(!0);try{console.log("Loading settings...");const R=Date.now(),X=await an.getSettings(),V=Date.now()-R;console.log(`Settings loaded in ${V}ms`),n(X)}catch(R){console.error("Failed to load settings:",R),n(Le),L.showAlert({title:"Settings Load Failed",message:"Failed to load settings from database. Using default settings.",type:"warning"})}finally{s(!1)}})();const S=()=>{const R=K.isAuthenticated();console.log("Settings page - checking auth status:",R),l(R)};S();const $=()=>{document.hidden||S()};return document.addEventListener("visibilitychange",$),()=>{document.removeEventListener("visibilitychange",$)}},[]);const W=(I,S,$)=>{n(R=>({...R,[I]:{...R[I],[S]:$}}))},ue=async()=>{o("saving");try{await an.saveSettings(e),o("success"),setTimeout(()=>o("idle"),2e3)}catch(I){console.error("Failed to save settings:",I),o("error"),setTimeout(()=>o("idle"),3e3)}},mt=()=>{try{console.log("Connect OneDrive button clicked"),K.initiateLogin()}catch(I){console.error("Authentication failed:",I),L.showAlert({title:"Authentication Failed",message:"Authentication failed. Please try again.",type:"error"})}},A=()=>{K.logout(),l(!1),d([]),console.log("Disconnected from Microsoft OneDrive")},q=async(I="")=>{if(a){console.log("loadExcelItems called with path:",I),p(!0);try{const[S,$]=await Promise.all([K.listFolders(I),K.listExcelFilesInPath(I)]),R=[...S.map(X=>({...X,isFolder:!0})),...$.map(X=>({...X,isFolder:!1}))];console.log("Loaded Excel items:",R),_(R),v(I)}catch(S){console.error("Failed to load Excel items:",S),L.showAlert({title:"Load Failed",message:`Failed to load items: ${S instanceof Error?S.message:"Unknown error"}. Please check your connection and permissions.`,type:"error"})}finally{p(!1)}}},be=(I,S)=>{W("onedrive","excelFileName",I),console.log("Selected Excel file:",{fileName:I,filePath:S}),f(!1)},T=I=>{q(I)},D=()=>{const I=y.split("/").filter($=>$.length>0);I.pop();const S=I.join("/");q(S)},M=async(I="")=>{if(a){console.log("loadFolders called with path:",I),N(!0);try{const S=await K.listFolders(I);console.log("Loaded folders:",S),P(S),j(I)}catch(S){console.error("Failed to load folders:",S),L.showAlert({title:"Load Failed",message:`Failed to load folders: ${S instanceof Error?S.message:"Unknown error"}. Please check your connection and permissions.`,type:"error"})}finally{N(!1)}}},J=I=>{W("onedrive","invoiceDirectory",I),x(!1)},se=I=>{M(I)},bt=()=>{const I=b.split("/").filter($=>$.length>0);I.pop();const S=I.join("/");M(S)},Qe=()=>{switch(i){case"saving":return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]});case"success":return c.jsxs(c.Fragment,{children:[c.jsx(yr,{className:"w-4 h-4"}),"Saved!"]});case"error":return c.jsxs(c.Fragment,{children:[c.jsx(su,{className:"w-4 h-4"}),"Error"]});default:return c.jsxs(c.Fragment,{children:[c.jsx(Rf,{className:"w-4 h-4"}),"Save Settings"]})}};return r?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading settings..."})]})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(Tf,{className:"w-5 h-5 text-gray-600"})}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Qa,{className:"w-6 h-6 text-blue-600"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"})]})]})})}),c.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx(Ur,{className:"w-5 h-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"OneDrive Integration"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Configure where invoice files are stored and tracked"})]})]}),c.jsx("div",{className:"mb-6 p-4 rounded-lg border",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-3 h-3 rounded-full ${a?"bg-green-500":"bg-gray-300"}`}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-900",children:a?"Connected to Microsoft OneDrive":"Not connected"}),!a&&c.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"OneDrive connection is automatically attempted when you log in"}),a&&c.jsx("div",{className:"text-xs text-gray-500 mt-1",children:(()=>{const I=K.checkTokenValidity();if(I.expiresAt){const S=Math.floor((I.timeRemaining||0)/36e5);return S>0?`Token expires in ${S} hours`:"Token will refresh automatically"}return"Persistent login active"})()})]})]}),a?c.jsx("button",{onClick:A,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:"Disconnect"}):c.jsx("button",{onClick:mt,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Reconnect OneDrive"})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{htmlFor:"invoiceDirectory",className:"block text-sm font-medium text-gray-700",children:"Invoice Upload Directory"}),a&&c.jsxs("button",{onClick:()=>{console.log("Browse Folders button clicked"),x(!0),M()},className:"flex items-center gap-2 px-3 py-1 text-xs text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[c.jsx(M0,{className:"w-3 h-3"}),"Browse Folders"]})]}),c.jsx("input",{type:"text",id:"invoiceDirectory",value:e.onedrive.invoiceDirectory,onChange:I=>W("onedrive","invoiceDirectory",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"e.g., Invoices, Documents/Invoices, Tax/2024/Invoices"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Specify the OneDrive folder where invoice files will be uploaded. Use forward slashes for subfolders."})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{htmlFor:"excelFileName",className:"block text-sm font-medium text-gray-700",children:"Excel Tracking File"}),a&&c.jsxs("button",{onClick:()=>{console.log("Browse Excel Files button clicked"),f(!0),q()},disabled:m,className:"flex items-center gap-2 px-3 py-1 text-xs text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[m?c.jsx("div",{className:"w-3 h-3 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}):c.jsx(Mr,{className:"w-3 h-3"}),"Browse Files"]})]}),c.jsx("input",{type:"text",id:"excelFileName",value:e.onedrive.excelFileName,onChange:I=>W("onedrive","excelFileName",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"e.g., Invoice_Tracker.xlsx, Expenses_2024.xlsx"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Name of the Excel file where invoice data will be tracked. If the file doesn't exist, it will be created automatically."}),u.length>0&&c.jsxs("div",{className:"mt-3",children:[c.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Available Excel files:"}),c.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:u.map((I,S)=>c.jsxs("button",{onClick:()=>W("onedrive","excelFileName",I.name),className:"flex items-center gap-2 w-full px-3 py-2 text-left text-xs hover:bg-gray-50 rounded-lg transition-colors",children:[c.jsx(Mr,{className:"w-3 h-3 text-green-600"}),c.jsx("span",{className:"truncate",children:I.name}),c.jsx("span",{className:"text-gray-400 text-xs ml-auto",children:I.path})]},S))})]})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:c.jsx(Qa,{className:"w-5 h-5 text-emerald-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"General Settings"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Configure default behavior and preferences"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"defaultCategory",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Invoice Category"}),c.jsxs("select",{id:"defaultCategory",value:e.general.defaultCategory,onChange:I=>W("general","defaultCategory",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[c.jsx("option",{value:"Massage Therapy",children:"Massage Therapy"}),c.jsx("option",{value:"Physio Therapy",children:"Physio Therapy"}),c.jsx("option",{value:"Dentist",children:"Dentist"}),c.jsx("option",{value:"Prescription Medication",children:"Prescription Medication"}),c.jsx("option",{value:"Vision",children:"Vision"}),c.jsx("option",{value:"Other",children:"Other"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"autoExtractOCR",className:"text-sm font-medium text-gray-700",children:"Auto-extract data from uploaded files"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically extract customer name, date, and amount using OCR when files are uploaded"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",id:"autoExtractOCR",checked:e.general.autoExtractOCR,onChange:I=>W("general","autoExtractOCR",I.target.checked),className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:ue,disabled:i==="saving",className:`flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-colors ${i==="success"?"bg-green-600 text-white":i==="error"?"bg-red-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50 disabled:cursor-not-allowed`,children:Qe()})})]})}),g&&c.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Browse OneDrive Folders"}),c.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(js,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gray-600",children:[c.jsx(Ur,{className:"w-4 h-4"}),c.jsxs("span",{children:["Current path: /",b||"OneDrive Root"]})]})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[b&&c.jsxs("button",{onClick:bt,className:"flex items-center gap-2 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[c.jsx(Oc,{className:"w-4 h-4"}),"Go Up"]}),c.jsxs("button",{onClick:()=>J(b),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium ml-auto",children:[c.jsx(yr,{className:"w-4 h-4"}),"Use This Folder"]})]}),c.jsx("div",{className:"border rounded-lg max-h-64 overflow-y-auto",children:U?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Loading folders..."})]}):E.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(Ur,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),c.jsx("p",{children:"No folders found in this location"})]}):c.jsx("div",{className:"divide-y",children:E.map((I,S)=>c.jsxs("button",{onClick:()=>se(I.path),className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 transition-colors",children:[c.jsx(Ur,{className:"w-5 h-5 text-blue-600"}),c.jsx("span",{className:"flex-1 text-gray-900",children:I.name}),c.jsx(Fi,{className:"w-4 h-4 text-gray-400"})]},S))})})]})]})}),h&&c.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Browse Excel Files"}),c.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(js,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gray-600",children:[c.jsx(Mr,{className:"w-4 h-4"}),c.jsxs("span",{children:["Current path: /",y||"OneDrive Root"]})]})]}),c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"flex items-center gap-2 mb-4",children:y&&c.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[c.jsx(Oc,{className:"w-4 h-4"}),"Go Up"]})}),c.jsx("div",{className:"border rounded-lg max-h-64 overflow-y-auto",children:m?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Loading..."})]}):w.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(Mr,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),c.jsx("p",{children:"No folders or Excel files found in this location"})]}):c.jsx("div",{className:"divide-y",children:w.map((I,S)=>c.jsxs("button",{onClick:()=>{I.isFolder?T(I.path):be(I.name,I.path)},className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 transition-colors",children:[I.isFolder?c.jsx(Ur,{className:"w-5 h-5 text-blue-600"}):c.jsx(Mr,{className:"w-5 h-5 text-green-600"}),c.jsx("span",{className:"flex-1 text-gray-900",children:I.name}),I.isFolder?c.jsx(Fi,{className:"w-4 h-4 text-gray-400"}):c.jsx("span",{className:"text-xs text-gray-500",children:"Select"})]},S))})})]})]})}),c.jsx(Cr,{isOpen:L.isOpen,onClose:L.handleClose,title:((Et=L.config)==null?void 0:Et.title)||"",message:((Be=L.config)==null?void 0:Be.message)||"",type:(vt=L.config)==null?void 0:vt.type,buttonText:(Pr=L.config)==null?void 0:Pr.buttonText})]})}function Ox(){const{user:t}=sp(),[e,n]=k.useState("list"),[r,s]=k.useState(null),[i,o]=k.useState(!1),a=Nr(),l=()=>{s(null),n("add")},u=y=>{s(y),n("edit")},d=()=>{n("settings")},h=()=>{s(null),n("list")},f=async y=>{if(!t){a.showAlert({title:"Authentication Required",message:"You must be logged in to save invoices.",type:"error"});return}o(!0);try{let v;if(r){if(v=await tt.updateInvoice(r.id,y,t.id),console.log("Invoice updated:",v),v.onedrive_uploaded&&v.excel_synced)try{await tt.resyncToExcel(v),console.log("Invoice changes resynced to Excel")}catch(w){console.error("Failed to resync to Excel:",w)}}else v=await tt.createInvoice(y,t.id),console.log("Invoice created:",v);s(null),n("list"),K.isAuthenticated()&&setTimeout(async()=>{try{console.log("Microsoft is connected, auto-syncing to OneDrive in background...");const w=await tt.uploadToOneDrive(v);w.success?(console.log("Background auto-sync to OneDrive successful"),window.dispatchEvent(new CustomEvent("invoiceUpdated"))):(console.warn("Background auto-sync to OneDrive failed:",w.error),a.showAlert({title:"Background Sync Warning",message:`Invoice saved successfully, but background sync to OneDrive failed: ${w.error}. You can manually sync from the invoice list.`,type:"warning"}))}catch(w){console.error("Background auto-sync error:",w),a.showAlert({title:"Background Sync Warning",message:"Invoice saved successfully, but background sync to OneDrive encountered an error. You can manually sync from the invoice list.",type:"warning"})}},100)}catch(v){console.error("Error saving invoice:",v),a.showAlert({title:"Save Failed",message:"Error saving invoice. Please try again.",type:"error"})}finally{o(!1)}};return c.jsx(Ix,{currentView:e,editingInvoice:r,isSubmitting:i,alertModal:a,onAddInvoice:l,onEditInvoice:u,onShowSettings:d,onBackToList:h,onSubmitInvoice:f})}function Ix({currentView:t,editingInvoice:e,isSubmitting:n,alertModal:r,onAddInvoice:s,onEditInvoice:i,onShowSettings:o,onBackToList:a,onSubmitInvoice:l}){var u,d,h,f;return t==="settings"?c.jsx(Tx,{onBack:a}):t==="add"||t==="edit"?c.jsx(Px,{invoice:e,onSubmit:l,onCancel:a,isLoading:n}):c.jsxs(c.Fragment,{children:[c.jsx(Ex,{onAddInvoice:s,onEditInvoice:i,onShowSettings:o}),c.jsx(Cr,{isOpen:r.isOpen,onClose:r.handleClose,title:((u=r.config)==null?void 0:u.title)||"",message:((d=r.config)==null?void 0:d.message)||"",type:(h=r.config)==null?void 0:h.type,buttonText:(f=r.config)==null?void 0:f.buttonText})]})}K.configure({clientId:"9117a1ac-c6b7-4222-8e11-290d5cca0bcc",tenantId:"4057aa25-ad69-450c-a984-349410211e98",redirectUri:window.location.origin+"/auth/callback",scopes:["https://graph.microsoft.com/Files.ReadWrite","https://graph.microsoft.com/Sites.ReadWrite.All","https://graph.microsoft.com/User.Read"]});vf(document.getElementById("root")).render(c.jsx(k.StrictMode,{children:c.jsx(hw,{children:c.jsx(R0,{children:c.jsxs(T0,{children:[c.jsx(Ka,{path:"/auth/callback",element:c.jsx(mw,{})}),c.jsx(Ka,{path:"*",element:c.jsx(Ox,{})})]})})})}));
